function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl"),n=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function r(t){if(_(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=r(A(i)?s(i):i);if(o)for(const t in o)e[t]=o[t]}return e}if(S(t))return t}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function u(t){let e="";if(A(t))e=t;else if(_(t))for(let n=0;n<t.length;n++)e+=u(t[n])+" ";else if(S(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const a=t=>null==t?"":S(t)?JSON.stringify(t,c,2):String(t),c=(t,e)=>E(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:I(e)?{[`Set(${e.size})`]:[...e.values()]}:!S(e)||_(e)||D(e)?e:String(e),l={},f=[],h=()=>{},p=()=>!1,d=/^on[^a-z]/,v=t=>d.test(t),y=t=>t.startsWith("onUpdate:"),g=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(t,e)=>b.call(t,e),_=Array.isArray,E=t=>"[object Map]"===C(t),I=t=>"[object Set]"===C(t),T=t=>"function"==typeof t,A=t=>"string"==typeof t,N=t=>"symbol"==typeof t,S=t=>null!==t&&"object"==typeof t,x=t=>S(t)&&T(t.then)&&T(t.catch),O=Object.prototype.toString,C=t=>O.call(t),D=t=>"[object Object]"===C(t),k=t=>A(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,P=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},R=/-(\w)/g,V=L((t=>t.replace(R,((t,e)=>e?e.toUpperCase():"")))),j=/\B([A-Z])/g,M=L((t=>t.replace(j,"-$1").toLowerCase())),F=L((t=>t.charAt(0).toUpperCase()+t.slice(1))),U=L((t=>t?`on${F(t)}`:"")),q=(t,e)=>t!==e&&(t==t||e==e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},z=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},G=t=>{const e=parseFloat(t);return isNaN(e)?t:e},H=new WeakMap,K=[];let Y;const Q=Symbol(""),X=Symbol("");function W(t,e=l){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return e.scheduler?void 0:t();if(!K.includes(n)){Z(n);try{return et.push(tt),tt=!0,K.push(n),Y=n,t()}finally{K.pop(),rt(),Y=K[K.length-1]}}};return n.id=J++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function $(t){t.active&&(Z(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let J=0;function Z(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let tt=!0;const et=[];function nt(){et.push(tt),tt=!1}function rt(){const t=et.pop();tt=void 0===t||t}function it(t,e,n){if(!tt||void 0===Y)return;let r=H.get(t);r||H.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(Y)||(i.add(Y),Y.deps.push(i))}function ot(t,e,n,r,i,o){const s=H.get(t);if(!s)return;const u=new Set,a=t=>{t&&t.forEach((t=>{(t!==Y||t.allowRecurse)&&u.add(t)}))};if("clear"===e)s.forEach(a);else if("length"===n&&_(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&a(t)}));else switch(void 0!==n&&a(s.get(n)),e){case"add":_(t)?k(n)&&a(s.get("length")):(a(s.get(Q)),E(t)&&a(s.get(X)));break;case"delete":_(t)||(a(s.get(Q)),E(t)&&a(s.get(X)));break;case"set":E(t)&&a(s.get(Q))}u.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const st=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(N)),ut=ht(),at=ht(!1,!0),ct=ht(!0),lt=ht(!0,!0),ft={};function ht(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?Ft:Mt).get(n))return n;const o=_(n);if(!t&&o&&w(ft,r))return Reflect.get(ft,r,i);const s=Reflect.get(n,r,i);if(N(r)?st.has(r):"__proto__"===r||"__v_isRef"===r)return s;if(t||it(n,0,r),e)return s;if(Qt(s)){return!o||!k(r)?s.value:s}return S(s)?t?Bt(s):qt(s):s}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];ft[t]=function(...t){const n=Yt(this);for(let e=0,i=this.length;e<i;e++)it(n,0,e+"");const r=e.apply(n,t);return-1===r||!1===r?e.apply(n,t.map(Yt)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];ft[t]=function(...t){nt();const n=e.apply(this,t);return rt(),n}}));function pt(t=!1){return function(e,n,r,i){const o=e[n];if(!t&&(r=Yt(r),!_(e)&&Qt(o)&&!Qt(r)))return o.value=r,!0;const s=_(e)&&k(n)?Number(n)<e.length:w(e,n),u=Reflect.set(e,n,r,i);return e===Yt(i)&&(s?q(r,o)&&ot(e,"set",n,r):ot(e,"add",n,r)),u}}const dt={get:ut,set:pt(),deleteProperty:function(t,e){const n=w(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&ot(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return N(e)&&st.has(e)||it(t,0,e),n},ownKeys:function(t){return it(t,0,_(t)?"length":Q),Reflect.ownKeys(t)}},vt={get:ct,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},yt=g({},dt,{get:at,set:pt(!0)});g({},vt,{get:lt});const gt=t=>S(t)?qt(t):t,mt=t=>S(t)?Bt(t):t,bt=t=>t,wt=t=>Reflect.getPrototypeOf(t);function _t(t,e,n=!1,r=!1){const i=Yt(t=t.__v_raw),o=Yt(e);e!==o&&!n&&it(i,0,e),!n&&it(i,0,o);const{has:s}=wt(i),u=n?mt:r?bt:gt;return s.call(i,e)?u(t.get(e)):s.call(i,o)?u(t.get(o)):void 0}function Et(t,e=!1){const n=this.__v_raw,r=Yt(n),i=Yt(t);return t!==i&&!e&&it(r,0,t),!e&&it(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function It(t,e=!1){return t=t.__v_raw,!e&&it(Yt(t),0,Q),Reflect.get(t,"size",t)}function Tt(t){t=Yt(t);const e=Yt(this),n=wt(e).has.call(e,t);return e.add(t),n||ot(e,"add",t,t),this}function At(t,e){e=Yt(e);const n=Yt(this),{has:r,get:i}=wt(n);let o=r.call(n,t);o||(t=Yt(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?q(e,s)&&ot(n,"set",t,e):ot(n,"add",t,e),this}function Nt(t){const e=Yt(this),{has:n,get:r}=wt(e);let i=n.call(e,t);i||(t=Yt(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&ot(e,"delete",t,void 0),o}function St(){const t=Yt(this),e=0!==t.size,n=t.clear();return e&&ot(t,"clear",void 0,void 0),n}function xt(t,e){return function(n,r){const i=this,o=i.__v_raw,s=Yt(o),u=t?mt:e?bt:gt;return!t&&it(s,0,Q),o.forEach(((t,e)=>n.call(r,u(t),u(e),i)))}}function Ot(t,e,n){return function(...r){const i=this.__v_raw,o=Yt(i),s=E(o),u="entries"===t||t===Symbol.iterator&&s,a="keys"===t&&s,c=i[t](...r),l=e?mt:n?bt:gt;return!e&&it(o,0,a?X:Q),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:u?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function Ct(t){return function(...e){return"delete"!==t&&this}}const Dt={get(t){return _t(this,t)},get size(){return It(this)},has:Et,add:Tt,set:At,delete:Nt,clear:St,forEach:xt(!1,!1)},kt={get(t){return _t(this,t,!1,!0)},get size(){return It(this)},has:Et,add:Tt,set:At,delete:Nt,clear:St,forEach:xt(!1,!0)},Pt={get(t){return _t(this,t,!0)},get size(){return It(this,!0)},has(t){return Et.call(this,t,!0)},add:Ct("add"),set:Ct("set"),delete:Ct("delete"),clear:Ct("clear"),forEach:xt(!0,!1)};function Lt(t,e){const n=e?kt:t?Pt:Dt;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(w(n,r)&&r in e?n:e,r,i)}["keys","values","entries",Symbol.iterator].forEach((t=>{Dt[t]=Ot(t,!1,!1),Pt[t]=Ot(t,!0,!1),kt[t]=Ot(t,!1,!0)}));const Rt={get:Lt(!1,!1)},Vt={get:Lt(!1,!0)},jt={get:Lt(!0,!1)},Mt=new WeakMap,Ft=new WeakMap;function Ut(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>C(t).slice(8,-1))(t))}function qt(t){return t&&t.__v_isReadonly?t:zt(t,!1,dt,Rt)}function Bt(t){return zt(t,!0,vt,jt)}function zt(t,e,n,r){if(!S(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const i=e?Ft:Mt,o=i.get(t);if(o)return o;const s=Ut(t);if(0===s)return t;const u=new Proxy(t,2===s?r:n);return i.set(t,u),u}function Gt(t){return Ht(t)?Gt(t.__v_raw):!(!t||!t.__v_isReactive)}function Ht(t){return!(!t||!t.__v_isReadonly)}function Kt(t){return Gt(t)||Ht(t)}function Yt(t){return t&&Yt(t.__v_raw)||t}function Qt(t){return Boolean(t&&!0===t.__v_isRef)}const Xt={get:(t,e,n)=>{return Qt(r=Reflect.get(t,e,n))?r.value:r;var r},set:(t,e,n,r)=>{const i=t[e];return Qt(i)&&!Qt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Wt(t){return Gt(t)?t:new Proxy(t,Xt)}class $t{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}class Jt{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=W(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,ot(Yt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),it(Yt(this),0,"value"),this._value}set value(t){this._setter(t)}}function Zt(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){ee(o,e,n)}return i}function te(t,e,n,r){if(T(t)){const i=Zt(t,e,n,r);return i&&x(i)&&i.catch((t=>{ee(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(te(t[o],e,n,r));return i}function ee(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void Zt(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let ne=!1,re=!1;const ie=[];let oe=0;const se=[];let ue=null,ae=0;const ce=[];let le=null,fe=0;const he=Promise.resolve();let pe=null,de=null;function ve(t){const e=pe||he;return t?e.then(this?t.bind(this):t):e}function ye(t){ie.length&&ie.includes(t,ne&&t.allowRecurse?oe+1:oe)||t===de||(ie.push(t),ge())}function ge(){ne||re||(re=!0,pe=he.then(Ee))}function me(t,e,n,r){_(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),ge()}function be(t,e=null){if(se.length){for(de=e,ue=[...new Set(se)],se.length=0,ae=0;ae<ue.length;ae++)ue[ae]();ue=null,ae=0,de=null,be(t,e)}}function we(t){if(ce.length){const t=[...new Set(ce)];if(ce.length=0,le)return void le.push(...t);for(le=t,le.sort(((t,e)=>_e(t)-_e(e))),fe=0;fe<le.length;fe++)le[fe]();le=null,fe=0}}const _e=t=>null==t.id?1/0:t.id;function Ee(t){re=!1,ne=!0,be(t),ie.sort(((t,e)=>_e(t)-_e(e)));try{for(oe=0;oe<ie.length;oe++){const t=ie[oe];t&&Zt(t,null,14)}}finally{oe=0,ie.length=0,we(),ne=!1,pe=null,(ie.length||ce.length)&&Ee(t)}}function Ie(t,e,...n){const r=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(G))}let u=U(V(e)),a=r[u];!a&&o&&(u=U(M(e)),a=r[u]),a&&te(a,t,6,i);const c=r[u+"Once"];if(c){if(t.emitted){if(t.emitted[u])return}else(t.emitted={})[u]=!0;te(c,t,6,i)}}function Te(t,e,n=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const r=t.emits;let i={},o=!1;if(!T(t)){const r=t=>{o=!0,g(i,Te(t,e,!0))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return r||o?(_(r)?r.forEach((t=>i[t]=null)):g(i,r),t.__emits=i):t.__emits=null}function Ae(t,e){return!(!t||!v(e))&&(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,M(e))||w(t,e))}let Ne=null;function Se(t){Ne=t}function xe(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:u,attrs:a,emit:c,render:l,renderCache:f,data:h,setupState:p,ctx:d}=t;let v;Ne=t;try{let t;if(4&n.shapeFlag){const e=i||r;v=ar(l.call(e,e,f,o,p,h,d)),t=a}else{const n=e;0,v=ar(n.length>1?n(o,{attrs:a,slots:u,emit:c}):n(o,null)),t=e.props?a:Ce(a)}let g=v;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:n}=g;e.length&&(1&n||6&n)&&(s&&e.some(y)&&(t=De(t,s)),g=or(g,t))}n.dirs&&(g.dirs=g.dirs?g.dirs.concat(n.dirs):n.dirs),n.transition&&(g.transition=n.transition),v=g}catch(g){ee(g,t,1),v=ir(Kn)}return Ne=null,v}function Oe(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(!Zn(r))return;if(r.type!==Kn||"v-if"===r.children){if(e)return;e=r}}return e}const Ce=t=>{let e;for(const n in t)("class"===n||"style"===n||v(n))&&((e||(e={}))[n]=t[n]);return e},De=(t,e)=>{const n={};for(const r in t)y(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function ke(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Ae(n,o))return!0}return!1}function Pe(t){if(T(t)&&(t=t()),_(t)){t=Oe(t)}return ar(t)}let Le=0;const Re=t=>Le+=t;function Ve(t,e=Ne){if(!e)return t;const n=(...n)=>{Le||Wn(!0);const r=Ne;Se(e);const i=t(...n);return Se(r),Le||$n(),i};return n._c=!0,n}let je=null;const Me=[];function Fe(t){Me.push(je=t)}function Ue(){Me.pop(),je=Me[Me.length-1]||null}function qe(t){return e=>Ve((function(){Fe(t);const n=e.apply(this,arguments);return Ue(),n}))}function Be(t,e,n,r=!1){const i={},o={};z(o,er,1),ze(t,e,i,o),n?t.props=r?i:zt(i,!1,yt,Vt):t.type.props?t.props=i:t.props=o,t.attrs=o}function ze(t,e,n,r){const[i,o]=t.propsOptions;if(e)for(const s in e){const o=e[s];if(P(s))continue;let u;i&&w(i,u=V(s))?n[u]=o:Ae(t.emitsOptions,s)||(r[s]=o)}if(o){const e=Yt(n);for(let r=0;r<o.length;r++){const s=o[r];n[s]=Ge(i,e,s,e[s],t)}}}function Ge(t,e,n,r,i){const o=t[n];if(null!=o){const t=w(o,"default");if(t&&void 0===r){const t=o.default;o.type!==Function&&T(t)?(Or(i),r=t(e),Or(null)):r=t}o[0]&&(w(e,n)||t?!o[1]||""!==r&&r!==M(n)||(r=!0):r=!1)}return r}function He(t,e,n=!1){if(!e.deopt&&t.__props)return t.__props;const r=t.props,i={},o=[];let s=!1;if(!T(t)){const r=t=>{s=!0;const[n,r]=He(t,e,!0);g(i,n),r&&o.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!r&&!s)return t.__props=f;if(_(r))for(let u=0;u<r.length;u++){const t=V(r[u]);Ke(t)&&(i[t]=l)}else if(r)for(const u in r){const t=V(u);if(Ke(t)){const e=r[u],n=i[t]=_(e)||T(e)?{type:e}:e;if(n){const e=Xe(Boolean,n.type),r=Xe(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||w(n,"default"))&&o.push(t)}}}return t.__props=[i,o]}function Ke(t){return"$"!==t[0]}function Ye(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Qe(t,e){return Ye(t)===Ye(e)}function Xe(t,e){if(_(e)){for(let n=0,r=e.length;n<r;n++)if(Qe(e[n],t))return n}else if(T(e))return Qe(e,t)?0:-1;return-1}function We(t,e,n=Sr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;nt(),Or(n);const i=te(e,n,t,r);return Or(null),rt(),i});return r?i.unshift(o):i.push(o),o}}const $e=t=>(e,n=Sr)=>!Cr&&We(t,e,n),Je=$e("bm"),Ze=$e("m"),tn=$e("bu"),en=$e("u"),nn=$e("bum"),rn=$e("um"),on=$e("rtg"),sn=$e("rtc"),un={};function an(t,e,n){return cn(t,e,n)}function cn(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=l,u=Sr){let a,c,f=!1;if(Qt(t)?(a=()=>t.value,f=!!t._shallow):Gt(t)?(a=()=>t,r=!0):a=_(t)?()=>t.map((t=>Qt(t)?t.value:Gt(t)?fn(t):T(t)?Zt(t,u,2):void 0)):T(t)?e?()=>Zt(t,u,2):()=>{if(!u||!u.isUnmounted)return c&&c(),Zt(t,u,3,[p])}:h,e&&r){const t=a;a=()=>fn(t())}const p=t=>{c=g.options.onStop=()=>{Zt(t,u,4)}};let d=_(t)?[]:un;const v=()=>{if(g.active)if(e){const t=g();(r||f||q(t,d))&&(c&&c(),te(e,u,3,[t,d===un?void 0:d,p]),d=t)}else g()};let y;v.allowRecurse=!!e,y="sync"===i?v:"post"===i?()=>Rn(v,u&&u.suspense):()=>{!u||u.isMounted?function(t){me(t,ue,se,ae)}(v):v()};const g=W(a,{lazy:!0,onTrack:o,onTrigger:s,scheduler:y});return Pr(g,u),e?n?v():d=g():"post"===i?Rn(g,u&&u.suspense):g(),()=>{$(g),u&&m(u.effects,g)}}function ln(t,e,n){const r=this.proxy;return cn(A(t)?()=>r[t]:t.bind(r),e.bind(r),n,this)}function fn(t,e=new Set){if(!S(t)||e.has(t))return t;if(e.add(t),Qt(t))fn(t.value,e);else if(_(t))for(let n=0;n<t.length;n++)fn(t[n],e);else if(I(t)||E(t))t.forEach((t=>{fn(t,e)}));else for(const n in t)fn(t[n],e);return t}const hn=[Function,Array],pn={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hn,onEnter:hn,onAfterEnter:hn,onEnterCancelled:hn,onBeforeLeave:hn,onLeave:hn,onAfterLeave:hn,onLeaveCancelled:hn,onBeforeAppear:hn,onAppear:hn,onAfterAppear:hn,onAppearCancelled:hn},setup(t,{slots:e}){const n=xr(),r=function(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ze((()=>{t.isMounted=!0})),nn((()=>{t.isUnmounting=!0})),t}();let i;return()=>{const o=e.default&&bn(e.default(),!0);if(!o||!o.length)return;const s=Yt(t),{mode:u}=s,a=o[0];if(r.isLeaving)return yn(a);const c=gn(a);if(!c)return yn(a);const l=vn(c,s,r,n);mn(c,l);const f=n.subTree,h=f&&gn(f);let p=!1;const{getTransitionKey:d}=c.type;if(d){const t=d();void 0===i?i=t:t!==i&&(i=t,p=!0)}if(h&&h.type!==Kn&&(!tr(c,h)||p)){const t=vn(h,s,r,n);if(mn(h,t),"out-in"===u)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},yn(a);"in-out"===u&&(t.delayLeave=(t,e,n)=>{dn(r,h)[String(h.key)]=h,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return a}}};function dn(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function vn(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:u,onEnter:a,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:v,onAppear:y,onAfterAppear:g,onAppearCancelled:m}=e,b=String(t.key),w=dn(n,t),_=(t,e)=>{t&&te(t,r,9,e)},E={mode:o,persisted:s,beforeEnter(e){let r=u;if(!n.isMounted){if(!i)return;r=v||u}e._leaveCb&&e._leaveCb(!0);const o=w[b];o&&tr(t,o)&&o.el._leaveCb&&o.el._leaveCb(),_(r,[e])},enter(t){let e=a,r=c,o=l;if(!n.isMounted){if(!i)return;e=y||a,r=g||c,o=m||l}let s=!1;const u=t._enterCb=e=>{s||(s=!0,_(e?o:r,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?(e(t,u),e.length<=1&&u()):u()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();_(f,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),_(n?d:p,[e]),e._leaveCb=void 0,w[i]===t&&delete w[i])};w[i]=t,h?(h(e,s),h.length<=1&&s()):s()},clone:t=>vn(t,e,n,r)};return E}function yn(t){if(wn(t))return(t=or(t)).children=null,t}function gn(t){return wn(t)?t.children?t.children[0]:void 0:t}function mn(t,e){6&t.shapeFlag&&t.component?mn(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function bn(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===Gn?(128&o.patchFlag&&r++,n=n.concat(bn(o.children,e))):(e||o.type!==Kn)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}const wn=t=>t.type.__isKeepAlive;function _n(t,e,n=Sr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(We(e,r,n),n){let t=n.parent;for(;t&&t.parent;)wn(t.parent.vnode)&&En(r,e,n,t),t=t.parent}}function En(t,e,n,r){const i=We(e,t,r,!0);rn((()=>{m(r[e],i)}),n)}const In=t=>"_"===t[0]||"$stable"===t,Tn=t=>_(t)?t.map(ar):[ar(t)],An=(t,e,n)=>Ve((t=>Tn(e(t))),n),Nn=(t,e)=>{const n=t._ctx;for(const r in t){if(In(r))continue;const i=t[r];if(T(i))e[r]=An(0,i,n);else if(null!=i){const t=Tn(i);e[r]=()=>t}}},Sn=(t,e)=>{const n=Tn(e);t.slots.default=()=>n};function xn(t,e){if(null===Ne)return t;const n=Ne.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,s,u=l]=e[i];T(t)&&(t={mounted:t,updated:t}),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:u})}return t}function On(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const u=i[s];o&&(u.oldValue=o[s].value);const a=u.dir[r];a&&te(a,n,8,[t.el,u,t,e])}}function Cn(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:p,errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let Dn=0;function kn(t,e){return function(n,r=null){null==r||S(r)||(r=null);const i=Cn(),o=new Set;let s=!1;const u=i.app={_uid:Dn++,_component:n,_props:r,_container:null,_context:i,version:jr,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&T(t.install)?(o.add(t),t.install(u,...e)):T(t)&&(o.add(t),t(u,...e))),u),mixin:t=>(i.mixins.includes(t)||(i.mixins.push(t),(t.props||t.emits)&&(i.deopt=!0)),u),component:(t,e)=>e?(i.components[t]=e,u):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,u):i.directives[t],mount(o,a){if(!s){const c=ir(n,r);return c.appContext=i,a&&e?e(c,o):t(c,o),s=!0,u._container=o,o.__vue_app__=u,c.component.proxy}},unmount(){s&&t(null,u._container)},provide:(t,e)=>(i.provides[t]=e,u)};return u}}function Pn(t){return T(t)?{setup:t,name:t.name}:t}const Ln={scheduler:ye,allowRecurse:!0},Rn=function(t,e){e&&e.pendingBranch?_(t)?e.effects.push(...t):e.effects.push(t):me(t,le,ce,fe)},Vn=(t,e,n,r)=>{if(_(t))return void t.forEach(((t,i)=>Vn(t,e&&(_(e)?e[i]:e),n,r)));let i;i=!r||r.type.__asyncLoader?null:4&r.shapeFlag?r.component.exposed||r.component.proxy:r.el;const{i:o,r:s}=t,u=e&&e.r,a=o.refs===l?o.refs={}:o.refs,c=o.setupState;if(null!=u&&u!==s&&(A(u)?(a[u]=null,w(c,u)&&(c[u]=null)):Qt(u)&&(u.value=null)),A(s)){const t=()=>{a[s]=i,w(c,s)&&(c[s]=i)};i?(t.id=-1,Rn(t,n)):t()}else if(Qt(s)){const t=()=>{s.value=i};i?(t.id=-1,Rn(t,n)):t()}else T(s)&&Zt(s,o,12,[i,a])};function jn(t){return function(t,e){const{insert:n,remove:r,patchProp:i,forcePatchProp:o,createElement:s,createText:u,createComment:a,setText:c,setElementText:p,parentNode:d,nextSibling:v,setScopeId:y=h,cloneNode:m,insertStaticContent:b}=t,_=(t,e,n,r=null,i=null,o=null,s=!1,u=!1)=>{t&&!tr(t,e)&&(r=st(t),J(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:a,ref:c,shapeFlag:l}=e;switch(a){case Hn:E(t,e,n,r);break;case Kn:I(t,e,n,r);break;case Yn:null==t&&T(e,n,r,s);break;case Gn:j(t,e,n,r,i,o,s,u);break;default:1&l?S(t,e,n,r,i,o,s,u):6&l?F(t,e,n,r,i,o,s,u):(64&l||128&l)&&a.process(t,e,n,r,i,o,s,u,at)}null!=c&&i&&Vn(c,t&&t.ref,o,e)},E=(t,e,r,i)=>{if(null==t)n(e.el=u(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&c(n,e.children)}},I=(t,e,r,i)=>{null==t?n(e.el=a(e.children||""),r,i):e.el=t.el},T=(t,e,n,r)=>{[t.el,t.anchor]=b(t.children,e,n,r)},A=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=v(t),n(t,r,i),t=o;n(e,r,i)},N=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=v(t),r(t),t=n;r(e)},S=(t,e,n,r,i,o,s,u)=>{s=s||"svg"===e.type,null==t?O(e,n,r,i,o,s,u):k(t,e,i,o,s,u)},O=(t,e,r,o,u,a,c)=>{let l,f;const{type:h,props:d,shapeFlag:v,transition:y,scopeId:g,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==m&&-1===b)l=t.el=m(t.el);else{if(l=t.el=s(t.type,a,d&&d.is),8&v?p(l,t.children):16&v&&D(t.children,l,null,o,u,a&&"foreignObject"!==h,c||!!t.dynamicChildren),w&&On(t,null,o,"created"),d){for(const e in d)P(e)||i(l,e,null,d[e],a,t.children,o,u,it);(f=d.onVnodeBeforeMount)&&Mn(f,o,t)}C(l,g,t,o)}w&&On(t,null,o,"beforeMount");const _=(!u||u&&!u.pendingBranch)&&y&&!y.persisted;_&&y.beforeEnter(l),n(l,e,r),((f=d&&d.onVnodeMounted)||_||w)&&Rn((()=>{f&&Mn(f,o,t),_&&y.enter(l),w&&On(t,null,o,"mounted")}),u)},C=(t,e,n,r)=>{if(e&&y(t,e),r){const i=r.type.__scopeId;i&&i!==e&&y(t,i+"-s"),n===r.subTree&&C(t,r.vnode.scopeId,r.vnode,r.parent)}},D=(t,e,n,r,i,o,s,u=0)=>{for(let a=u;a<t.length;a++){const u=t[a]=s?cr(t[a]):ar(t[a]);_(null,u,e,n,r,i,o,s)}},k=(t,e,n,r,s,u)=>{const a=e.el=t.el;let{patchFlag:c,dynamicChildren:f,dirs:h}=e;c|=16&t.patchFlag;const d=t.props||l,v=e.props||l;let y;if((y=v.onVnodeBeforeUpdate)&&Mn(y,n,e,t),h&&On(e,t,n,"beforeUpdate"),c>0){if(16&c)R(a,e,d,v,n,r,s);else if(2&c&&d.class!==v.class&&i(a,"class",null,v.class,s),4&c&&i(a,"style",d.style,v.style,s),8&c){const u=e.dynamicProps;for(let e=0;e<u.length;e++){const c=u[e],l=d[c],f=v[c];(f!==l||o&&o(a,c))&&i(a,c,l,f,s,t.children,n,r,it)}}1&c&&t.children!==e.children&&p(a,e.children)}else u||null!=f||R(a,e,d,v,n,r,s);const g=s&&"foreignObject"!==e.type;f?L(t.dynamicChildren,f,a,n,r,g):u||K(t,e,a,null,n,r,g),((y=v.onVnodeUpdated)||h)&&Rn((()=>{y&&Mn(y,n,e,t),h&&On(e,t,n,"updated")}),r)},L=(t,e,n,r,i,o)=>{for(let s=0;s<e.length;s++){const u=t[s],a=e[s],c=u.type===Gn||!tr(u,a)||6&u.shapeFlag||64&u.shapeFlag?d(u.el):n;_(u,a,c,null,r,i,o,!0)}},R=(t,e,n,r,s,u,a)=>{if(n!==r){for(const c in r){if(P(c))continue;const l=r[c],f=n[c];(l!==f||o&&o(t,c))&&i(t,c,f,l,a,e.children,s,u,it)}if(n!==l)for(const o in n)P(o)||o in r||i(t,o,n[o],null,a,e.children,s,u,it)}},j=(t,e,r,i,o,s,a,c)=>{const l=e.el=t?t.el:u(""),f=e.anchor=t?t.anchor:u("");let{patchFlag:h,dynamicChildren:p}=e;h>0&&(c=!0),null==t?(n(l,r,i),n(f,r,i),D(e.children,r,f,o,s,a,c)):h>0&&64&h&&p&&t.dynamicChildren?(L(t.dynamicChildren,p,r,o,s,a),(null!=e.key||o&&e===o.subTree)&&Fn(t,e,!0)):K(t,e,r,f,o,s,a,c)},F=(t,e,n,r,i,o,s,u)=>{null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):U(e,n,r,i,o,s,u):q(t,e,u)},U=(t,e,n,r,i,o,s)=>{const u=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Ar,o={uid:Nr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:He(r,i),emitsOptions:Te(r,i),emit:null,emitted:null,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Ie.bind(null,o),o}(t,r,i);if(wn(t)&&(u.ctx.renderer=at),function(t,e=!1){Cr=e;const{props:n,children:r,shapeFlag:i}=t.vnode,o=4&i;Be(t,n,o,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=e,z(e,"_",n)):Nn(e,t.slots={})}else t.slots={},e&&Sn(t,e);z(t.slots,er,1)})(t,r);const s=o?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Ir);const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=Wt(e)};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;Sr=t,nt();const i=Zt(r,t,0,[t.props,n]);if(rt(),Sr=null,x(i)){if(e)return i.then((e=>{Dr(t,e)}));t.asyncDep=i}else Dr(t,i)}else kr(t)}(t,e):void 0;Cr=!1}(u),u.asyncDep){if(i&&i.registerDep(u,G),!t.el){const t=u.subTree=ir(Kn);I(null,t,e,n)}}else G(u,t,e,n,i,o,s)},q=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:u,patchFlag:a}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&a>=0))return!(!i&&!u||u&&u.$stable)||r!==s&&(r?!s||ke(r,s,c):!!s);if(1024&a)return!0;if(16&a)return r?ke(r,s,c):!!s;if(8&a){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Ae(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void H(r,e,n);r.next=e,function(t){const e=ie.indexOf(t);e>-1&&ie.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},G=(t,e,n,r,i,o,s)=>{t.update=W((function(){if(t.isMounted){let e,{next:n,bu:r,u:u,parent:a,vnode:c}=t,l=n;n?(n.el=c.el,H(t,n,s)):n=c,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Mn(e,a,n,c);const f=xe(t),h=t.subTree;t.subTree=f,_(h,f,d(h.el),st(h),t,i,o),n.el=f.el,null===l&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,f.el),u&&Rn(u,i),(e=n.props&&n.props.onVnodeUpdated)&&Rn((()=>{Mn(e,a,n,c)}),i)}else{let s;const{el:u,props:a}=e,{bm:c,m:l,parent:f}=t;c&&B(c),(s=a&&a.onVnodeBeforeMount)&&Mn(s,f,e);const h=t.subTree=xe(t);if(u&&lt?lt(e.el,h,t,i):(_(null,h,n,r,t,i,o),e.el=h.el),l&&Rn(l,i),s=a&&a.onVnodeMounted){const t=e;Rn((()=>{Mn(s,f,t)}),i)}const{a:p}=t;p&&256&e.shapeFlag&&Rn(p,i),t.isMounted=!0,e=n=r=null}}),Ln)},H=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,u=Yt(i),[a]=t.propsOptions;if(!(r||s>0)||16&s){let r;ze(t,e,i,o);for(const o in u)e&&(w(e,o)||(r=M(o))!==o&&w(e,r))||(a?!n||void 0===n[o]&&void 0===n[r]||(i[o]=Ge(a,e||l,o,void 0,t)):delete i[o]);if(o!==u)for(const t in o)e&&w(e,t)||delete o[t]}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){const s=n[r],c=e[s];if(a)if(w(o,s))o[s]=c;else{const e=V(s);i[e]=Ge(a,u,e,c,t)}else o[s]=c}}ot(t,"set","$attrs")}(t,e.props,r,n),((t,e)=>{const{vnode:n,slots:r}=t;let i=!0,o=l;if(32&n.shapeFlag){const t=e._;t?1===t?i=!1:g(r,e):(i=!e.$stable,Nn(e,r)),o=e}else e&&(Sn(t,e),o={default:1});if(i)for(const s in r)In(s)||s in o||delete r[s]})(t,e.children),be(void 0,t.update)},K=(t,e,n,r,i,o,s,u=!1)=>{const a=t&&t.children,c=t?t.shapeFlag:0,l=e.children,{patchFlag:f,shapeFlag:h}=e;if(f>0){if(128&f)return void Q(a,l,n,r,i,o,s,u);if(256&f)return void Y(a,l,n,r,i,o,s,u)}8&h?(16&c&&it(a,i,o),l!==a&&p(n,l)):16&c?16&h?Q(a,l,n,r,i,o,s,u):it(a,i,o,!0):(8&c&&p(n,""),16&h&&D(l,n,r,i,o,s,u))},Y=(t,e,n,r,i,o,s,u)=>{e=e||f;const a=(t=t||f).length,c=e.length,l=Math.min(a,c);let h;for(h=0;h<l;h++){const r=e[h]=u?cr(e[h]):ar(e[h]);_(t[h],r,n,null,i,o,s,u)}a>c?it(t,i,o,!0,!1,l):D(e,n,r,i,o,s,u,l)},Q=(t,e,n,r,i,o,s,u)=>{let a=0;const c=e.length;let l=t.length-1,h=c-1;for(;a<=l&&a<=h;){const r=t[a],c=e[a]=u?cr(e[a]):ar(e[a]);if(!tr(r,c))break;_(r,c,n,null,i,o,s,u),a++}for(;a<=l&&a<=h;){const r=t[l],a=e[h]=u?cr(e[h]):ar(e[h]);if(!tr(r,a))break;_(r,a,n,null,i,o,s,u),l--,h--}if(a>l){if(a<=h){const t=h+1,l=t<c?e[t].el:r;for(;a<=h;)_(null,e[a]=u?cr(e[a]):ar(e[a]),n,l,i,o,s),a++}}else if(a>h)for(;a<=l;)J(t[a],i,o,!0),a++;else{const p=a,d=a,v=new Map;for(a=d;a<=h;a++){const t=e[a]=u?cr(e[a]):ar(e[a]);null!=t.key&&v.set(t.key,a)}let y,g=0;const m=h-d+1;let b=!1,w=0;const E=new Array(m);for(a=0;a<m;a++)E[a]=0;for(a=p;a<=l;a++){const r=t[a];if(g>=m){J(r,i,o,!0);continue}let c;if(null!=r.key)c=v.get(r.key);else for(y=d;y<=h;y++)if(0===E[y-d]&&tr(r,e[y])){c=y;break}void 0===c?J(r,i,o,!0):(E[c-d]=a+1,c>=w?w=c:b=!0,_(r,e[c],n,null,i,o,s,u),g++)}const I=b?function(t){const e=t.slice(),n=[0];let r,i,o,s,u;const a=t.length;for(r=0;r<a;r++){const a=t[r];if(0!==a){if(i=n[n.length-1],t[i]<a){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)u=(o+s)/2|0,t[n[u]]<a?o=u+1:s=u;a<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(E):f;for(y=I.length-1,a=m-1;a>=0;a--){const t=d+a,u=e[t],l=t+1<c?e[t+1].el:r;0===E[a]?_(null,u,n,l,i,o,s):b&&(y<0||a!==I[y]?X(u,n,l,2):y--)}}},X=(t,e,r,i,o=null)=>{const{el:s,type:u,transition:a,children:c,shapeFlag:l}=t;if(6&l)return void X(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void u.move(t,e,r,at);if(u===Gn){n(s,e,r);for(let t=0;t<c.length;t++)X(c[t],e,r,i);return void n(t.anchor,e,r)}if(u===Yn)return void A(t,e,r);if(2!==i&&1&l&&a)if(0===i)a.beforeEnter(s),n(s,e,r),Rn((()=>a.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=a,u=()=>n(s,e,r),c=()=>{t(s,(()=>{u(),o&&o()}))};i?i(s,u,c):c()}else n(s,e,r)},J=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:u,children:a,dynamicChildren:c,shapeFlag:l,patchFlag:f,dirs:h}=t;if(null!=u&&Vn(u,null,n,null),256&l)return void e.ctx.deactivate(t);const p=1&l&&h;let d;if((d=s&&s.onVnodeBeforeUnmount)&&Mn(d,e,t),6&l)et(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&On(t,null,e,"beforeUnmount"),c&&(o!==Gn||f>0&&64&f)?it(c,e,n,!1,!0):(o===Gn&&(128&f||256&f)||!i&&16&l)&&it(a,e,n),64&l&&(r||!Un(t.props))&&t.type.remove(t,at),r&&Z(t)}((d=s&&s.onVnodeUnmounted)||p)&&Rn((()=>{d&&Mn(d,e,t),p&&On(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===Gn)return void tt(n,i);if(e===Yn)return void N(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},tt=(t,e)=>{let n;for(;t!==e;)n=v(t),r(t),t=n;r(e)},et=(t,e,n)=>{const{bum:r,effects:i,update:o,subTree:s,um:u}=t;if(r&&B(r),i)for(let a=0;a<i.length;a++)$(i[a]);o&&($(o),J(s,t,e,n)),u&&Rn(u,e),Rn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},it=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)J(t[s],e,n,r,i)},st=t=>6&t.shapeFlag?st(t.component.subTree):128&t.shapeFlag?t.suspense.next():v(t.anchor||t.el),ut=(t,e)=>{null==t?e._vnode&&J(e._vnode,null,null,!0):_(e._vnode||null,t,e),we(),e._vnode=t},at={p:_,um:J,m:X,r:Z,mt:U,mc:D,pc:K,pbc:L,n:st,o:t};let ct,lt;e&&([ct,lt]=e(at));return{render:ut,hydrate:ct,createApp:kn(ut,ct)}}(t)}function Mn(t,e,n,r=null){te(t,e,7,[n,r])}function Fn(t,e,n=!1){const r=t.children,i=e.children;if(_(r)&&_(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=cr(i[o]),e.el=t.el),n||Fn(t,e))}}const Un=t=>t&&(t.disabled||""===t.disabled);function qn(t){return function(t,e,n=!0){const r=Ne||Sr;if(r){const n=r.type;if("components"===t){if("_self"===e)return n;const t=Lr(n);if(t&&(t===e||t===V(e)||t===F(V(e))))return n}return zn(r[t]||n[t],e)||zn(r.appContext[t],e)}}("components",t)||t}const Bn=Symbol();function zn(t,e){return t&&(t[e]||t[V(e)]||t[F(V(e))])}const Gn=Symbol(void 0),Hn=Symbol(void 0),Kn=Symbol(void 0),Yn=Symbol(void 0),Qn=[];let Xn=null;function Wn(t=!1){Qn.push(Xn=t?null:[])}function $n(){Qn.pop(),Xn=Qn[Qn.length-1]||null}function Jn(t,e,n,r,i){const o=ir(t,e,n,r,i,!0);return o.dynamicChildren=Xn||f,$n(),Xn&&Xn.push(o),o}function Zn(t){return!!t&&!0===t.__v_isVNode}function tr(t,e){return t.type===e.type&&t.key===e.key}const er="__vInternal",nr=({key:t})=>null!=t?t:null,rr=({ref:t})=>null!=t?A(t)||Qt(t)||T(t)?{i:Ne,r:t}:t:null,ir=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==Bn||(t=Kn);if(Zn(t)){const r=or(t,e,!0);return n&&lr(r,n),r}a=t,T(a)&&"__vccOpts"in a&&(t=t.__vccOpts);var a;if(e){(Kt(e)||er in e)&&(e=g({},e));let{class:t,style:n}=e;t&&!A(t)&&(e.class=u(t)),S(n)&&(Kt(n)&&!_(n)&&(n=g({},n)),e.style=r(n))}const c=A(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:S(t)?4:T(t)?2:0,l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&nr(e),ref:e&&rr(e),scopeId:je,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};if(lr(l,n),128&c){const{content:t,fallback:e}=function(t){const{shapeFlag:e,children:n}=t;let r,i;return 32&e?(r=Pe(n.default),i=Pe(n.fallback)):(r=Pe(n),i=ar(null)),{content:r,fallback:i}}(l);l.ssContent=t,l.ssFallback=e}!s&&Xn&&(i>0||6&c)&&32!==i&&Xn.push(l);return l};function or(t,e,n=!1){const{props:i,ref:o,patchFlag:s}=t,a=e?function(...t){const e=g({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=u([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(v(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,i[t]):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&nr(a),ref:e&&e.ref?n&&o?_(o)?o.concat(rr(e)):[o,rr(e)]:rr(e):o,scopeId:t.scopeId,children:t.children,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Gn?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&or(t.ssContent),ssFallback:t.ssFallback&&or(t.ssFallback),el:t.el,anchor:t.anchor}}function sr(t=" ",e=0){return ir(Hn,null,t,e)}function ur(t="",e=!1){return e?(Wn(),Jn(Kn,null,t)):ir(Kn,null,t)}function ar(t){return null==t||"boolean"==typeof t?ir(Kn):_(t)?ir(Gn,null,t):"object"==typeof t?null===t.el?t:or(t):ir(Hn,null,String(t))}function cr(t){return null===t.el?t:or(t)}function lr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(_(e))n=16;else if("object"==typeof e){if(1&r||64&r){const n=e.default;return void(n&&(n._c&&Re(1),lr(t,n()),n._c&&Re(-1)))}{n=32;const r=e._;r||er in e?3===r&&Ne&&(1024&Ne.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=Ne}}else T(e)?(e={default:e,_ctx:Ne},n=32):(e=String(e),64&r?(n=16,e=[sr(e)]):n=8);t.children=e,t.shapeFlag|=n}function fr(t,e,n=!1){const r=Sr||Ne;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&T(e)?e():e}}let hr=!1;function pr(t,e,n=[],r=[],i=[],o=!1){const{mixins:s,extends:u,data:a,computed:c,methods:f,watch:p,provide:d,inject:v,components:y,directives:m,beforeMount:b,mounted:w,beforeUpdate:E,updated:I,activated:A,deactivated:N,beforeDestroy:x,beforeUnmount:O,destroyed:C,unmounted:D,render:k,renderTracked:P,renderTriggered:L,errorCaptured:R,expose:V}=e,j=t.proxy,M=t.ctx,F=t.appContext.mixins;if(o&&k&&t.render===h&&(t.render=k),o||(hr=!0,dr("beforeCreate","bc",e,t,F),hr=!1,gr(t,F,n,r,i)),u&&pr(t,u,n,r,i,!0),s&&gr(t,s,n,r,i),v)if(_(v))for(let l=0;l<v.length;l++){const t=v[l];M[t]=fr(t)}else for(const l in v){const t=v[l];S(t)?M[l]=fr(t.from||l,t.default,!0):M[l]=fr(t)}if(f)for(const l in f){const t=f[l];T(t)&&(M[l]=t.bind(j))}if(o?a&&n.push(a):(n.length&&n.forEach((e=>mr(t,e,j))),a&&mr(t,a,j)),c)for(const l in c){const t=c[l],e=Rr({get:T(t)?t.bind(j,j):T(t.get)?t.get.bind(j,j):h,set:!T(t)&&T(t.set)?t.set.bind(j):h});Object.defineProperty(M,l,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}var U;if(p&&r.push(p),!o&&r.length&&r.forEach((t=>{for(const e in t)br(t[e],M,j,e)})),d&&i.push(d),!o&&i.length&&i.forEach((t=>{const e=T(t)?t.call(j):t;Reflect.ownKeys(e).forEach((t=>{!function(t,e){if(Sr){let n=Sr.provides;const r=Sr.parent&&Sr.parent.provides;r===n&&(n=Sr.provides=Object.create(r)),n[t]=e}}(t,e[t])}))})),o&&(y&&g(t.components||(t.components=g({},t.type.components)),y),m&&g(t.directives||(t.directives=g({},t.type.directives)),m)),o||dr("created","c",e,t,F),b&&Je(b.bind(j)),w&&Ze(w.bind(j)),E&&tn(E.bind(j)),I&&en(I.bind(j)),A&&_n(A.bind(j),"a",U),N&&function(t,e){_n(t,"da",e)}(N.bind(j)),R&&((t,e=Sr)=>{We("ec",t,e)})(R.bind(j)),P&&sn(P.bind(j)),L&&on(L.bind(j)),O&&nn(O.bind(j)),D&&rn(D.bind(j)),_(V)&&!o)if(V.length){const e=t.exposed||(t.exposed=Wt({}));V.forEach((t=>{e[t]=function(t,e){return Qt(t[e])?t[e]:new $t(t,e)}(j,t)}))}else t.exposed||(t.exposed=l)}function dr(t,e,n,r,i){yr(t,e,i,r);const{extends:o,mixins:s}=n;o&&vr(t,e,o,r),s&&yr(t,e,s,r);const u=n[t];u&&te(u.bind(r.proxy),r,e)}function vr(t,e,n,r){n.extends&&vr(t,e,n.extends,r);const i=n[t];i&&te(i.bind(r.proxy),r,e)}function yr(t,e,n,r){for(let i=0;i<n.length;i++){const o=n[i].mixins;o&&yr(t,e,o,r);const s=n[i][t];s&&te(s.bind(r.proxy),r,e)}}function gr(t,e,n,r,i){for(let o=0;o<e.length;o++)pr(t,e[o],n,r,i,!0)}function mr(t,e,n){const r=e.call(n,n);S(r)&&(t.data===l?t.data=qt(r):g(t.data,r))}function br(t,e,n,r){const i=r.includes(".")?function(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}(n,r):()=>n[r];if(A(t)){const n=e[t];T(n)&&an(i,n)}else if(T(t))an(i,t.bind(n));else if(S(t))if(_(t))t.forEach((t=>br(t,e,n,r)));else{const r=T(t.handler)?t.handler.bind(n):e[t.handler];T(r)&&an(i,r,t)}}function wr(t,e,n){const r=n.appContext.config.optionMergeStrategies,{mixins:i,extends:o}=e;o&&wr(t,o,n),i&&i.forEach((e=>wr(t,e,n)));for(const s in e)r&&w(r,s)?t[s]=r[s](t[s],e[s],n.proxy,s):t[s]=e[s]}const _r=t=>t&&(t.proxy?t.proxy:_r(t.parent)),Er=g(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_r(t.parent),$root:t=>t.root&&t.root.proxy,$emit:t=>t.emit,$options:t=>function(t){const e=t.type,{__merged:n,mixins:r,extends:i}=e;if(n)return n;const o=t.appContext.mixins;if(!o.length&&!r&&!i)return e;const s={};return o.forEach((e=>wr(s,e,t))),wr(s,e,t),e.__merged=s}(t),$forceUpdate:t=>()=>ye(t.update),$nextTick:t=>ve.bind(t.proxy),$watch:t=>ln.bind(t)}),Ir={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:u,appContext:a}=t;if("__v_skip"===e)return!0;let c;if("$"!==e[0]){const u=s[e];if(void 0!==u)switch(u){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==l&&w(r,e))return s[e]=0,r[e];if(i!==l&&w(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&w(c,e))return s[e]=2,o[e];if(n!==l&&w(n,e))return s[e]=3,n[e];hr||(s[e]=4)}}const f=Er[e];let h,p;return f?("$attrs"===e&&it(t,0,e),f(t)):(h=u.__cssModules)&&(h=h[e])?h:n!==l&&w(n,e)?(s[e]=3,n[e]):(p=a.config.globalProperties,w(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==l&&w(i,e))i[e]=n;else if(r!==l&&w(r,e))r[e]=n;else if(e in t.props)return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let u;return void 0!==n[s]||t!==l&&w(t,s)||e!==l&&w(e,s)||(u=o[0])&&w(u,s)||w(r,s)||w(Er,s)||w(i.config.globalProperties,s)}},Tr=g({},Ir,{get(t,e){if(e!==Symbol.unscopables)return Ir.get(t,e,t)},has:(t,n)=>"_"!==n[0]&&!e(n)}),Ar=Cn();let Nr=0;let Sr=null;const xr=()=>Sr||Ne,Or=t=>{Sr=t};let Cr=!1;function Dr(t,e,n){T(e)?t.render=e:S(e)&&(t.setupState=Wt(e)),kr(t)}function kr(t,e){const n=t.type;t.render||(t.render=n.render||h,t.render._rc&&(t.withProxy=new Proxy(t.ctx,Tr))),Sr=t,nt(),pr(t,n),rt(),Sr=null}function Pr(t,e=Sr){e&&(e.effects||(e.effects=[])).push(t)}function Lr(t){return T(t)&&t.displayName||t.name}function Rr(t){const e=function(t){let e,n;return T(t)?(e=t,n=h):(e=t.get,n=t.set),new Jt(e,n,T(t)||!t.set)}(t);return Pr(e.effect),e}function Vr(t,e){let n;if(_(t)||A(t)){n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=e(t[r],r)}else if("number"==typeof t){n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r+1,r)}else if(S(t))if(t[Symbol.iterator])n=Array.from(t,e);else{const r=Object.keys(t);n=new Array(r.length);for(let i=0,o=r.length;i<o;i++){const o=r[i];n[i]=e(t[o],o,i)}}else n=[];return n}const jr="3.0.5",Mr="http://www.w3.org/2000/svg",Fr="undefined"!=typeof document?document:null;let Ur,qr;const Br={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n)=>e?Fr.createElementNS(Mr,t):Fr.createElement(t,n?{is:n}:void 0),createText:t=>Fr.createTextNode(t),createComment:t=>Fr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Fr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode:t=>t.cloneNode(!0),insertStaticContent(t,e,n,r){const i=r?qr||(qr=Fr.createElementNS(Mr,"svg")):Ur||(Ur=Fr.createElement("div"));i.innerHTML=t;const o=i.firstChild;let s=o,u=s;for(;s;)u=s,Br.insert(s,e,n),s=i.firstChild;return[o,u]}};const zr=/\s*!important$/;function Gr(t,e,n){if(_(n))n.forEach((n=>Gr(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Kr[e];if(n)return n;let r=V(e);if("filter"!==r&&r in t)return Kr[e]=r;r=F(r);for(let i=0;i<Hr.length;i++){const n=Hr[i]+r;if(n in t)return Kr[e]=n}return e}(t,e);zr.test(n)?t.setProperty(M(r),n.replace(zr,""),"important"):t[r]=n}}const Hr=["Webkit","Moz","ms"],Kr={};const Yr="http://www.w3.org/1999/xlink";let Qr=Date.now;"undefined"!=typeof document&&Qr()>document.createEvent("Event").timeStamp&&(Qr=()=>performance.now());let Xr=0;const Wr=Promise.resolve(),$r=()=>{Xr=0};function Jr(t,e,n,r){t.addEventListener(e,n,r)}function Zr(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,u]=function(t){let e;if(ti.test(t)){let n;for(e={};n=t.match(ti);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t.slice(2).toLowerCase(),e]}(e);if(r){Jr(t,n,o[e]=function(t,e){const n=t=>{(t.timeStamp||Qr())>=n.attached-1&&te(function(t,e){if(_(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>Xr||(Wr.then($r),Xr=Qr()))(),n}(r,i),u)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,u),o[e]=void 0)}}const ti=/(?:Once|Passive|Capture)$/;const ei=/^on[a-z]/;const ni="transition",ri=(t,{slots:e})=>function(t,e,n){const r=arguments.length;return 2===r?S(e)&&!_(e)?Zn(e)?ir(t,null,[e]):ir(t,e):ir(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&Zn(n)&&(n=[n]),ir(t,e,n))}(pn,function(t){let{name:e="v",type:n,css:r=!0,duration:i,enterFromClass:o=`${e}-enter-from`,enterActiveClass:s=`${e}-enter-active`,enterToClass:u=`${e}-enter-to`,appearFromClass:a=o,appearActiveClass:c=s,appearToClass:l=u,leaveFromClass:f=`${e}-leave-from`,leaveActiveClass:h=`${e}-leave-active`,leaveToClass:p=`${e}-leave-to`}=t;const d={};for(const g in t)g in ii||(d[g]=t[g]);if(!r)return d;const v=function(t){if(null==t)return null;if(S(t))return[oi(t.enter),oi(t.leave)];{const e=oi(t);return[e,e]}}(i),y=v&&v[0],m=v&&v[1],{onBeforeEnter:b,onEnter:w,onEnterCancelled:_,onLeave:E,onLeaveCancelled:I,onBeforeAppear:T=b,onAppear:A=w,onAppearCancelled:N=_}=d,x=(t,e,n)=>{ui(t,e?l:u),ui(t,e?c:s),n&&n()},O=(t,e)=>{ui(t,p),ui(t,h),e&&e()},C=t=>(e,r)=>{const i=t?A:w,s=()=>x(e,t,r);i&&i(e,s),ai((()=>{ui(e,t?a:o),si(e,t?l:u),i&&i.length>1||li(e,n,y,s)}))};return g(d,{onBeforeEnter(t){b&&b(t),si(t,o),si(t,s)},onBeforeAppear(t){T&&T(t),si(t,a),si(t,c)},onEnter:C(!1),onAppear:C(!0),onLeave(t,e){const r=()=>O(t,e);si(t,f),document.body.offsetHeight,si(t,h),ai((()=>{ui(t,f),si(t,p),E&&E.length>1||li(t,n,m,r)})),E&&E(t,r)},onEnterCancelled(t){x(t,!1),_&&_(t)},onAppearCancelled(t){x(t,!0),N&&N(t)},onLeaveCancelled(t){O(t),I&&I(t)}})}(t),e);ri.displayName="Transition";const ii={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};function oi(t){return G(t)}function si(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function ui(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function ai(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}ri.props=g({},pn.props,ii);let ci=0;function li(t,e,n,r){const i=t._endId=++ci,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:u,propCount:a}=function(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r("transitionDelay"),o=r("transitionDuration"),s=fi(i,o),u=r("animationDelay"),a=r("animationDuration"),c=fi(u,a);let l=null,f=0,h=0;e===ni?s>0&&(l=ni,f=s,h=o.length):"animation"===e?c>0&&(l="animation",f=c,h=a.length):(f=Math.max(s,c),l=f>0?s>c?ni:"animation":null,h=l?l===ni?o.length:a.length:0);const p=l===ni&&/\b(transform|all)(,|$)/.test(n.transitionProperty);return{type:l,timeout:f,propCount:h,hasTransform:p}}(t,e);if(!s)return r();const c=s+"end";let l=0;const f=()=>{t.removeEventListener(c,h),o()},h=e=>{e.target===t&&++l>=a&&f()};setTimeout((()=>{l<a&&f()}),u+1),t.addEventListener(c,h)}function fi(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>hi(e)+hi(t[n]))))}function hi(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}const pi=t=>{const e=t.props["onUpdate:modelValue"];return _(e)?t=>B(e,t):e};function di(t){t.target.composing=!0}function vi(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const yi={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=pi(i);const o=r||"number"===t.type;Jr(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n?r=r.trim():o&&(r=G(r)),t._assign(r)})),n&&Jr(t,"change",(()=>{t.value=t.value.trim()})),e||(Jr(t,"compositionstart",di),Jr(t,"compositionend",vi),Jr(t,"change",vi))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{trim:n,number:r}},i){if(t._assign=pi(i),t.composing)return;if(document.activeElement===t){if(n&&t.value.trim()===e)return;if((r||"number"===t.type)&&G(t.value)===e)return}const o=null==e?"":e;t.value!==o&&(t.value=o)}},gi=["ctrl","shift","alt","meta"],mi={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>gi.some((n=>t[`${n}Key`]&&!e.includes(n)))},bi=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=mi[e[t]];if(r&&r(n,e))return}return t(n,...r)},wi=g({patchProp:(t,e,r,i,o=!1,s,u,a,c)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,i,o);break;case"style":!function(t,e,n){const r=t.style;if(n)if(A(n))e!==n&&(r.cssText=n);else{for(const t in n)Gr(r,t,n[t]);if(e&&!A(e))for(const t in e)null==n[t]&&Gr(r,t,"")}else t.removeAttribute("style")}(t,r,i);break;default:v(e)?y(e)||Zr(t,e,0,i,u):function(t,e,n,r){if(r)return"innerHTML"===e||!!(e in t&&ei.test(e)&&T(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e&&"string"==typeof n)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if(ei.test(e)&&A(n))return!1;return e in t}(t,e,i,o)?function(t,e,n,r,i,o,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,i,o),void(t[e]=null==n?"":n);if("value"!==e||"PROGRESS"===t.tagName){if(""===n||null==n){const r=typeof t[e];if(""===n&&"boolean"===r)return void(t[e]=!0);if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch($b){}}else{t._value=n;const e=null==n?"":n;t.value!==e&&(t.value=e)}}(t,e,i,s,u,a,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),function(t,e,r,i){if(i&&e.startsWith("xlink:"))null==r?t.removeAttributeNS(Yr,e.slice(6,e.length)):t.setAttributeNS(Yr,e,r);else{const i=n(e);null==r||i&&!1===r?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}(t,e,i,o))}},forcePatchProp:(t,e)=>"value"===e},Br);let _i;const Ei=(...t)=>{const e=(_i||(_i=jn(wi))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(A(t)){return document.querySelector(t)}return t}
/*!
 * vuex v4.0.0
 * (c) 2021 Evan You
 * @license MIT
 */(t);if(!r)return;const i=e._component;T(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var Ii=("undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function Ti(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function Ai(t){return null!==t&&"object"==typeof t}var Ni=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},Si={namespaced:{configurable:!0}};Si.namespaced.get=function(){return!!this._rawModule.namespaced},Ni.prototype.addChild=function(t,e){this._children[t]=e},Ni.prototype.removeChild=function(t){delete this._children[t]},Ni.prototype.getChild=function(t){return this._children[t]},Ni.prototype.hasChild=function(t){return t in this._children},Ni.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},Ni.prototype.forEachChild=function(t){Ti(this._children,t)},Ni.prototype.forEachGetter=function(t){this._rawModule.getters&&Ti(this._rawModule.getters,t)},Ni.prototype.forEachAction=function(t){this._rawModule.actions&&Ti(this._rawModule.actions,t)},Ni.prototype.forEachMutation=function(t){this._rawModule.mutations&&Ti(this._rawModule.mutations,t)},Object.defineProperties(Ni.prototype,Si);var xi=function(t){this.register([],t,!1)};function Oi(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;Oi(t.concat(r),e.getChild(r),n.modules[r])}}function Ci(t){return new Di(t)}xi.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},xi.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")}),"")},xi.prototype.update=function(t){Oi([],this.root,t)},xi.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=new Ni(e,n);0===t.length?this.root=i:this.get(t.slice(0,-1)).addChild(t[t.length-1],i);e.modules&&Ti(e.modules,(function(e,i){r.register(t.concat(i),e,n)}))},xi.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r&&r.runtime&&e.removeChild(n)},xi.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};var Di=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var r=t.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new xi(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null);var i=this,o=this.dispatch,s=this.commit;this.dispatch=function(t,e){return o.call(i,t,e)},this.commit=function(t,e,n){return s.call(i,t,e,n)},this.strict=r;var u=this._modules.root.state;Vi(this,u,[],this._modules.root),Ri(this,u),n.forEach((function(t){return t(e)})),(void 0===t.devtools||t.devtools)&&function(t){Ii&&(t._devtoolHook=Ii,Ii.emit("vuex:init",t),Ii.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){Ii.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){Ii.emit("vuex:action",t,e)}),{prepend:!0}))}(this)},ki={state:{configurable:!0}};function Pi(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function Li(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Vi(t,n,[],t._modules.root,!0),Ri(t,n,e)}function Ri(t,e,n){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={};Ti(i,(function(e,n){o[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return o[n]()},enumerable:!0})})),t._state=qt({data:e}),t.strict&&function(t){an((function(){return t._state.data}),(function(){}),{deep:!0,flush:"sync"})}(t),r&&n&&t._withCommit((function(){r.data=null}))}function Vi(t,e,n,r,i){var o=!n.length,s=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=r),!o&&!i){var u=ji(e,n.slice(0,-1)),a=n[n.length-1];t._withCommit((function(){u[a]=r.state}))}var c=r.context=function(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var o=Mi(n,r,i),s=o.payload,u=o.options,a=o.type;return u&&u.root||(a=e+a),t.dispatch(a,s)},commit:r?t.commit:function(n,r,i){var o=Mi(n,r,i),s=o.payload,u=o.options,a=o.type;u&&u.root||(a=e+a),t.commit(a,s,u)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,r)===e){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return ji(t.state,n)}}}),i}(t,s,n);r.forEachMutation((function(e,n){!function(t,e,n,r){(t._mutations[e]||(t._mutations[e]=[])).push((function(e){n.call(t,r.state,e)}))}(t,s+n,e,c)})),r.forEachAction((function(e,n){var r=e.root?n:s+n,i=e.handler||e;!function(t,e,n,r){(t._actions[e]||(t._actions[e]=[])).push((function(e){var i,o=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return(i=o)&&"function"==typeof i.then||(o=Promise.resolve(o)),t._devtoolHook?o.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):o}))}(t,r,i,c)})),r.forEachGetter((function(e,n){!function(t,e,n,r){if(t._wrappedGetters[e])return;t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)}}(t,s+n,e,c)})),r.forEachChild((function(r,o){Vi(t,e,n.concat(o),r,i)}))}function ji(t,e){return e.reduce((function(t,e){return t[e]}),t)}function Mi(t,e,n){return Ai(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}Di.prototype.install=function(t,e){t.provide(e||"store",this),t.config.globalProperties.$store=this},ki.state.get=function(){return this._state.data},ki.state.set=function(t){},Di.prototype.commit=function(t,e,n){var r=this,i=Mi(t,e,n),o=i.type,s=i.payload,u={type:o,payload:s},a=this._mutations[o];a&&(this._withCommit((function(){a.forEach((function(t){t(s)}))})),this._subscribers.slice().forEach((function(t){return t(u,r.state)})))},Di.prototype.dispatch=function(t,e){var n=this,r=Mi(t,e),i=r.type,o=r.payload,s={type:i,payload:o},u=this._actions[i];if(u){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(s,n.state)}))}catch($b){}var a=u.length>1?Promise.all(u.map((function(t){return t(o)}))):u[0](o);return new Promise((function(t,e){a.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,n.state)}))}catch($b){}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch($b){}e(t)}))}))}},Di.prototype.subscribe=function(t,e){return Pi(t,this._subscribers,e)},Di.prototype.subscribeAction=function(t,e){return Pi("function"==typeof t?{before:t}:t,this._actionSubscribers,e)},Di.prototype.watch=function(t,e,n){var r=this;return an((function(){return t(r.state,r.getters)}),e,Object.assign({},n))},Di.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},Di.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),Vi(this,this.state,t,this._modules.get(t),n.preserveState),Ri(this,this.state)},Di.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){delete ji(e.state,t.slice(0,-1))[t[t.length-1]]})),Li(this)},Di.prototype.hasModule=function(t){return"string"==typeof t&&(t=[t]),this._modules.isRegistered(t)},Di.prototype.hotUpdate=function(t){this._modules.update(t),Li(this,!0)},Di.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(Di.prototype,ki);var Fi=Bi((function(t,e){var n={};return qi(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=zi(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"==typeof i?i.call(this,e,n):e[i]},n[r].vuex=!0})),n})),Ui=Bi((function(t,e){var n={};return qi(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var o=zi(this.$store,"mapActions",t);if(!o)return;r=o.context.dispatch}return"function"==typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n}));function qi(t){return function(t){return Array.isArray(t)||Ai(t)}(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function Bi(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function zi(t,e,n){return t._modulesNamespaceMap[n]}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gi=function(t,e){return(Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Hi(t,e){function n(){this.constructor=t}Gi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ki=function(){return(Ki=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Yi(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch($b){o($b)}}function u(t){try{a(r.throw(t))}catch($b){o($b)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function Qi(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch($b){o=[6,$b],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function Xi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wi(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function $i(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Wi(arguments[e]));return t}function Ji(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Zi(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var to=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function no(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($b){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ro=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,io.prototype.create),o}return Hi(e,t),e}(Error),io=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?oo(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new ro(i,u,r);return a},t}();function oo(t,e){return t.replace(so,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var so=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ao(t,e){var n=new co(t,e);return n.subscribe.bind(n)}var co=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=lo),void 0===r.error&&(r.error=lo),void 0===r.complete&&(r.complete=lo);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch($b){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch($b){"undefined"!=typeof console&&console.error&&console.error($b)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function lo(){}var fo=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),ho=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new to;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch($b){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Ki({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch($b){if(r)return null;throw $b}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch($b){}try{for(var r=Xi(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Wi(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch($b){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Yi(this,void 0,void 0,(function(){var t;return Qi(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all($i(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var po,vo=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ho(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function yo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var go,mo,bo=[];(mo=go||(go={}))[mo.DEBUG=0]="DEBUG",mo[mo.VERBOSE=1]="VERBOSE",mo[mo.INFO=2]="INFO",mo[mo.WARN=3]="WARN",mo[mo.ERROR=4]="ERROR",mo[mo.SILENT=5]="SILENT";var wo,_o={debug:go.DEBUG,verbose:go.VERBOSE,info:go.INFO,warn:go.WARN,error:go.ERROR,silent:go.SILENT},Eo=go.INFO,Io=((po={})[go.DEBUG]="log",po[go.VERBOSE]="log",po[go.INFO]="info",po[go.WARN]="warn",po[go.ERROR]="error",po),To=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Io[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,yo(["["+i+"]  "+t.name+":"],n))}},Ao=function(){function t(t){this.name=t,this._logLevel=Eo,this._logHandler=To,this._userLogHandler=null,bo.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in go))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?_o[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,yo([this,go.DEBUG],t)),this._logHandler.apply(this,yo([this,go.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,yo([this,go.VERBOSE],t)),this._logHandler.apply(this,yo([this,go.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,yo([this,go.INFO],t)),this._logHandler.apply(this,yo([this,go.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,yo([this,go.WARN],t)),this._logHandler.apply(this,yo([this,go.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,yo([this,go.ERROR],t)),this._logHandler.apply(this,yo([this,go.ERROR],t))},t}();function No(t){bo.forEach((function(e){e.setLogLevel(t)}))}var So,xo=((wo={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",wo["bad-app-name"]="Illegal App name: '{$appName}",wo["duplicate-app"]="Firebase App named '{$appName}' already exists",wo["app-deleted"]="Firebase App named '{$appName}' already deleted",wo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",wo["invalid-log-argument"]="First argument to `onLog` must be null or a function.",wo),Oo=new io("app","Firebase",xo),Co=((So={})["@firebase/app"]="fire-core",So["@firebase/analytics"]="fire-analytics",So["@firebase/auth"]="fire-auth",So["@firebase/database"]="fire-rtdb",So["@firebase/functions"]="fire-fn",So["@firebase/installations"]="fire-iid",So["@firebase/messaging"]="fire-fcm",So["@firebase/performance"]="fire-perf",So["@firebase/remote-config"]="fire-rc",So["@firebase/storage"]="fire-gcs",So["@firebase/firestore"]="fire-fst",So["fire-js"]="fire-js",So["firebase-wrapper"]="fire-js-all",So),Do=new Ao("@firebase/app"),ko=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Zi(void 0,t),this.container=new vo(e.name),this._addComponent(new fo("app",(function(){return o}),"PUBLIC"));try{for(var s=Xi(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(c){r={error:c}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch($b){Do.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,$b)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Oo.create("app-deleted",{appName:this.name_})},t}();ko.prototype.name&&ko.prototype.options||ko.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Po(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw Oo.create("bad-app-name",{appName:String(s)});if(uo(e,s))throw Oo.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Co[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Do.warn(a.join(" "))}o(new fo(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:No,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Oo.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=_o[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:go[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=bo;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.2.5",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!uo(e,t=t||"[DEFAULT]"))throw Oo.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return Do.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw Oo.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Zi(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var l=Xi(Object.keys(e)),f=l.next();!f.done;f=l.next()){var h=f.value;e[h]._addComponent(o)}}catch(p){s={error:p}}finally{try{f&&!f.done&&(u=l.return)&&u.call(l)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lo=function t(){var e=Po(ko);return e.INTERNAL=Ki(Ki({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Zi(e,t)},createSubscribe:ao,ErrorFactory:io,deepExtend:Zi}),e}(),Ro=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Do.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Vo=self.firebase.SDK_VERSION;Vo&&Vo.indexOf("LITE")>=0&&Do.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var jo=Lo.initializeApp;Lo.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return no()&&Do.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),jo.apply(void 0,t)};var Mo,Fo,Uo=Lo;(Mo=Uo).INTERNAL.registerComponent(new fo("platform-logger",(function(t){return new Ro(t)}),"PRIVATE")),Mo.registerVersion("@firebase/app","0.6.14",Fo),Mo.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Uo.registerVersion("firebase","8.2.6","app");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var qo=function(t,e){return(qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Bo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var zo,Go="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ho=Ho||{},Ko=Go||self;function Yo(){}function Qo(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Xo(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Wo="closure_uid_"+(1e9*Math.random()>>>0),$o=0;function Jo(t,e,n){return t.call.apply(t.bind,arguments)}function Zo(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ts(t,e,n){return(ts=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jo:Zo).apply(null,arguments)}function es(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ns(){return Date.now()}function rs(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function is(){this.j=this.j,this.i=this.i}is.prototype.j=!1,is.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Wo)&&t[Wo]||(t[Wo]=++$o))},is.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var os=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ss=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function us(t){return Array.prototype.concat.apply([],arguments)}function as(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function cs(t){return/^[\s\xa0]*$/.test(t)}var ls,fs=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function hs(t,e){return-1!=t.indexOf(e)}function ps(t,e){return t<e?-1:t>e?1:0}t:{var ds=Ko.navigator;if(ds){var vs=ds.userAgent;if(vs){ls=vs;break t}}ls=""}function ys(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function gs(t){var e={};for(var n in t)e[n]=t[n];return e}var ms="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bs(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ms.length;o++)n=ms[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ws(t){return ws[" "](t),t}ws[" "]=Yo;var _s,Es,Is=hs(ls,"Opera"),Ts=hs(ls,"Trident")||hs(ls,"MSIE"),As=hs(ls,"Edge"),Ns=As||Ts,Ss=hs(ls,"Gecko")&&!(hs(ls.toLowerCase(),"webkit")&&!hs(ls,"Edge"))&&!(hs(ls,"Trident")||hs(ls,"MSIE"))&&!hs(ls,"Edge"),xs=hs(ls.toLowerCase(),"webkit")&&!hs(ls,"Edge");function Os(){var t=Ko.document;return t?t.documentMode:void 0}t:{var Cs="",Ds=(Es=ls,Ss?/rv:([^\);]+)(\)|;)/.exec(Es):As?/Edge\/([\d\.]+)/.exec(Es):Ts?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Es):xs?/WebKit\/(\S+)/.exec(Es):Is?/(?:Version)[ \/]?(\S+)/.exec(Es):void 0);if(Ds&&(Cs=Ds?Ds[1]:""),Ts){var ks=Os();if(null!=ks&&ks>parseFloat(Cs)){_s=String(ks);break t}}_s=Cs}var Ps,Ls={};function Rs(t){return function(t,e){var n=Ls;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=fs(String(_s)).split("."),r=fs(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=ps(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||ps(0==s[2].length,0==u[2].length)||ps(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(Ko.document&&Ts){var Vs=Os();Ps=Vs||(parseInt(_s,10)||void 0)}else Ps=void 0;var js=Ps,Ms=!Ts||9<=Number(js),Fs=Ts&&!Rs("9"),Us=function(){if(!Ko.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ko.addEventListener("test",Yo,e),Ko.removeEventListener("test",Yo,e)}catch(n){}return t}();function qs(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Bs(t,e){if(qs.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ss){t:{try{ws(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:zs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}qs.prototype.b=function(){this.defaultPrevented=!0},rs(Bs,qs);var zs={2:"touch",3:"pen",4:"mouse"};Bs.prototype.b=function(){Bs.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Fs)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Gs="closure_listenable_"+(1e6*Math.random()|0),Hs=0;function Ks(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Hs,this.Y=this.Z=!1}function Ys(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Qs(t){this.src=t,this.a={},this.b=0}function Xs(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=os(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ys(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Ws(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Qs.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ws(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ks(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var $s="closure_lm_"+(1e6*Math.random()|0),Js={};function Zs(t,e,n,r,i){if(r&&r.once)return eu(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Zs(t,e[o],n,r,i);return null}return n=cu(n),t&&t[Gs]?t.va(e,n,Xo(r)?!!r.capture:!!r,i):tu(t,e,n,!1,r,i)}function tu(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Xo(i)?!!i.capture:!!i;if(s&&!Ms)return null;var u=uu(t);if(u||(t[$s]=u=new Qs(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=su,e=Ms?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Us||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(iu(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function eu(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)eu(t,e[o],n,r,i);return null}return n=cu(n),t&&t[Gs]?t.wa(e,n,Xo(r)?!!r.capture:!!r,i):tu(t,e,n,!0,r,i)}function nu(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nu(t,e[o],n,r,i);else r=Xo(r)?!!r.capture:!!r,n=cu(n),t&&t[Gs]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=Ws(o=t.a[e],n,r,i))&&(Ys(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=uu(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ws(e,n,r,i)),(n=-1<t?e[t]:null)&&ru(n))}function ru(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Gs])Xs(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(iu(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=uu(e))?(Xs(n,t),0==n.b&&(n.src=null,e[$s]=null)):Ys(t)}}}function iu(t){return t in Js?Js[t]:Js[t]="on"+t}function ou(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&ru(t),n.call(r,e)}function su(t,e){if(t.Y)return!0;if(!Ms){if(!e)t:{e=["window","event"];for(var n=Ko,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ou(t,e=new Bs(e,this))}return ou(t,new Bs(e,this))}function uu(t){return(t=t[$s])instanceof Qs?t:null}var au="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(t){return"function"==typeof t?t:(t[au]||(t[au]=function(e){return t.handleEvent(e)}),t[au])}function lu(){is.call(this),this.c=new Qs(this),this.J=this,this.C=null}function fu(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new qs(e,t);else if(e instanceof qs)e.target=e.target||t;else{var i=e;bs(e=new qs(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=hu(s,r,!0,e)&&i}if(i=hu(s=e.a=t,r,!0,e)&&i,i=hu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=hu(s=e.a=n[o],r,!1,e)&&i}function hu(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&Xs(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}rs(lu,is),lu.prototype[Gs]=!0,(zo=lu.prototype).addEventListener=function(t,e,n,r){Zs(this,t,e,n,r)},zo.removeEventListener=function(t,e,n,r){nu(this,t,e,n,r)},zo.G=function(){if(lu.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ys(n[r]);delete e.a[t],e.b--}}this.C=null},zo.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},zo.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var pu=Ko.JSON.stringify;function du(){this.b=this.a=null}var vu,yu=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new mu}),(function(t){t.reset()}));function gu(){var t=Eu,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function mu(){this.next=this.b=this.a=null}function bu(t){Ko.setTimeout((function(){throw t}),0)}function wu(t,e){vu||function(){var t=Ko.Promise.resolve(void 0);vu=function(){t.then(Iu)}}(),_u||(vu(),_u=!0),Eu.add(t,e)}du.prototype.add=function(t,e){var n=yu.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},mu.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},mu.prototype.reset=function(){this.next=this.b=this.a=null};var _u=!1,Eu=new du;function Iu(){for(var t;t=gu();){try{t.a.call(t.b)}catch(n){bu(n)}var e=yu;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}_u=!1}function Tu(t,e){lu.call(this),this.b=t||1,this.a=e||Ko,this.f=ts(this.Za,this),this.g=ns()}function Au(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Nu(t,e,n){if("function"==typeof t)n&&(t=ts(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ts(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ko.setTimeout(t,e||0)}function Su(t){t.a=Nu((function(){t.a=null,t.c&&(t.c=!1,Su(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}rs(Tu,lu),(zo=Tu.prototype).aa=!1,zo.M=null,zo.Za=function(){if(this.aa){var t=ns()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),fu(this,"tick"),this.aa&&(Au(this),this.start()))}},zo.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ns())},zo.G=function(){Tu.X.G.call(this),Au(this),delete this.a};var xu=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}qo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Su(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Ko.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(is);function Ou(t){is.call(this),this.b=t,this.a={}}rs(Ou,is);var Cu=[];function Du(t,e,n,r){Array.isArray(n)||(n&&(Cu[0]=n.toString()),n=Cu);for(var i=0;i<n.length;i++){var o=Zs(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ku(t){ys(t.a,(function(t,e){this.a.hasOwnProperty(e)&&ru(t)}),t),t.a={}}function Pu(){this.a=!0}function Lu(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return pu(n)}catch(u){return e}}(t,n)+(r?" "+r:"")}))}Ou.prototype.G=function(){Ou.X.G.call(this),ku(this)},Ou.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pu.prototype.info=function(){};var Ru={},Vu=null;function ju(){return Vu=Vu||new lu}function Mu(t){qs.call(this,Ru.Fa,t)}function Fu(t){var e=ju();fu(e,new Mu(e,t))}function Uu(t,e){qs.call(this,Ru.STAT_EVENT,t),this.stat=e}function qu(t){var e=ju();fu(e,new Uu(e,t))}function Bu(t){qs.call(this,Ru.Ga,t)}function zu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ko.setTimeout((function(){t()}),e)}Ru.Fa="serverreachability",rs(Mu,qs),Ru.STAT_EVENT="statevent",rs(Uu,qs),Ru.Ga="timingevent",rs(Bu,qs);var Gu={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Hu={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Ku(){}function Yu(t){var e;return(e=t.a)||(e=t.a={}),e}function Qu(){}Ku.prototype.a=null;var Xu,Wu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function $u(){qs.call(this,"d")}function Ju(){qs.call(this,"c")}function Zu(){}function ta(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Ou(this),this.P=ea,t=Ns?125:void 0,this.R=new Tu(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}rs($u,qs),rs(Ju,qs),rs(Zu,Ku),Xu=new Zu;var ea=45e3,na={},ra={};function ia(t,e,n){t.H=1,t.i=Na(wa(e)),t.j=n,t.I=!0,oa(t,null)}function oa(t,e){t.u=ns(),aa(t),t.l=wa(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Fa(n.b,"t",r),t.D=0,t.a=Pc(t.g,t.g.C?e:null),0<t.O&&(t.F=new xu(ts(t.Ca,t,t.a),t.O)),Du(t.J,t.a,"readystatechange",t.Xa),e=t.B?gs(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Fu(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");s=2<=f.length&&"type"==f[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function sa(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ua(t,n);if(i==ra){4==e&&(t.h=4,qu(14),r=!1),Lu(t.c,t.f,null,"[Incomplete Response]");break}if(i==na){t.h=4,qu(15),Lu(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Lu(t.c,t.f,i,null),pa(t,i)}4==e&&0==n.length&&(t.h=1,qu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ac(e),e.F=!0,qu(11))):(Lu(t.c,t.f,n,"[Invalid Chunked Response]"),ha(t),fa(t))}function ua(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ra:(n=Number(e.substring(n,r)),isNaN(n)?na:(r+=1)+n>e.length?ra:(e=e.substr(r,n),t.D=r+n,e))}function aa(t){t.T=ns()+t.P,ca(t,t.P)}function ca(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=zu(ts(t.Va,t),e)}function la(t){t.o&&(Ko.clearTimeout(t.o),t.o=null)}function fa(t){0==t.g.v||t.A||xc(t.g,t)}function ha(t){la(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Au(t.R),ku(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function pa(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ka(n.b,t)))if(n.I=t.N,!t.C&&Ka(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Sc(n),yc(n)}Tc(n),qu(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=zu(ts(n.Sa,n),6e3));if(1>=Ha(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Cc(n,11)}else if((t.C||n.a==t)&&Sc(n),!cs(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=a.b;!f.a&&(hs(l,"spdy")||hs(l,"quic")||hs(l,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(Ya(f,f.b),f.b=null))}if(a.A){var h=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(a.na=h,Aa(a.B,a.A,h))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=ns()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=kc(a,a.C?a.ga:null,a.fa),p.C){Qa(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(la(d),aa(d)),a.a=p}else Ic(a);0<n.g.length&&bc(n)}else"stop"!=i[0]&&"close"!=i[0]||Cc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Cc(n,7):vc(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Fu(4)}catch(y){}}function da(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qo(t)||"string"==typeof t)ss(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Qo(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Qo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function va(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof va)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ya(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ga(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ga(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ga(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(zo=ta.prototype).setTimeout=function(t){this.P=t},zo.Xa=function(t){t=t.target;var e=this.F;e&&3==fc(t)?e.f():this.Ca(t)},zo.Ca=function(t){try{if(t==this.a)t:{var e=fc(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ns&&!this.a.$())){this.A||4!=e||7==n||Fu(8==n||0>=r?3:2),la(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!cs(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,qu(12),ha(this),fa(this);break t}Lu(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,pa(this,a)}this.I?(sa(this,e,o),Ns&&this.b&&3==e&&(Du(this.J,this.R,"tick",this.Wa),this.R.start())):(Lu(this.c,this.f,o,null),pa(this,o)),4==e&&ha(this),this.b&&!this.A&&(4==e?xc(this.g,this):(this.b=!1,aa(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,qu(12)):(this.h=0,qu(13)),ha(this),fa(this)}}}catch(c){}},zo.Wa=function(){if(this.a){var t=fc(this.a),e=this.a.$();this.D<e.length&&(la(this),sa(this,t,e),this.b&&4!=t&&aa(this))}},zo.cancel=function(){this.A=!0,ha(this)},zo.Va=function(){this.o=null;var t=ns();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Fu(3),qu(17)),ha(this),this.h=2,fa(this)):ca(this,this.T-t)},(zo=va.prototype).K=function(){ya(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},zo.L=function(){return ya(this),this.a.concat()},zo.get=function(t,e){return ga(this.b,t)?this.b[t]:e},zo.set=function(t,e){ga(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},zo.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ma=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ba(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ba){this.a=void 0!==e?e:t.a,_a(this,t.f),this.j=t.j,Ea(this,t.c),Ia(this,t.h),this.g=t.g,e=t.b;var n=new Ra;n.c=e.c,e.a&&(n.a=new va(e.a),n.b=e.b),Ta(this,n),this.i=t.i}else t&&(n=String(t).match(ma))?(this.a=!!e,_a(this,n[1]||"",!0),this.j=Sa(n[2]||""),Ea(this,n[3]||"",!0),Ia(this,n[4]),this.g=Sa(n[5]||"",!0),Ta(this,n[6]||"",!0),this.i=Sa(n[7]||"")):(this.a=!!e,this.b=new Ra(null,this.a))}function wa(t){return new ba(t)}function _a(t,e,n){t.f=n?Sa(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ea(t,e,n){t.c=n?Sa(e,!0):e}function Ia(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ta(t,e,n){e instanceof Ra?(t.b=e,function(t,e){e&&!t.f&&(Va(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(ja(this,e),Fa(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=xa(e,Pa)),t.b=new Ra(e,t.a))}function Aa(t,e,n){t.b.set(e,n)}function Na(t){return Aa(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ns()).toString(36)),t}function Sa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xa(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Oa),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Oa(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ba.prototype.toString=function(){var t=[],e=this.f;e&&t.push(xa(e,Ca,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(xa(e,Ca,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(xa(n,"/"==n.charAt(0)?ka:Da,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",xa(n,La)),t.join("")};var Ca=/[#\/\?@]/g,Da=/[#\?:]/g,ka=/[#\?]/g,Pa=/[#\?@]/g,La=/#/g;function Ra(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Va(t){t.a||(t.a=new va,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function ja(t,e){Va(t),e=Ua(t,e),ga(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ga((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ya(t)))}function Ma(t,e){return Va(t),e=Ua(t,e),ga(t.a.b,e)}function Fa(t,e,n){ja(t,e),0<n.length&&(t.c=null,t.a.set(Ua(t,e),as(n)),t.b+=n.length)}function Ua(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(zo=Ra.prototype).add=function(t,e){Va(this),this.c=null,t=Ua(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},zo.forEach=function(t,e){Va(this),this.a.forEach((function(n,r){ss(n,(function(n){t.call(e,n,r,this)}),this)}),this)},zo.L=function(){Va(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},zo.K=function(t){Va(this);var e=[];if("string"==typeof t)Ma(this,t)&&(e=us(e,this.a.get(Ua(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=us(e,t[n])}return e},zo.set=function(t,e){return Va(this),this.c=null,Ma(this,t=Ua(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},zo.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},zo.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var qa=function(t,e){this.b=t,this.a=e};function Ba(t){this.g=t||za,Ko.PerformanceNavigationTiming?t=0<(t=Ko.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Ko.ia&&Ko.ia.ya&&Ko.ia.ya()&&Ko.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var za=10;function Ga(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Ha(t){return t.b?1:t.a?t.a.size:0}function Ka(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ya(t,e){t.a?t.a.add(e):t.b=e}function Qa(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Xa(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Bo(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return as(t.c)}function Wa(){}function $a(){this.a=new Wa}function Ja(t,e,n){var r=n||"";try{da(t,(function(t,n){var i=t;Xo(t)&&(i=pu(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch($b){throw e.push(r+"type="+encodeURIComponent("_badmap")),$b}}function Za(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Ba.prototype.cancel=function(){var t,e;if(this.c=Xa(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Bo(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Wa.prototype.stringify=function(t){return Ko.JSON.stringify(t,void 0)},Wa.prototype.parse=function(t){return Ko.JSON.parse(t,void 0)};var tc=Ko.JSON.parse;function ec(t){lu.call(this),this.headers=new va,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=nc,this.D=this.F=!1}rs(ec,lu);var nc="",rc=/^https?$/i,ic=["POST","PUT"];function oc(t){return"content-type"==t.toLowerCase()}function sc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,uc(t),cc(t)}function uc(t){t.u||(t.u=!0,fu(t,"complete"),fu(t,"error"))}function ac(t){if(t.b&&void 0!==Ho&&(!t.s[1]||4!=fc(t)||2!=t.W()))if(t.l&&4==fc(t))Nu(t.za,0,t);else if(fu(t,"readystatechange"),4==fc(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(ma)[1]||null;if(!o&&Ko.self&&Ko.self.location){var s=Ko.self.location.protocol;o=s.substr(0,s.length-1)}i=!rc.test(o?o.toLowerCase():"")}e=i}if(e)fu(t,"complete"),fu(t,"success");else{t.h=6;try{var u=2<fc(t)?t.a.statusText:""}catch(a){u=""}t.f=u+" ["+t.W()+"]",uc(t)}}finally{cc(t)}}}function cc(t,e){if(t.a){lc(t);var n=t.a,r=t.s[0]?Yo:null;t.a=null,t.s=null,e||fu(t,"ready");try{n.onreadystatechange=r}catch($b){}}}function lc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ko.clearTimeout(t.m),t.m=null)}function fc(t){return t.a?t.a.readyState:0}function hc(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ys(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Aa(t,e,n))}function pc(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function dc(t){this.pa=0,this.g=[],this.c=new Pu,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=pc("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=pc("baseRetryDelayMs",5e3,t),this.Ra=pc("retryDelaySeedMs",1e4,t),this.Ma=pc("forwardChannelMaxRetries",2,t),this.ma=pc("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ba(t&&t.concurrentRequestLimit),this.ka=new $a,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function vc(t){if(gc(t),3==t.v){var e=t.R++,n=wa(t.B);Aa(n,"SID",t.J),Aa(n,"RID",e),Aa(n,"TYPE","terminate"),_c(t,n),(e=new ta(t,t.c,e,void 0)).H=2,e.i=Na(wa(n)),n=!1,Ko.navigator&&Ko.navigator.sendBeacon&&(n=Ko.navigator.sendBeacon(e.i.toString(),"")),!n&&Ko.Image&&((new Image).src=e.i,n=!0),n||(e.a=Pc(e.g,null),e.a.ba(e.i)),e.u=ns(),aa(e)}Dc(t)}function yc(t){t.a&&(Ac(t),t.a.cancel(),t.a=null)}function gc(t){yc(t),t.j&&(Ko.clearTimeout(t.j),t.j=null),Sc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ko.clearTimeout(t.h),t.h=null)}function mc(t,e){t.g.push(new qa(t.Oa++,e)),3==t.v&&bc(t)}function bc(t){Ga(t.b)||t.h||(t.h=!0,wu(t.Ba,t),t.u=0)}function wc(t,e){var n;n=e?e.f:t.R++;var r=wa(t.B);Aa(r,"SID",t.J),Aa(r,"RID",n),Aa(r,"AID",t.P),_c(t,r),t.i&&t.l&&hc(r,t.i,t.l),n=new ta(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ec(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Ya(t.b,n),ia(n,r,e)}function _c(t,e){t.f&&da({},(function(t,n){Aa(e,n,t)}))}function Ec(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ts(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,l=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{Ja(l,s,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Ic(t){t.a||t.j||(t.T=1,wu(t.Aa,t),t.o=0)}function Tc(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=zu(ts(t.Aa,t),Oc(t,t.o)),t.o++,!0)}function Ac(t){null!=t.s&&(Ko.clearTimeout(t.s),t.s=null)}function Nc(t){t.a=new ta(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=wa(t.la);Aa(e,"RID","rpc"),Aa(e,"SID",t.J),Aa(e,"CI",t.H?"0":"1"),Aa(e,"AID",t.P),_c(t,e),Aa(e,"TYPE","xmlhttp"),t.i&&t.l&&hc(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Na(wa(e)),n.j=null,n.I=!0,oa(n,t)}function Sc(t){null!=t.m&&(Ko.clearTimeout(t.m),t.m=null)}function xc(t,e){var n=null;if(t.a==e){Sc(t),Ac(t),t.a=null;var r=2}else{if(!Ka(t.b,e))return;n=e.s,Qa(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=ns()-e.u;var i=t.u;fu(r=ju(),new Bu(r,n,e,i)),bc(t)}else Ic(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ha(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=zu(ts(t.Ba,t,e),Oc(t,t.u)),t.u++,0)))}(t,e)||2==r&&Tc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Cc(t,5);break;case 4:Cc(t,10);break;case 3:Cc(t,6);break;default:Cc(t,2)}}function Oc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Cc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ts(t.Ya,t);n||(n=new ba("//www.google.com/images/cleardot.gif"),Ko.location&&"http"==Ko.location.protocol||_a(n,"https"),Na(n)),function(t,e){var n=new Pu;if(Ko.Image){var r=new Image;r.onload=es(Za,n,r,"TestLoadImage: loaded",!0,e),r.onerror=es(Za,n,r,"TestLoadImage: error",!1,e),r.onabort=es(Za,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=es(Za,n,r,"TestLoadImage: timeout",!1,e),Ko.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else qu(2);t.v=0,t.f&&t.f.ra(e),Dc(t),gc(t)}function Dc(t){t.v=0,t.I=-1,t.f&&(0==Xa(t.b).length&&0==t.g.length||(t.b.c.length=0,as(t.g),t.g.length=0),t.f.qa())}function kc(t,e,n){var r=function(t){return t instanceof ba?wa(t):new ba(t,void 0)}(n);if(""!=r.c)e&&Ea(r,e+"."+r.c),Ia(r,r.h);else{var i=Ko.location;r=function(t,e,n,r){var i=new ba(null,void 0);return t&&_a(i,t),e&&Ea(i,e),n&&Ia(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ys(t.V,(function(t,e){Aa(r,e,t)})),e=t.A,n=t.na,e&&n&&Aa(r,e,n),Aa(r,"VER",t.ha),_c(t,r),r}function Pc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ec(t.Na)).F=t.C,e}function Lc(){}function Rc(){if(Ts&&!(10<=Number(js)))throw Error("Environmental error: no available transport.")}function Vc(t,e){lu.call(this),this.a=new dc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!cs(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!cs(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Fc(this)}function jc(t){$u.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Mc(){Ju.call(this),this.status=1}function Fc(t){this.a=t}(zo=ec.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Yu(this.H):Yu(Xu),this.a.onreadystatechange=ts(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void sc(this,o)}t=n||"";var i=new va(this.headers);r&&da(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=oc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Ko.FormData&&t instanceof Ko.FormData,!(0<=os(ic,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{lc(this),0<this.o&&((this.D=function(t){return Ts&&Rs(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ts(this.xa,this)):this.m=Nu(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){sc(this,o)}},zo.xa=function(){void 0!==Ho&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,fu(this,"timeout"),this.abort(8))},zo.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,fu(this,"complete"),fu(this,"abort"),cc(this))},zo.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),cc(this,!0)),ec.X.G.call(this)},zo.za=function(){this.j||(this.A||this.l||this.g?ac(this):this.Ua())},zo.Ua=function(){ac(this)},zo.W=function(){try{return 2<fc(this)?this.a.status:-1}catch(Es){return-1}},zo.$=function(){try{return this.a?this.a.responseText:""}catch(Es){return""}},zo.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),tc(e)}},zo.ua=function(){return this.h},zo.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(zo=dc.prototype).ha=8,zo.v=1,zo.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ta(this,this.c,t,void 0),r=this.l;if(this.O&&(r?bs(r=gs(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ec(this,n,e),Aa(i=wa(this.B),"RID",t),Aa(i,"CVER",22),this.A&&Aa(i,"X-HTTP-Session-Id",this.A),_c(this,i),this.i&&r&&hc(i,this.i,r),Ya(this.b,n),this.Ia&&Aa(i,"TYPE","init"),this.da?(Aa(i,"$req",e),Aa(i,"SID","null"),n.U=!0,ia(n,i,null)):ia(n,i,e),this.v=2}}else 3==this.v&&(t?wc(this,t):0==this.g.length||Ga(this.b)||wc(this))},zo.Aa=function(){if(this.j=null,Nc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=zu(ts(this.Ta,this),t)}},zo.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,qu(10),yc(this),Nc(this))},zo.Sa=function(){null!=this.m&&(this.m=null,yc(this),Tc(this),qu(19))},zo.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),qu(2)):(this.c.info("Failed to ping google.com"),qu(1))},(zo=Lc.prototype).ta=function(){},zo.sa=function(){},zo.ra=function(){},zo.qa=function(){},zo.Ja=function(){},Rc.prototype.a=function(t,e){return new Vc(t,e)},rs(Vc,lu),Vc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;qu(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=kc(t,null,t.fa),bc(t)},Vc.prototype.close=function(){vc(this.a)},Vc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,mc(this.a,e)}else this.l?((e={}).__data__=pu(t),mc(this.a,e)):mc(this.a,t)},Vc.prototype.G=function(){this.a.f=null,delete this.f,vc(this.a),delete this.a,Vc.X.G.call(this)},rs(jc,$u),rs(Mc,Ju),rs(Fc,Lc),Fc.prototype.ta=function(){fu(this.a,"a")},Fc.prototype.sa=function(t){fu(this.a,new jc(t))},Fc.prototype.ra=function(t){fu(this.a,new Mc(t))},Fc.prototype.qa=function(){fu(this.a,"b")},Rc.prototype.createWebChannel=Rc.prototype.a,Vc.prototype.send=Vc.prototype.h,Vc.prototype.open=Vc.prototype.g,Vc.prototype.close=Vc.prototype.close,Gu.NO_ERROR=0,Gu.TIMEOUT=8,Gu.HTTP_ERROR=6,Hu.COMPLETE="complete",Qu.EventType=Wu,Wu.OPEN="a",Wu.CLOSE="b",Wu.ERROR="c",Wu.MESSAGE="d",lu.prototype.listen=lu.prototype.va,ec.prototype.listenOnce=ec.prototype.wa,ec.prototype.getLastError=ec.prototype.Qa,ec.prototype.getLastErrorCode=ec.prototype.ua,ec.prototype.getStatus=ec.prototype.W,ec.prototype.getResponseJson=ec.prototype.Pa,ec.prototype.getResponseText=ec.prototype.$,ec.prototype.send=ec.prototype.ba;var Uc=Gu,qc=Hu,Bc=Ru,zc=10,Gc=11,Hc=Qu,Kc=ec,Yc=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Qc=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Xc=new Ao("@firebase/firestore");function Wc(){return Xc.logLevel}function $c(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Xc.logLevel<=go.DEBUG){var r=e.map(tl);Xc.debug.apply(Xc,Ji(["Firestore (8.2.6): "+t],r))}}function Jc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Xc.logLevel<=go.ERROR){var r=e.map(tl);Xc.error.apply(Xc,Ji(["Firestore (8.2.6): "+t],r))}}function Zc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Xc.logLevel<=go.WARN){var r=e.map(tl);Xc.warn.apply(Xc,Ji(["Firestore (8.2.6): "+t],r))}}function tl(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.6) INTERNAL ASSERTION FAILED: "+t;throw Jc(e),new Error(e)}function nl(t,e){t||el()}function rl(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ol=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=il(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function sl(t,e){return t<e?-1:t>e?1:0}function ul(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function al(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cl=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return sl(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();cl.T=new cl("");var ll={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},fl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Hi(e,t),e}(Error),hl=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(cl.fromBase64String(e))}catch(n){throw new fl(ll.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(cl.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),pl=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();pl.UNAUTHENTICATED=new pl(null),pl.R=new pl("google-credentials-uid"),pl.P=new pl("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var dl=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},vl=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(pl.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),yl=function(){function t(t){var e=this;this.D=null,this.currentUser=pl.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.F(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?($c("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(nl("string"==typeof n.accessToken),new dl(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.F=function(){var t=this.auth&&this.auth.getUid();return nl(null===t||"string"==typeof t),new pl(t)},t}(),gl=function(){function t(t,e){this.O=t,this.k=e,this.type="FirstParty",this.user=pl.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.k},e=this.O.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),ml=function(){function t(t,e){this.O=t,this.k=e}return t.prototype.getToken=function(){return Promise.resolve(new gl(this.O,this.k))},t.prototype.v=function(t){t(pl.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),bl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.M=function(t){return n.L(t)},this.$=function(t){return e.B(t)})}return t.prototype.L=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.$&&this.$(t),t},t}();bl.q=-1;var wl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new fl(ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new fl(ll.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new fl(ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new fl(ll.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?sl(this.nanoseconds,t.nanoseconds):sl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),_l=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new wl(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),El=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&el(),void 0===n?n=t.length-e:n>t.length-e&&el(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Il=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new fl(ll.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(El),Tl=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Al=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Tl.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new fl(ll.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new fl(ll.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new fl(ll.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new fl(ll.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(El),Nl=function(){function t(t){this.path=t}return t._t=function(e){return new t(Il.ot(e))},t.ft=function(e){return new t(Il.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Il.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Il.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Il(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ol(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cl=function(){function t(t){this.fields=t,t.sort(Al.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return ul(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Dl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){if(nl(!!t),"string"==typeof t){var e=0,n=Dl.exec(t);if(nl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pl(t.seconds),nanos:Pl(t.nanos)}}function Pl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ll(t){return"string"==typeof t?cl.fromBase64String(t):cl.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vl(t){var e=t.mapValue.fields.__previous_value__;return Rl(e)?Vl(e):e}function jl(t){var e=kl(t.mapValue.fields.__local_write_time__.timestampValue);return new wl(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){return null==t}function Fl(t){return 0===t&&1/t==-1/0}function Ul(t){return"number"==typeof t&&Number.isInteger(t)&&!Fl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rl(t)?4:10:el()}function Bl(t,e){var n,r=ql(t);if(r!==ql(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jl(t).isEqual(jl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=kl(t.timestampValue),r=kl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,Ll(t.bytesValue).isEqual(Ll(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Pl(t.geoPointValue.latitude)===Pl(e.geoPointValue.latitude)&&Pl(t.geoPointValue.longitude)===Pl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Pl(t.integerValue)===Pl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Pl(t.doubleValue),r=Pl(e.doubleValue);return n===r?Fl(n)===Fl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ul(t.arrayValue.values||[],e.arrayValue.values||[],Bl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Sl(n)!==Sl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Bl(n[i],r[i])))return!1;return!0}(t,e);default:return el()}}function zl(t,e){return void 0!==(t.values||[]).find((function(t){return Bl(t,e)}))}function Gl(t,e){var n,r,i,o,s=ql(t),u=ql(e);if(s!==u)return sl(s,u);switch(s){case 0:return 0;case 1:return sl(t.booleanValue,e.booleanValue);case 2:return r=e,i=Pl((n=t).integerValue||n.doubleValue),o=Pl(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return Hl(t.timestampValue,e.timestampValue);case 4:return Hl(jl(t),jl(e));case 5:return sl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ll(t),r=Ll(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=sl(n[i],r[i]);if(0!==o)return o}return sl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=sl(Pl(t.latitude),Pl(e.latitude));return 0!==n?n:sl(Pl(t.longitude),Pl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Gl(n[i],r[i]);if(o)return o}return sl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=sl(r[s],o[s]);if(0!==u)return u;var a=Gl(n[r[s]],i[o[s]]);if(0!==a)return a}return sl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw el()}}function Hl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return sl(t,e);var n=kl(t),r=kl(e),i=sl(n.seconds,r.seconds);return 0!==i?i:sl(n.nanos,r.nanos)}function Kl(t){return Yl(t)}function Yl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=kl(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?Ll(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,Nl.ft(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Yl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Yl(t.fields[o])}return e+"}"}(t.mapValue):el();var e,n,r,i}function Ql(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function Xl(t){return!!t&&"integerValue"in t}function Wl(t){return!!t&&"arrayValue"in t}function $l(t){return!!t&&"nullValue"in t}function Jl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zl(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tf=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Zl(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Bl(this.proto,t.proto)},t}(),ef=function(){function t(t){void 0===t&&(t=tf.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ql(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(Al.ct(),this.At);return null!=t?new tf(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=Zl(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function nf(t){var e=[];return xl(t.fields||{},(function(t,n){var r=new Al([t]);if(Zl(n)){var i=nf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Cl(e)}var rf=function(t,e){this.key=t,this.version=e},of=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Hi(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(rf),sf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Hi(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(rf),uf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(rf),af=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function cf(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new af(t,e,n,r,i,o,s)}function lf(t){var e=rl(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.rt()+e.op.toString()+Kl(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.rt()+e.dir;var e})).join(","),Ml(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=If(e.startAt)),e.endAt&&(n+="|ub:",n+=If(e.endAt)),e.vt=n}return e.vt}function ff(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Af(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Bl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Sf(t.startAt,e.startAt)&&Sf(t.endAt,e.endAt)}function hf(t){return Nl.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var pf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Hi(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new df(t,n,r):"array-contains"===n?new mf(t,r):"in"===n?new bf(t,r):"not-in"===n?new wf(t,r):"array-contains-any"===n?new _f(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new vf(t,n):new yf(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(Gl(e,this.value)):null!==e&&ql(this.value)===ql(e)&&this.Dt(Gl(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return el()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),df=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Nl.ft(r.referenceValue),i}return Hi(e,t),e.prototype.matches=function(t){var e=Nl.H(t.key,this.key);return this.Dt(e)},e}(pf),vf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=gf("in",n),r}return Hi(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pf),yf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=gf("not-in",n),r}return Hi(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pf);function gf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Nl.ft(t.referenceValue)}))}var mf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Hi(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Wl(e)&&zl(e.arrayValue,this.value)},e}(pf),bf=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Hi(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&zl(this.value.arrayValue,e)},e}(pf),wf=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Hi(e,t),e.prototype.matches=function(t){if(zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!zl(this.value.arrayValue,e)},e}(pf),_f=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Hi(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Wl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return zl(e.value.arrayValue,t)}))},e}(pf),Ef=function(t,e){this.position=t,this.before=e};function If(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Kl(t)})).join(",")}var Tf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Af(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Nf(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Nl.H(Nl.ft(s.referenceValue),n.key):Gl(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Sf(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Bl(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xf=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Nt=null,this.Ft=null,this.startAt,this.endAt};function Of(t,e,n,r,i,o,s,u){return new xf(t,e,n,r,i,o,s,u)}function Cf(t){return new xf(t)}function Df(t){return!Ml(t.limit)&&"F"===t.limitType}function kf(t){return!Ml(t.limit)&&"L"===t.limitType}function Pf(t){return t.xt.length>0?t.xt[0].field:null}function Lf(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Rf(t){return null!==t.collectionGroup}function Vf(t){var e=rl(t);if(null===e.Nt){e.Nt=[];var n=Lf(e),r=Pf(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Tf(n)),e.Nt.push(new Tf(Al.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var u=s[o];e.Nt.push(u),u.field.ut()&&(i=!0)}if(!i){var a=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Tf(Al.ht(),a))}}}return e.Nt}function jf(t){var e=rl(t);if(!e.Ft)if("F"===e.limitType)e.Ft=cf(e.path,e.collectionGroup,Vf(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Vf(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Tf(o.field,s))}var u=e.endAt?new Ef(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Ef(e.startAt.position,!e.startAt.before):null;e.Ft=cf(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.Ft}function Mf(t,e,n){return new xf(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ff(t,e){return ff(jf(t),jf(e))&&t.limitType===e.limitType}function Uf(t){return lf(jf(t))+"|lt:"+t.limitType}function qf(t){return"Query(target="+(e=jf(t),n=e.path.rt(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+Kl(e.value);var e})).join(", ")+"]"),Ml(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.rt()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+If(e.startAt)),e.endAt&&(n+=", endAt: "+If(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function Bf(t,e){return n=t,i=(r=e).key.path,(null!==n.collectionGroup?r.key.dt(n.collectionGroup)&&n.path.nt(i):Nl.wt(n.path)?n.path.isEqual(i):n.path.st(i))&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Nf(t.startAt,Vf(t),e)||t.endAt&&Nf(t.endAt,Vf(t),e))}(t,e);var n,r,i}function zf(t){return function(e,n){for(var r=!1,i=0,o=Vf(t);i<o.length;i++){var s=o[i],u=Gf(s,e,n);if(0!==u)return u;r=r||s.field.ut()}return 0}}function Gf(t,e,n){var r,i,o,s,u=t.field.ut()?Nl.H(e.key,n.key):(r=t.field,i=n,o=e.field(r),s=i.field(r),null!==o&&null!==s?Gl(o,s):el());switch(t.dir){case"asc":return u;case"desc":return-1*u;default:return el()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=_l.min()),void 0===o&&(o=_l.min()),void 0===s&&(s=cl.T),this.target=t,this.targetId=e,this.Ot=n,this.sequenceNumber=r,this.kt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Mt=function(e){return new t(this.target,this.targetId,this.Ot,e,this.kt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Lt=function(e,n){return new t(this.target,this.targetId,this.Ot,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.$t=function(e){return new t(this.target,this.targetId,this.Ot,this.sequenceNumber,this.kt,e,this.resumeToken)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(e)?"-0":e}}function Yf(t){return{integerValue:""+t}}function Qf(t,e){return Ul(e)?Yf(e):Kf(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xf=function(){this.qt=void 0};function Wf(t,e,n){return t instanceof Zf?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof th?eh(t,e):t instanceof nh?rh(t,e):function(t,e){var n=Jf(t,e),r=oh(n)+oh(t.Ut);return Xl(n)&&Xl(t.Ut)?Yf(r):Kf(t.Qt,r)}(t,e);var r,i,o}function $f(t,e,n){return t instanceof th?eh(t,e):t instanceof nh?rh(t,e):n}function Jf(t,e){return t instanceof ih?Xl(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var Zf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e}(Xf),th=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Hi(e,t),e}(Xf);function eh(t,e){for(var n=sh(e),r=function(t){n.some((function(e){return Bl(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Hi(e,t),e}(Xf);function rh(t,e){for(var n=sh(e),r=function(t){n=n.filter((function(e){return!Bl(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ih=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Hi(e,t),e}(Xf);function oh(t){return Pl(t.integerValue||t.doubleValue)}function sh(t){return Wl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uh=function(t,e){this.field=t,this.transform=e},ah=function(t,e){this.version=t,this.transformResults=e},ch=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function lh(t,e){return void 0!==t.updateTime?e instanceof of&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof of}var fh=function(){};function hh(t,e,n){return t instanceof gh?function(t,e,n){var r=t.value;if(n.transformResults){var i=wh(t.fieldTransforms,e,n.transformResults);r=Eh(t.fieldTransforms,r,i)}return new of(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof mh?function(t,e,n){if(!lh(t.jt,e))return new uf(t.key,n.version);var r=bh(t,e,n.transformResults?wh(t.fieldTransforms,e,n.transformResults):[]);return new of(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):(r=n,new sf(t.key,r.version,{hasCommittedMutations:!0}));var r}function ph(t,e,n){return t instanceof gh?function(t,e,n){if(!lh(t.jt,e))return e;var r=t.value,i=_h(t.fieldTransforms,n,e);r=Eh(t.fieldTransforms,r,i);var o=yh(e);return new of(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof mh?function(t,e,n){if(!lh(t.jt,e))return e;var r=yh(e),i=bh(t,e,_h(t.fieldTransforms,n,e));return new of(t.key,r,i,{Vt:!0})}(t,e,n):(i=e,lh((r=t).jt,i)?new sf(r.key,_l.min()):i);var r,i}function dh(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof of?e.field(o.field):void 0,u=Jf(o.transform,s||null);null!=u&&(n=null==n?(new ef).set(o.field,u):n.set(o.field,u))}return n?n.Pt():null}(t.fieldTransforms,e)}function vh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&ul(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof th&&o instanceof th||i instanceof nh&&o instanceof nh?ul(i.elements,o.elements,Bl):i instanceof ih&&o instanceof ih?Bl(i.Ut,o.Ut):i instanceof Zf&&o instanceof Zf);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt));var n,r}function yh(t){return t instanceof of?t.version:_l.min()}var gh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Hi(e,t),e}(fh),mh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Hi(e,t),e}(fh);function bh(t,e,n){var r,i,o,s;return i=t,o=r=e instanceof of?e.data():tf.empty(),s=new ef(o),i.Gt.fields.forEach((function(t){if(!t.et()){var e=i.data.field(t);null!==e?s.set(t,e):s.delete(t)}})),r=s.Pt(),Eh(t.fieldTransforms,r,n)}function wh(t,e,n){var r=[];nl(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof of&&(u=e.field(o.field)),r.push($f(s,u,n[i]))}return r}function _h(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],u=s.transform,a=null;n instanceof of&&(a=n.field(s.field)),r.push(Wf(u,a,e))}return r}function Eh(t,e,n){for(var r=new ef(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var Ih,Th,Ah=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Hi(e,t),e}(fh),Nh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Hi(e,t),e}(fh),Sh=function(t){this.count=t};function xh(t){switch(t){case ll.OK:return el();case ll.CANCELLED:case ll.UNKNOWN:case ll.DEADLINE_EXCEEDED:case ll.RESOURCE_EXHAUSTED:case ll.INTERNAL:case ll.UNAVAILABLE:case ll.UNAUTHENTICATED:return!1;case ll.INVALID_ARGUMENT:case ll.NOT_FOUND:case ll.ALREADY_EXISTS:case ll.PERMISSION_DENIED:case ll.FAILED_PRECONDITION:case ll.ABORTED:case ll.OUT_OF_RANGE:case ll.UNIMPLEMENTED:case ll.DATA_LOSS:return!0;default:return el()}}function Oh(t){if(void 0===t)return Jc("GRPC error has no .code"),ll.UNKNOWN;switch(t){case Ih.OK:return ll.OK;case Ih.CANCELLED:return ll.CANCELLED;case Ih.UNKNOWN:return ll.UNKNOWN;case Ih.DEADLINE_EXCEEDED:return ll.DEADLINE_EXCEEDED;case Ih.RESOURCE_EXHAUSTED:return ll.RESOURCE_EXHAUSTED;case Ih.INTERNAL:return ll.INTERNAL;case Ih.UNAVAILABLE:return ll.UNAVAILABLE;case Ih.UNAUTHENTICATED:return ll.UNAUTHENTICATED;case Ih.INVALID_ARGUMENT:return ll.INVALID_ARGUMENT;case Ih.NOT_FOUND:return ll.NOT_FOUND;case Ih.ALREADY_EXISTS:return ll.ALREADY_EXISTS;case Ih.PERMISSION_DENIED:return ll.PERMISSION_DENIED;case Ih.FAILED_PRECONDITION:return ll.FAILED_PRECONDITION;case Ih.ABORTED:return ll.ABORTED;case Ih.OUT_OF_RANGE:return ll.OUT_OF_RANGE;case Ih.UNIMPLEMENTED:return ll.UNIMPLEMENTED;case Ih.DATA_LOSS:return ll.DATA_LOSS;default:return el()}}(Th=Ih||(Ih={}))[Th.OK=0]="OK",Th[Th.CANCELLED=1]="CANCELLED",Th[Th.UNKNOWN=2]="UNKNOWN",Th[Th.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Th[Th.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Th[Th.NOT_FOUND=5]="NOT_FOUND",Th[Th.ALREADY_EXISTS=6]="ALREADY_EXISTS",Th[Th.PERMISSION_DENIED=7]="PERMISSION_DENIED",Th[Th.UNAUTHENTICATED=16]="UNAUTHENTICATED",Th[Th.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Th[Th.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Th[Th.ABORTED=10]="ABORTED",Th[Th.OUT_OF_RANGE=11]="OUT_OF_RANGE",Th[Th.UNIMPLEMENTED=12]="UNIMPLEMENTED",Th[Th.INTERNAL=13]="INTERNAL",Th[Th.UNAVAILABLE=14]="UNAVAILABLE",Th[Th.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ch=function(){function t(t,e){this.H=t,this.root=e||kh.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,kh.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,kh.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Dh(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Dh(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Dh(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Dh(this.root,t,this.H,!0)},t}(),Dh=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),kh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw el();if(this.right.le())throw el();var t=this.left.Ie();if(t!==this.right.Ie())throw el();return t+(this.le()?0:1)},t}();kh.EMPTY=null,kh.RED=!0,kh.Ht=!1,kh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw el()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw el()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw el()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw el()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw el()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new kh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ph=function(){function t(t){this.H=t,this.data=new Ch(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Lh(this.data.te())},t.prototype.ee=function(t){return new Lh(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Lh=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),Rh=new Ch(Nl.H);function Vh(){return Rh}function jh(){return Vh()}var Mh=new Ch(Nl.H);function Fh(){return Mh}var Uh=new Ch(Nl.H);var qh=new Ph(Nl.H);function Bh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=qh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var zh=new Ph(sl);function Gh(){return zh}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hh=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Nl.H(e.key,n.key)}:function(t,e){return Nl.H(t.key,e.key)},this.ge=Fh(),this.Ve=new Ch(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),Kh=function(){function t(){this.be=new Ch(Nl.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):el():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),Yh=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=u}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Hh.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Ff(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Qh=function(){function t(t,e,n,r,i){this.kt=t,this.Fe=e,this.Oe=n,this.ke=r,this.Me=i}return t.Le=function(e,n){var r=new Map;return r.set(e,Xh.$e(e,n)),new t(_l.min(),r,Gh(),Vh(),Bh())},t}(),Xh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.$e=function(e,n){return new t(cl.T,n,Bh(),Bh(),Bh())},t}(),Wh=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},$h=function(t,e){this.targetId=t,this.je=e},Jh=function(t,e,n,r){void 0===n&&(n=cl.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Zh=function(){function t(){this.Ge=0,this.ze=np(),this.He=cl.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Bh(),e=Bh(),n=Bh();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:el()}})),new Xh(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=np()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),tp=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Vh(),this._n=ep(),this.fn=new Ph(sl)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof of?this.wn(r,t.We):t.We instanceof sf&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:el()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(hf(i))if(0===n){var o=new Nl(i.path);this.En(e,o,new sf(o,_l.min()))}else nl(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&hf(o.target)){var s=new Nl(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new sf(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=Bh();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ot||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Qh(t,n,this.fn,this.ln,r);return this.ln=Vh(),this._n=ep(),this.fn=new Ph(sl),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Zh,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Ph(sl),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||$c("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new Zh),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(){return new Ch(Nl.H)}function np(){return new Ch(Nl.H)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rp={asc:"ASCENDING",desc:"DESCENDING"},ip={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},op=function(t,e){this.t=t,this.Bt=e};function sp(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function up(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function ap(t,e){return sp(t,e.j())}function cp(t){return nl(!!t),_l.K((e=kl(t),new wl(e.seconds,e.nanos)));var e}function lp(t,e){return(n=t,new Il(["projects",n.projectId,"databases",n.database])).child("documents").child(e).rt();var n}function fp(t){var e=Il.ot(t);return nl(Lp(e)),e}function hp(t,e){return lp(t.t,e.path)}function pp(t,e){var n=fp(e);if(n.get(1)!==t.t.projectId)throw new fl(ll.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new fl(ll.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Nl(gp(n))}function dp(t,e){return lp(t.t,e)}function vp(t){var e=fp(t);return 4===e.length?Il.ct():gp(e)}function yp(t){return new Il(["projects",t.t.projectId,"databases",t.t.database]).rt()}function gp(t){return nl(t.length>4&&"documents"===t.get(4)),t.Y(5)}function mp(t,e,n){return{name:hp(t,e),fields:n.proto.mapValue.fields}}function bp(t,e){var n,r,i;if(e instanceof gh)n={update:mp(t,e.key,e.value)};else if(e instanceof Ah)n={delete:hp(t,e.key)};else if(e instanceof mh)n={update:mp(t,e.key,e.data),updateMask:Pp(e.Gt)};else{if(!(e instanceof Nh))return el();n={verify:hp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Zf)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof th)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof nh)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof ih)return{fieldPath:e.field.rt(),increment:n.Ut};throw el()}(0,t)}))),e.jt.Wt||(n.currentDocument=(r=t,void 0!==(i=e.jt).updateTime?{updateTime:ap(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:el())),n}function wp(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?ch.updateTime(cp(n.updateTime)):void 0!==n.exists?ch.exists(n.exists):ch.Kt():ch.Kt(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)nl("REQUEST_TIME"===e.setToServerValue),n=new Zf;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new th(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new nh(i)}else"increment"in e?n=new ih(t,e.increment):el();var o=Al.lt(e.fieldPath);return new uh(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=pp(t,e.update.name),s=new tf({mapValue:{fields:e.update.fields}});if(e.updateMask){var u=function(t){var e=t.fieldPaths||[];return new Cl(e.map((function(t){return Al.lt(t)})))}(e.updateMask);return new mh(o,s,u,r,i)}return new gh(o,s,r,i)}if(e.delete){var a=pp(t,e.delete);return new Ah(a,r)}if(e.verify){var c=pp(t,e.verify);return new Nh(c,r)}return el()}function _p(t,e){return{documents:[dp(t,e.path)]}}function Ep(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=dp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=dp(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Jl(t.value))return{unaryFilter:{field:Op(t.field),op:"IS_NAN"}};if($l(t.value))return{unaryFilter:{field:Op(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Jl(t.value))return{unaryFilter:{field:Op(t.field),op:"IS_NOT_NAN"}};if($l(t.value))return{unaryFilter:{field:Op(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Op(t.field),op:xp(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Op((e=t).field),direction:Sp(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,u,a=(s=t,u=e.limit,s.Bt||Ml(u)?u:{value:u});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Ap(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ap(e.endAt)),n}function Ip(t){var e=vp(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){nl(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Tp(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return new Tf(Cp((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var a,c,l=null;n.limit&&(a=n.limit,l=Ml(c="object"==typeof a?a.value:a)?null:c);var f=null;n.startAt&&(f=Np(n.startAt));var h=null;return n.endAt&&(h=Np(n.endAt)),Of(e,i,u,s,l,"F",f,h)}function Tp(t){return t?void 0!==t.unaryFilter?[kp(t)]:void 0!==t.fieldFilter?[Dp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Tp(t)})).reduce((function(t,e){return t.concat(e)})):el():[]}function Ap(t){return{before:t.before,values:t.position}}function Np(t){var e=!!t.before,n=t.values||[];return new Ef(n,e)}function Sp(t){return rp[t]}function xp(t){return ip[t]}function Op(t){return{fieldPath:t.rt()}}function Cp(t){return Al.lt(t.fieldPath)}function Dp(t){return pf.create(Cp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return el()}}(t.fieldFilter.op),t.fieldFilter.value)}function kp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Cp(t.unaryFilter.field);return pf.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Cp(t.unaryFilter.field);return pf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cp(t.unaryFilter.field);return pf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cp(t.unaryFilter.field);return pf.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return el()}}function Pp(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function Lp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rp=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Vp=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&el(),this.Nn=!0,this.xn?this.error?this.Fn(n,this.error):this.On(e,this.result):new t((function(t,i){r.Dn=function(n){r.On(e,n).next(t,i)},r.Cn=function(e){r.Fn(n,e).next(t,i)}}))},t.prototype.kn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Mn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.On=function(e,n){return e?this.Mn((function(){return e(n)})):t.resolve(n)},t.prototype.Fn=function(e,n){return e?this.Mn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Ln=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.$n=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Ln(r)},t}(),jp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Rp,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Up(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=Hp(e.target.error);n.Bn.reject(new Up(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Up(n,o)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||($c("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Bp(e)},t}(),Mp=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(eo())&&Jc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return $c("SimpleDb","Removing database:",t),zp(window.indexedDB.deleteDatabase(t)).kn()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=eo(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Yi(this,void 0,void 0,(function(){var e,n=this;return Qi(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:($c("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Up(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new fl(ll.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Up(t,n))},i.onupgradeneeded=function(t){$c("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){$c("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Yi(this,void 0,void 0,(function(){var i,o,s,u,a;return Qi(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,l;return Qi(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Hn(t)];case 2:return u.db=f.sent(),e=jp.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Vp.reject(t)})).kn(),a={},s.catch((function(){})),[4,e.qn];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),l="FirebaseError"!==c.name&&o<3,$c("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Fp=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return zp(this.Zn.delete())},t}(),Up=function(t){function e(e,n){var r=this;return(r=t.call(this,ll.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Hi(e,t),e}(fl);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t){return"IndexedDbTransactionError"===t.name}var Bp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?($c("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):($c("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),zp(n)},t.prototype.add=function(t){return $c("SimpleDb","ADD",this.store.name,t,t),zp(this.store.add(t))},t.prototype.get=function(t){var e=this;return zp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),$c("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return $c("SimpleDb","DELETE",this.store.name,t),zp(this.store.delete(t))},t.prototype.count=function(){return $c("SimpleDb","COUNT",this.store.name),zp(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){$c("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Vp((function(n,r){e.onerror=function(t){var e=Hp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new Vp((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Fp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Vp){var u=s.catch((function(t){return o.done(),Vp.reject(t)}));n.push(u)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return Vp.Ln(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function zp(t){return new Vp((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Hp(t.target.error);n(e)}}))}var Gp=!1;function Hp(t){var e=Mp.Qn(eo());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new fl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Gp||(Gp=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kp=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Rp,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new fl(ll.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Yp(t,e){if(Jc("AsyncQueue",e+": "+t),qp(t))return new fl(ll.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xp=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Jp(e)),e=$p(t.get(n),e);return Jp(e)}function $p(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Jp(t){return t+""}function Zp(t){var e=t.length;if(nl(e>=2),2===e)return nl(""===t.charAt(0)&&""===t.charAt(1)),Il.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&el(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:el()}o=s+2}return new Il(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var td=function(t,e){this.seconds=t,this.nanoseconds=e},ed=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ed.store="owner",ed.key="owner";var nd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};nd.store="mutationQueues",nd.keyPath="userId";var rd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};rd.store="mutations",rd.keyPath="batchId",rd.userMutationsIndex="userMutationsIndex",rd.userMutationsKeyPath=["userId","batchId"];var id=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Wp(e)]},t.key=function(t,e,n){return[t,Wp(e),n]},t}();id.store="documentMutations",id.PLACEHOLDER=new id;var od=function(t,e){this.path=t,this.readTime=e},sd=function(t,e){this.path=t,this.version=e},ud=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ud.store="remoteDocuments",ud.readTimeIndex="readTimeIndex",ud.readTimeIndexPath="readTime",ud.collectionReadTimeIndex="collectionReadTimeIndex",ud.collectionReadTimeIndexPath=["parentPath","readTime"];var ad=function(t){this.byteSize=t};ad.store="remoteDocumentGlobal",ad.key="remoteDocumentGlobalKey";var cd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};cd.store="targets",cd.keyPath="targetId",cd.queryTargetsIndexName="queryTargetsIndex",cd.queryTargetsKeyPath=["canonicalId","targetId"];var ld=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ld.store="targetDocuments",ld.keyPath=["targetId","path"],ld.documentTargetsIndex="documentTargetsIndex",ld.documentTargetsKeyPath=["path","targetId"];var fd=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};fd.key="targetGlobalKey",fd.store="targetGlobal";var hd=function(t,e){this.collectionId=t,this.parent=e};hd.store="collectionParents",hd.keyPath=["collectionId","parent"];var pd=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};pd.store="clientMetadata",pd.keyPath="clientId";var dd=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};dd.store="bundles",dd.keyPath="bundleId";var vd=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};vd.store="namedQueries",vd.keyPath="name";var yd=Ji(Ji(Ji(Ji([nd.store,rd.store,id.store,ud.store,cd.store,ed.store,fd.store,ld.store],[pd.store]),[ad.store]),[hd.store]),[dd.store,vd.store]),gd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Hi(e,t),e}(Xp);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(t,e){var n=rl(t);return Mp.zn(n.ps,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bd=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=hh(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=ph(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=ph(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Bh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ul(this.mutations,t.mutations,(function(t,e){return vh(t,e)}))&&ul(this.baseMutations,t.baseMutations,(function(t,e){return vh(t,e)}))},t}(),wd=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.Fs=r}return t.from=function(e,n,r){nl(e.mutations.length===r.length);for(var i=Uh,o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),_d=function(t){this.Os=t};function Ed(t,e){if(e.document)return function(t,e,n){var r=pp(t,e.name),i=cp(e.updateTime),o=new tf({mapValue:{fields:e.fields}});return new of(r,i,o,{hasCommittedMutations:!!n})}(t.Os,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Nl.Et(e.noDocument.path),r=Sd(e.noDocument.readTime);return new sf(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Nl.Et(e.unknownDocument.path);return r=Sd(e.unknownDocument.version),new uf(i,r)}return el()}function Id(t,e,n){var r,i,o=Td(n),s=e.key.path.X().it();if(e instanceof of){var u={name:hp(r=t.Os,(i=e).key),fields:i.bt().mapValue.fields,updateTime:sp(r,i.version.j())},a=e.hasCommittedMutations;return new ud(null,null,u,a,o,s)}if(e instanceof sf){var c=e.key.path.it(),l=Nd(e.version);return a=e.hasCommittedMutations,new ud(null,new od(c,l),null,a,o,s)}if(e instanceof uf){var f=e.key.path.it(),h=Nd(e.version);return new ud(new sd(f,h),null,null,!0,o,s)}return el()}function Td(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Ad(t){var e=new wl(t[0],t[1]);return _l.K(e)}function Nd(t){var e=t.j();return new td(e.seconds,e.nanoseconds)}function Sd(t){var e=new wl(t.seconds,t.nanoseconds);return _l.K(e)}function xd(t,e){for(var n=(e.baseMutations||[]).map((function(e){return wp(t.Os,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return wp(t.Os,e)})),u=wl.fromMillis(e.localWriteTimeMs);return new bd(e.batchId,u,n,s)}function Od(t){var e,n,r=Sd(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Sd(t.lastLimboFreeSnapshotVersion):_l.min();return void 0!==t.query.documents?(nl(1===(n=t.query).documents.length),e=jf(Cf(vp(n.documents[0])))):e=jf(Ip(t.query)),new Hf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,cl.fromBase64String(t.resumeToken))}function Cd(t,e){var n,r=Nd(e.kt),i=Nd(e.lastLimboFreeSnapshotVersion);n=hf(e.target)?_p(t.Os,e.target):Ep(t.Os,e.target);var o=e.resumeToken.toBase64();return new cd(e.targetId,lf(e.target),r,o,e.sequenceNumber,i,n)}function Dd(t){var e=Ip({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Mf(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kd=function(){function t(){}return t.prototype.ks=function(t,e){return Pd(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Sd(e.createTime),version:e.version};var e}))},t.prototype.Ms=function(t,e){return Pd(t).put({bundleId:(n=e).id,createTime:Nd(cp(n.createTime)),version:n.version});var n},t.prototype.Ls=function(t,e){return Ld(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Dd(e.bundledQuery),readTime:Sd(e.readTime)};var e}))},t.prototype.$s=function(t,e){return Ld(t).put({name:(n=e).name,readTime:Nd(cp(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function Pd(t){return md(t,dd.store)}function Ld(t){return md(t,vd.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rd=function(){function t(){this.Bs=new Vd}return t.prototype.qs=function(t,e){return this.Bs.add(e),Vp.resolve()},t.prototype.Us=function(t,e){return Vp.resolve(this.Bs.getEntries(e))},t}(),Vd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Ph(Il.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ph(Il.H)).it()},t}(),jd=function(){function t(){this.Qs=new Vd}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:Wp(i)};return Md(t).put(o)}return Vp.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[al(e),""],!1,!0);return Md(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Zp(o.parent))}return n}))},t}();function Md(t){return md(t,hd.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fd={Ks:!1,Ws:0,js:0,Gs:0},Ud=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(e){if(t.code!==ll.FAILED_PRECONDITION||t.message!==Qp)throw t;return $c("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ud.Xs=10,Ud.Zs=1e3,Ud.ti=new Ud(41943040,Ud.Xs,Ud.Zs),Ud.ei=new Ud(-1,0,0);var Bd=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.si(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){xl(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.et=function(){return Ol(this.ii)},t}(),zd=function(){function t(){this.ri=new Bd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:_l.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Vp.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t,e,n){var r=t.store(rd.store),i=t.store(id.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.hs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){nl(1===u)})));for(var c=[],l=0,f=n.mutations;l<f.length;l++){var h=f[l],p=id.key(e,h.key.path,n.batchId);o.push(i.delete(p)),c.push(h.key)}return Vp.Ln(o).next((function(){return c}))}function Hd(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw el();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kd=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return nl(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qd(t).hs({index:rd.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=Xd(t),s=Qd(t);return s.add({}).next((function(u){nl("number"==typeof u);for(var a=new bd(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return bp(t.Os,e)})),i=n.mutations.map((function(e){return bp(t.Os,e)}));return new rd(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,a),l=[],f=new Ph((function(t,e){return sl(t.rt(),e.rt())})),h=0,p=r;h<p.length;h++){var d=p[h],v=id.key(i.userId,d.key.path,u);f=f.add(d.key.path.X()),l.push(s.put(c)),l.push(o.put(v,id.PLACEHOLDER))}return f.forEach((function(e){l.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[u]=a.keys()})),Vp.Ln(l).next((function(){return a}))}))},t.prototype.Pi=function(t,e){var n=this;return Qd(t).get(e).next((function(t){return t?(nl(t.userId===n.userId),xd(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Vp.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Qd(t).hs({index:rd.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(nl(e.batchId>=r),o=xd(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Qd(t).hs({index:rd.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qd(t).rs(rd.userMutationsIndex,n).next((function(t){return t.map((function(t){return xd(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=id.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Xd(t).hs({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],l=Zp(a);if(u===n.userId&&e.path.isEqual(l))return Qd(t).get(c).next((function(t){if(!t)throw el();nl(t.userId===n.userId),o.push(xd(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new Ph(sl),i=[];return e.forEach((function(e){var o=id.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Xd(t).hs({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=Zp(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Vp.Ln(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=id.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new Ph(sl);return Xd(t).hs({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],l=Zp(a);s===n.userId&&r.nt(l)?l.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Si(t,u)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Qd(t).get(e).next((function(t){if(null===t)throw el();nl(t.userId===n.userId),r.push(xd(n.Qt,t))})))})),Vp.Ln(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return Gd(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),Vp.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.Fi=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return Vp.resolve();var r=IDBKeyRange.lowerBound(id.prefixForUser(e.userId)),i=[];return Xd(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Zp(t[1]);i.push(o)}else r.done()})).next((function(){nl(0===i.length)}))}))},t.prototype.Oi=function(t,e){return Yd(t,this.userId,e)},t.prototype.ki=function(t){var e=this;return Wd(t).get(this.userId).next((function(t){return t||new nd(e.userId,-1,"")}))},t}();function Yd(t,e,n){var r=id.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Xd(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Qd(t){return md(t,rd.store)}function Xd(t){return md(t,id.store)}function Wd(t){return md(t,nd.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $d=function(){function t(t){this.Mi=t}return t.prototype.next=function(){return this.Mi+=2,this.Mi},t.Li=function(){return new t(0)},t.$i=function(){return new t(-1)},t}(),Jd=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new $d(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return _l.K(new wl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return Zd(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return nl(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return Zd(t).hs((function(s,u){var a=Od(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Ji(t,a)))})).next((function(){return Vp.Ln(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return Zd(t).hs((function(t,n){var r=Od(n);e(r)}))},t.prototype.qi=function(t){return tv(t).get(fd.key).next((function(t){return nl(null!==t),t}))},t.prototype.Ui=function(t,e){return tv(t).put(fd.key,e)},t.prototype.Gi=function(t,e){return Zd(t).put(Cd(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=lf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Zd(t).hs({range:r,index:cd.queryTargetsIndexName},(function(t,n,r){var o=Od(n);ff(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=ev(t);return e.forEach((function(e){var s=Wp(e.path);i.push(o.put(new ld(n,s))),i.push(r.Ti.nr(t,n,e))})),Vp.Ln(i)},t.prototype.sr=function(t,e,n){var r=this,i=ev(t);return Vp.forEach(e,(function(e){var o=Wp(e.path);return Vp.Ln([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=ev(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ev(t),i=Bh();return r.hs({range:n,us:!0},(function(t,e,n){var r=Zp(t[1]),o=new Nl(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Oi=function(t,e){var n=Wp(e.path),r=IDBKeyRange.bound([n],[al(n)],!1,!0),i=0;return ev(t).hs({index:ld.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return Zd(t).get(e).next((function(t){return t?Od(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){return md(t,cd.store)}function tv(t){return md(t,fd.store)}function ev(t){return md(t,ld.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=sl(n,i);return 0===s?sl(r,o):s}var rv=function(){function t(t){this.cr=t,this.buffer=new Ph(nv),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();nv(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),iv=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;$c("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return Yi(e,void 0,void 0,(function(){var e;return Qi(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return qp(e=n.sent())?($c("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,qd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ov=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Vp.resolve(bl.q);var r=new rv(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?($c("LruGarbageCollector","Garbage collection skipped; disabled"),Vp.resolve(Fd)):this.pr(t).next((function(r){return r<n.params.zs?($c("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Fd):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,u,a,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?($c("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.gr(t,n)})).next((function(t){return a=Date.now(),Wc()<=go.DEBUG&&$c("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-l)+"ms"),Vp.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),sv=function(){function t(t,e){this.db=t,this.lr=new ov(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return uv(t,n)},t.prototype.ir=function(t,e,n){return uv(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return uv(t,e)},t.prototype.Cr=function(t,e){return r=e,i=!1,Wd(n=t).ls((function(t){return Yd(n,t,r).next((function(t){return t&&(i=!0),Vp.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.gr=function(t,e){var n=this,r=this.db.Fr().Nr(),i=[],o=0;return this.Dr(t,(function(s,u){if(u<=e){var a=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),ev(t).delete([0,Wp(s.path)])}))}));i.push(a)}})).next((function(){return Vp.Ln(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Mt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Or=function(t,e){return uv(t,e)},t.prototype.Dr=function(t,e){var n,r=ev(t),i=bl.q;return r.hs({index:ld.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==bl.q&&e(new Nl(Zp(n)),i),i=u,n=s):i=bl.q})).next((function(){i!==bl.q&&e(new Nl(Zp(n)),i)}))},t.prototype.pr=function(t){return this.db.Fr().kr(t)},t}();function uv(t,e){return ev(t).put((n=e,r=t.bs,new ld(0,Wp(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var av=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return fv(t).put(hv(e),n)},t.prototype.li=function(t,e){var n=fv(t),r=hv(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Mr(t,r)}))},t.prototype._i=function(t,e){var n=this;return fv(t).get(hv(e)).next((function(t){return n.Lr(t)}))},t.prototype.$r=function(t,e){var n=this;return fv(t).get(hv(e)).next((function(t){var e=n.Lr(t);return e?{hi:e,size:Hd(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=jh();return this.Br(t,e,(function(t,e){var i=n.Lr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=jh(),i=new Ch(Nl.H);return this.Br(t,e,(function(t,e){var o=n.Lr(e);o?(r=r.zt(t,o),i=i.zt(t,Hd(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return Vp.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return fv(t).hs({range:r},(function(t,e,r){for(var s=Nl.Et(t);o&&Nl.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=Fh(),o=e.path.length+1,s={};if(n.isEqual(_l.min())){var u=e.path.it();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.it(),c=Td(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=ud.collectionReadTimeIndex}return fv(t).hs(s,(function(t,n,s){if(t.length===o){var u=Ed(r.Qt,n);e.path.nt(u.key.path)?u instanceof of&&Bf(e,u)&&(i=i.zt(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new cv(this,!!t&&t.Wr)},t.prototype.kr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return lv(t).get(ad.key).next((function(t){return nl(!!t),t}))},t.prototype.Mr=function(t,e){return lv(t).put(ad.key,e)},t.prototype.Lr=function(t){if(t){var e=Ed(this.Qt,t);return e instanceof sf&&e.version.isEqual(_l.min())?null:e}return null},t}(),cv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Bd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Hi(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Ph((function(t,e){return sl(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var u=e.Gr.get(o);if(s.hi){var a=Id(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=Hd(a);r+=c-u,n.push(e.jr.ai(t,o,a))}else if(r-=u,e.Wr){var l=Id(e.jr.Qt,new sf(o,_l.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),Vp.Ln(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.$r(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(zd);function lv(t){return md(t,ad.store)}function fv(t){return md(t,ud.store)}function hv(t){return t.path.it()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pv=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;nl(n<r&&n>=0&&r<=11);var o=new jp("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(ed.store),function(t){t.createObjectStore(nd.store,{keyPath:nd.keyPath}),t.createObjectStore(rd.store,{keyPath:rd.keyPath,autoIncrement:!0}).createIndex(rd.userMutationsIndex,rd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(id.store)}(t),dv(t),function(t){t.createObjectStore(ud.store)}(t));var s=Vp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ld.store),t.deleteObjectStore(cd.store),t.deleteObjectStore(fd.store)}(t),dv(t)),s=s.next((function(){return function(t){var e=t.store(fd.store),n=new fd(0,0,_l.min().j(),0);return e.put(fd.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(rd.store).rs().next((function(n){t.deleteObjectStore(rd.store),t.createObjectStore(rd.store,{keyPath:rd.keyPath,autoIncrement:!0}).createIndex(rd.userMutationsIndex,rd.userMutationsKeyPath,{unique:!0});var r=e.store(rd.store),i=n.map((function(t){return r.put(t)}));return Vp.Ln(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(pd.store,{keyPath:pd.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ad.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ud.store);e.createIndex(ud.readTimeIndex,ud.readTimeIndexPath,{unique:!1}),e.createIndex(ud.collectionReadTimeIndex,ud.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(dd.store,{keyPath:dd.keyPath})}(t),function(t){t.createObjectStore(vd.store,{keyPath:vd.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(ud.store).hs((function(t,n){e+=Hd(n)})).next((function(){var n=new ad(e);return t.store(ad.store).put(ad.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(nd.store),r=t.store(rd.store);return n.rs().next((function(n){return Vp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(rd.userMutationsIndex,i).next((function(r){return Vp.forEach(r,(function(r){nl(r.userId===n.userId);var i=xd(e.Qt,r);return Gd(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(ld.store),n=t.store(ud.store);return t.store(fd.store).get(fd.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new Il(n),s=[0,Wp(o)];r.push(e.get(s).next((function(n){return n?Vp.resolve():(r=o,e.put(new ld(0,Wp(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return Vp.Ln(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(hd.store,{keyPath:hd.keyPath});var n=e.store(hd.store),r=new Vd,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:Wp(i)})}};return e.store(ud.store).hs({us:!0},(function(t,e){var n=new Il(t);return i(n.X())})).next((function(){return e.store(id.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Zp(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(cd.store);return n.hs((function(t,r){var i=Od(r),o=Cd(e.Qt,i);return n.put(o)}))},t}();function dv(t){t.createObjectStore(ld.store,{keyPath:ld.keyPath}).createIndex(ld.documentTargetsIndex,ld.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(cd.store,{keyPath:cd.keyPath}).createIndex(cd.queryTargetsIndexName,cd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fd.store)}var vv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yv=function(){function t(e,n,r,i,o,s,u,a,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=u,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new fl(ll.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var f,h;this.Ti=new sv(this,i),this.ho=n+"main",this.Qt=new _d(a),this.lo=new Mp(this.ho,11,new pv(this.Qt)),this._o=new Jd(this.Ti,this.Qt),this.Ei=new jd,this.fo=(f=this.Qt,h=this.Ei,new av(f,h)),this.wo=new kd,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&Jc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new fl(ll.FAILED_PRECONDITION,vv);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new bl(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Yi(e,void 0,void 0,(function(){return Qi(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return Yi(e,void 0,void 0,(function(){return Qi(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return Yi(e,void 0,void 0,(function(){return Qi(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return mv(e).put(new pd(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(qp(e))return $c("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return $c("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return gv(t).get(ed.key).next((function(t){return Vp.resolve(e.Do(t))}))},t.prototype.Co=function(t){return mv(t).delete(this.clientId)},t.prototype.xo=function(){return Yi(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Qi(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=md(t,pd.store);return e.rs().next((function(t){var n=i.Fo(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Vp.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Oo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Vp.resolve(!0):gv(t).get(ed.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.ko(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new fl(ll.FAILED_PRECONDITION,vv);return!1}}return!(!e.networkEnabled||!e.inForeground)||mv(t).rs().next((function(t){return void 0===e.Fo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&$c("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Mo=function(){return Yi(this,void 0,void 0,(function(){var t=this;return Qi(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Lo(),this.co&&(this.co.cancel(),this.co=null),this.$o(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[ed.store,pd.store],(function(e){var n=new gd(e,bl.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.Fo=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.ko(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return mv(e).rs().next((function(e){return t.Fo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return Kd.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.Fr=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;$c("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,yd,(function(o){return i=new gd(o,r.so?r.so.next():bl.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw Jc("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new fl(ll.FAILED_PRECONDITION,Qp);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return gv(t).get(ed.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.ko(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new fl(ll.FAILED_PRECONDITION,vv)}))},t.prototype.So=function(t){var e=new ed(this.clientId,this.allowTabSynchronization,Date.now());return gv(t).put(ed.key,e)},t.Kn=function(){return Mp.Kn()},t.prototype.vo=function(t){var e=this,n=gv(t);return n.get(ed.key).next((function(t){return e.Do(t)?($c("IndexedDbPersistence","Releasing primary lease."),n.delete(ed.key)):Vp.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Jc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.$o=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Lo(),e.Zr.Ps((function(){return e.Mo()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.ko=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Oo(t)));return $c("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return Jc("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.Lo=function(){if(this.Eo)try{this.Eo.setItem(this.Oo(this.clientId),String(Date.now()))}catch(t){Jc("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Oo(this.clientId))}catch(t){}},t.prototype.Oo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function gv(t){return md(t,ed.store)}function mv(t){return md(t,pd.store)}function bv(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var wv=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=jh();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=Vh();return i.forEach((function(t,e){e||(e=new sf(t,_l.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return r=e,Nl.wt(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.tc(t,e.path):Rf(e)?this.ec(t,e,n):this.nc(t,e,n);var r},t.prototype.tc=function(t,e){return this.Ho(t,new Nl(e)).next((function(t){var e=Fh();return t instanceof of&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=Fh();return this.Ei.Us(t,i).next((function(s){return Vp.forEach(s,(function(s){var u,a,c=(u=e,a=s.child(i),new xf(a,null,u.xt.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));return r.nc(t,c,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,l=ph(a,r.get(c),o.vs);r=l instanceof of?r.zt(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Bf(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=Bh(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof mh&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof of&&(c=c.zt(t,e))})),c}))},t}(),_v=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Bh(),i=Bh(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Ev=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.xt.length||1===i.xt.length&&i.xt[0].field.ut())||n.isEqual(_l.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(i){var s=o.hc(e,i);return(Df(e)||kf(e))&&o.lc(e.limitType,s,r,n)?o.uc(t,e):(Wc()<=go.DEBUG&&$c("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),qf(e)),o.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new Ph(zf(t));return e.forEach((function(e,r){r instanceof of&&Bf(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return Wc()<=go.DEBUG&&$c("QueryEngine","Using full collection scan to execute query:",qf(e)),this.ac.Kr(t,e,_l.min())},t}(),Iv=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Ch(sl),this.dc=new Bd((function(t){return lf(t)}),ff),this.wc=_l.min(),this.zo=t.Qo(n),this.Ec=t.Fr(),this._o=t.Sr(),this.Tc=new wv(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t,e,n,r){return new Iv(t,e,n,r)}function Av(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i,o;return Qi(this,(function(s){switch(s.label){case 0:return n=rl(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new wv(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=Bh(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var l=0,f=c.mutations;l<f.length;l++){var h=f[l];s=s.add(h.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function Nv(t,e){var n=rl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,u,a,c,l=e.batch.keys(),f=n.Ec.Nr({Wr:!0});return(r=n,i=t,o=e,s=f,u=o.batch,a=u.keys(),c=Vp.resolve(),a.forEach((function(t){c=c.next((function(){return s._i(i,t)})).next((function(e){var n=e,r=o.Fs.get(t);nl(null!==r),(!n||n.version._(r)<0)&&(n=u.Ss(t,n,o))&&s.ai(n,o.Ns)}))})),c.next((function(){return r.zo.Ci(i,u)}))).next((function(){return f.apply(t)})).next((function(){return n.zo.Fi(t)})).next((function(){return n.Tc.Xo(t,l)}))}))}function Sv(t){var e=rl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function xv(t,e){var n=rl(t),r=e.kt,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.Fe.forEach((function(e,o){var u,a,c,l=i.get(o);if(l){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var f=e.resumeToken;if(f.l()>0){var h=l.Lt(f,r).Mt(t.bs);i=i.zt(o,h),u=l,c=e,nl((a=h).resumeToken.l()>0),(0===u.resumeToken.l()||a.kt.W()-u.kt.W()>=3e8||c.qe.size+c.Ue.size+c.Qe.size>0)&&s.push(n._o.Hi(t,h))}}}));var u=Vh();if(e.ke.forEach((function(r,i){e.Me.has(r)&&s.push(n.persistence.Ti.Or(t,r))})),s.push(function(t,e,n,r,i){var o=Bh();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Vh();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof sf&&s.version.isEqual(_l.min())?(e.li(n,a),o=o.zt(n,s)):null==u||s.version._(u.version)>0||0===s.version._(u.version)&&u.hasPendingWrites?(e.ai(s,a),o=o.zt(n,s)):$c("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}(t,o,e.ke,r,void 0).next((function(t){u=t}))),!r.isEqual(_l.min())){var a=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(a)}return Vp.Ln(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,u)}))})).then((function(t){return n.fc=i,t}))}function Ov(t,e){var n=rl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function Cv(t,e){var n=rl(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,Vp.resolve(r)):n._o.Bi(t).next((function(i){return r=new Hf(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.kt._(r.kt)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function Dv(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i,o,s;return Qi(this,(function(u){switch(u.label){case 0:r=rl(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!qp(s=u.sent()))throw s;return $c("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function kv(t,e,n){var r=rl(t),i=_l.min(),o=Bh();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,u=t,a=jf(e),c=rl(s),l=c.dc.get(a),void 0!==l?Vp.resolve(c.fc.get(l)):c._o.tr(u,a)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:_l.min(),n?o:Bh())})).next((function(t){return{documents:t,Rc:o}}));var s,u,a,c,l}))}function Pv(t,e){var n=rl(t),r=rl(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function Lv(t){var e=rl(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.Ec,r=t,i=e.wc,o=rl(n),s=Vh(),u=Td(i),a=fv(r),c=IDBKeyRange.lowerBound(u,!0),a.hs({index:ud.readTimeIndex,range:c},(function(t,e){var n=Ed(o.Qt,e);s=s.zt(n.key,n),u=e.readTime})).next((function(){return{Go:s,readTime:Ad(u)}}));var n,r,i,o,s,u,a,c})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function Rv(t){return Yi(this,void 0,void 0,(function(){var e;return Qi(this,(function(n){return[2,(e=rl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=fv(t),n=_l.min(),e.hs({index:ud.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Ad(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.wc=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vv=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.ks=function(t,e){return Vp.resolve(this.Vc.get(e))},t.prototype.Ms=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:cp(n.createTime)}),Vp.resolve()},t.prototype.Ls=function(t,e){return Vp.resolve(this.bc.get(e))},t.prototype.$s=function(t,e){return this.bc.set(e.name,{name:(n=e).name,query:Dd(n.bundledQuery),readTime:cp(n.readTime)}),Vp.resolve();var n},t}(),jv=function(){function t(){this.vc=new Ph(Mv.Sc),this.Dc=new Ph(Mv.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Mv(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new Mv(t,e))},t.prototype.Fc=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Oc=function(t){var e=this,n=new Nl(new Il([])),r=new Mv(n,t),i=new Mv(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.kc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.Mc=function(t){var e=new Nl(new Il([])),n=new Mv(e,t),r=new Mv(e,t+1),i=Bh();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Oi=function(t){var e=new Mv(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Mv=function(){function t(t,e){this.key=t,this.Lc=e}return t.Sc=function(t,e){return Nl.H(t.key,e.key)||sl(t.Lc,e.Lc)},t.Cc=function(t,e){return sl(t.Lc,e.Lc)||Nl.H(t.key,e.key)},t}(),Fv=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.$c=1,this.Bc=new Ph(Mv.Sc)}return t.prototype.Ai=function(t){return Vp.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.$c;this.$c++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new bd(i,e,n,r);this.zo.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.Bc=this.Bc.add(new Mv(a.key,i)),this.Ei.qs(t,a.key.path.X())}return Vp.resolve(o)},t.prototype.Pi=function(t,e){return Vp.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return Vp.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return Vp.resolve(0===this.zo.length?-1:this.$c-1)},t.prototype.pi=function(t){return Vp.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Mv(e,0),i=new Mv(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Lc);o.push(e)})),Vp.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Ph(sl);return e.forEach((function(t){var e=new Mv(t,0),i=new Mv(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Lc)}))})),Vp.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Nl.wt(i)||(i=i.child(""));var o=new Mv(new Nl(i),0),s=new Ph(sl);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Lc)),!0)}),o),Vp.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;nl(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Vp.forEach(e.mutations,(function(i){var o=new Mv(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Oi=function(t,e){var n=new Mv(e,0),r=this.Bc.Re(n);return Vp.resolve(e.isEqual(r&&r.key))},t.prototype.Fi=function(t){return this.zo.length,Vp.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Uv=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Ch(Nl.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Vp.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=jh();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),Vp.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=Fh(),i=new Nl(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),u=s.key,a=s.value,c=a.hi,l=a.readTime;if(!e.path.nt(u.path))break;l._(n)<=0||c instanceof of&&Bf(e,c)&&(r=r.zt(c.key,c))}return Vp.resolve(r)},t.prototype.jc=function(t,e){return Vp.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new qv(this)},t.prototype.kr=function(t){return Vp.resolve(this.size)},t}(),qv=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Hi(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),Vp.Ln(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(zd),Bv=function(){function t(t){this.persistence=t,this.Gc=new Bd((function(t){return lf(t)}),ff),this.lastRemoteSnapshotVersion=_l.min(),this.highestTargetId=0,this.zc=0,this.Hc=new jv,this.targetCount=0,this.Jc=$d.Li()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),Vp.resolve()},t.prototype.Qi=function(t){return Vp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Vp.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Vp.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Vp.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new $d(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Vp.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Vp.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Oc(e.targetId),this.targetCount-=1,Vp.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,u.targetId)),i++)})),Vp.Ln(o).next((function(){return i}))},t.prototype.Zi=function(t){return Vp.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Vp.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Vp.resolve()},t.prototype.sr=function(t,e,n){this.Hc.Fc(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),Vp.Ln(i)},t.prototype.Yi=function(t,e){return this.Hc.Oc(e),Vp.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.Mc(e);return Vp.resolve(n)},t.prototype.Oi=function(t,e){return Vp.resolve(this.Hc.Oi(e))},t}(),zv=function(){function t(t,e){var n,r=this;this.Yc={},this.so=new bl(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Bv(this),this.Ei=new Rd,this.fo=(n=this.Ei,new Uv(n,(function(t){return r.Ti.Xc(t)}))),this.Qt=new _d(e),this.wo=new Vv(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Mo=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Fv(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.Fr=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;$c("MemoryPersistence","Starting transaction:",t);var i=new Gv(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).kn().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return Vp.$n(Object.values(this.Yc).map((function(n){return function(){return n.Oi(t,e)}})))},t}(),Gv=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Hi(e,t),e}(Xp),Hv=function(){function t(t){this.persistence=t,this.na=new jv,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw el()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Vp.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Vp.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Vp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Oc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.Fr().Nr();return Vp.forEach(this.ra,(function(r){var i=Nl._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Or=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Vp.$n([function(){return Vp.resolve(n.na.Oi(e))},function(){return n.persistence.Sr().Oi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t,e){return"firestore_clients_"+t+"_"+e}function Yv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function Qv(t,e){return"firestore_targets_"+t+"_"+e}var Xv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new fl(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Jc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new fl(r.error.code,r.error.message)),i?new t(e,r.state,o):(Jc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),$v=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Gh(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ul(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Jc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Jv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Jc("SharedClientState","Failed to parse online state: "+e),null)},t}(),Zv=function(){function t(){this.activeTargetIds=Gh()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ty=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.M=null,this.da=this.wa.bind(this),this.Ea=new Ch(sl),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=Kv(this.persistenceKey,this.la),this.ma="firestore_sequence_number_"+this.persistenceKey,this.Ea=this.Ea.zt(this.la,new Zv),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Yi(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,l,f=this;return Qi(this,(function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(Kv(this.persistenceKey,r)))&&(o=$v.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(u=this.pa(s))&&this.ba(u),a=0,c=this.Ta;a<c.length;a++)l=c[a],this.wa(l);return this.Ta=[],this.window.addEventListener("unload",(function(){return f.Mo()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.Fa(t)},t.prototype.Oa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(Qv(this.persistenceKey,t));if(n){var r=Wv.ca(t,n);r&&(e=r.state)}}return this.ka.ua(t),this.Va(),e},t.prototype.Ma=function(t){this.ka.ha(t),this.Va()},t.prototype.La=function(t){return this.ka.activeTargetIds.has(t)},t.prototype.$a=function(t){this.removeItem(Qv(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.Fa(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.Mo=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return $c("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){$c("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){$c("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if($c("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void Jc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return Yi(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Qi(this,(function(u){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=bl.q;if(null!=t)try{var n=JSON.parse(t);nl("number"==typeof n),e=n}catch(r){Jc("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==bl.q&&this.M(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ka",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.ka.aa())},t.prototype.xa=function(t,e,n){var r=new Xv(this.currentUser,t,e,n),i=Yv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.Fa=function(t){var e=Yv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=Qv(this.persistenceKey,t),i=new Wv(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return $v.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Xv.ca(new pl(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return Wv.ca(r,e)},t.prototype.pa=function(t){return Jv.ca(t)},t.prototype.Ya=function(t){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:($c("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this._a.su(s,u).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Gh();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),ey=function(){function t(){this.iu=new Zv,this.ru={},this.fa=null,this.M=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Oa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.Ma=function(t){this.iu.ha(t)},t.prototype.La=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.$a=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new Zv,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.Mo=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),ny=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.Mo=function(){},t}(),ry=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.Mo=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){$c("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){$c("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),iy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},oy=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),sy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Hi(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new Kc;s.listenOnce(qc.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Uc.NO_ERROR:var e=s.getResponseJson();$c("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Uc.TIMEOUT:$c("Connection",'RPC "'+t+'" timed out'),o(new fl(ll.DEADLINE_EXCEEDED,"Request time out"));break;case Uc.HTTP_ERROR:var n=s.getStatus();if($c("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=(a=r.status,c=a.toLowerCase().replace(/_/g,"-"),Object.values(ll).indexOf(c)>=0?c:ll.UNKNOWN);o(new fl(u,r.message))}else o(new fl(ll.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new fl(ll.UNAVAILABLE,"Connection failed."));break;default:el()}}finally{$c("Connection",'RPC "'+t+'" completed.')}var a,c}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Cu=function(t,e){var n,r,i=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new Rc,s=ju(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(u.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(eo())||"object"==typeof navigator&&"ReactNative"===navigator.product||eo().indexOf("Electron/")>=0||((r=eo()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||eo().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(u.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");$c("Connection","Creating WebChannel: "+a,u);var c=o.createWebChannel(a,u),l=!1,f=!1,h=new oy({fu:function(t){f?$c("Connection","Not sending because WebChannel is closed:",t):(l||($c("Connection","Opening WebChannel transport."),c.open(),l=!0),$c("Connection","WebChannel sending:",t),c.send(t))},du:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,Hc.EventType.OPEN,(function(){f||$c("Connection","WebChannel transport opened.")})),p(c,Hc.EventType.CLOSE,(function(){f||(f=!0,$c("Connection","WebChannel transport closed"),h.Ru())})),p(c,Hc.EventType.ERROR,(function(t){f||(f=!0,Zc("Connection","WebChannel transport errored:",t),h.Ru(new fl(ll.UNAVAILABLE,"The operation could not be completed")))})),p(c,Hc.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];nl(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){$c("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ih[t];if(void 0!==e)return Oh(e)}(o),u=i.message;void 0===s&&(s=ll.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),f=!0,h.Ru(new fl(s,u)),c.close()}else $c("Connection","WebChannel received:",n),h.Pu(n)}})),p(s,Bc.STAT_EVENT,(function(t){t.stat===zc?$c("Connection","Detected buffering proxy"):t.stat===Gc&&$c("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Au()}),0),h},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);$c("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return $c("RestConnection","Received: ",t),t}),(function(e){throw Zc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.6",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=iy[t];return this.gu+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uy(){return"undefined"!=typeof window?window:null}function ay(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){return new op(t,!0)}var ly=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.Fu=i,this.Ou=0,this.ku=null,this.Mu=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ou=0},t.prototype.Lu=function(){this.Ou=this.Fu},t.prototype.$u=function(t){var e=this;this.cancel();var n=Math.floor(this.Ou+this.Bu()),r=Math.max(0,Date.now()-this.Mu),i=Math.max(0,n-r);i>0&&$c("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ou+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ku=this.Zr.Tr(this.fs,i,(function(){return e.Mu=Date.now(),t()})),this.Ou*=this.Nu,this.Ou<this.xu&&(this.Ou=this.xu),this.Ou>this.Fu&&(this.Ou=this.Fu)},t.prototype.qu=function(){null!==this.ku&&(this.ku.Rs(),this.ku=null)},t.prototype.cancel=function(){null!==this.ku&&(this.ku.cancel(),this.ku=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Ou},t}(),fy=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new ly(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===ll.RESOURCE_EXHAUSTED?(Jc(e.toString()),Jc("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Lu()):e&&e.code===ll.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new fl(ll.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.$u((function(){return Yi(t,void 0,void 0,(function(){return Qi(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return $c("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():($c("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),hy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Hi(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:el(),o=e.targetChange.targetIds||[],s=function(t,e){return t.Bt?(nl(void 0===e||"string"==typeof e),cl.fromBase64String(e||"")):(nl(void 0===e||e instanceof Uint8Array),cl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),u=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ll.UNKNOWN:Oh(t.code);return new fl(e,t.message||"")}(a);n=new Jh(i,o,s,u||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=pp(t,i.document.name),s=cp(i.document.updateTime);var a=new tf({mapValue:{fields:i.document.fields}}),c=(u=new of(o,s,a,{}),i.targetIds||[]),l=i.removedTargetIds||[];n=new Wh(c,l,u.key,u)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=pp(t,i.document),s=i.readTime?cp(i.readTime):_l.min(),a=new sf(o,s),u=i.removedTargetIds||[],n=new Wh([],u,a.key,a);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=pp(t,i.document),s=i.removedTargetIds||[],n=new Wh([],s,o,null);else{if(!("filter"in e))return el();e.filter;var f=e.filter;f.targetId,i=f.count||0,o=new Sh(i),s=f.targetId,n=new $h(s,o)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return _l.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?_l.min():e.readTime?cp(e.readTime):_l.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e,n,r,i,o={};o.database=yp(this.Qt),o.addTarget=(e=this.Qt,i=(n=t).target,(r=hf(i)?{documents:_p(e,i)}:{query:Ep(e,i)}).targetId=n.targetId,n.resumeToken.l()>0?r.resumeToken=up(e,n.resumeToken):n.kt._(_l.min())>0&&(r.readTime=sp(e,n.kt.j())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return el()}}(0,e.Ot);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);s&&(o.labels=s),this.th(o)},e.prototype.hh=function(t){var e={};e.database=yp(this.Qt),e.removeTarget=t,this.th(e)},e}(fy),py=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Hi(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(nl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(nl(void 0!==i),r.map((function(t){return function(t,e){var n=t.updateTime?cp(t.updateTime):cp(e);n.isEqual(_l.min())&&(n=cp(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new ah(n,r)}(t,i)}))):[]),n=cp(t.commitTime);return this.listener.dh(n,e)}var r,i;return nl(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=yp(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return bp(e.Qt,t)}))};this.th(n)},e}(fy),dy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Hi(e,t),e.prototype.Ih=function(){if(this.Th)throw new fl(ll.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===ll.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===ll.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),vy=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(Jc(e),this.Rh=!1):$c("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),yy=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.Fh=[],this.Oh=i,this.Oh.ou((function(t){n.Ps((function(){return Yi(o,void 0,void 0,(function(){return Qi(this,(function(t){switch(t.label){case 0:return Ay(this)?($c("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Yi(this,void 0,void 0,(function(){var e;return Qi(this,(function(n){switch(n.label){case 0:return(e=rl(t)).Nh.add(4),[4,my(e)];case 1:return n.sent(),e.kh.set("Unknown"),e.Nh.delete(4),[4,gy(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.kh=new vy(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t){return Yi(this,void 0,void 0,(function(){var e,n;return Qi(this,(function(r){switch(r.label){case 0:if(!Ay(t))return[3,4];e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function my(t){return Yi(this,void 0,void 0,(function(){var e,n;return Qi(this,(function(r){switch(r.label){case 0:e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function by(t,e){var n=rl(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Ty(n)?Iy(n):Uy(n).Hu()&&_y(n,e))}function wy(t,e){var n=rl(t),r=Uy(n);n.xh.delete(e),r.Hu()&&Ey(n,e),0===n.xh.size&&(r.Hu()?r.Xu():Ay(n)&&n.kh.set("Unknown"))}function _y(t,e){t.Mh.on(e.targetId),Uy(t).uh(e)}function Ey(t,e){t.Mh.on(e),Uy(t).hh(e)}function Iy(t){t.Mh=new tp({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Uy(t).start(),t.kh.Ph()}function Ty(t){return Ay(t)&&!Uy(t).zu()&&t.xh.size>0}function Ay(t){return 0===rl(t).Nh.size}function Ny(t){t.Mh=void 0}function Sy(t){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(e){return t.xh.forEach((function(e,n){_y(t,e)})),[2]}))}))}function xy(t,e){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(n){return Ny(t),Ty(t)?(t.kh.Vh(e),Iy(t)):t.kh.set("Unknown"),[2]}))}))}function Oy(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i,o;return Qi(this,(function(s){switch(s.label){case 0:if(t.kh.set("Online"),!(e instanceof Jh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i,o;return Qi(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.xh.has(o)?[4,t.Dh.Lh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.xh.delete(o),t.Mh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),$c("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Cy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Wh?t.Mh.dn(e):e instanceof $h?t.Mh.Pn(e):t.Mh.Tn(e),n.isEqual(_l.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Sv(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,(u=t,a=n,c=u.Mh.Vn(a),c.Fe.forEach((function(t,e){if(t.resumeToken.l()>0){var n=u.xh.get(e);n&&u.xh.set(e,n.Lt(t.resumeToken,a))}})),c.Oe.forEach((function(t){var e=u.xh.get(t);if(e){u.xh.set(t,e.Lt(cl.T,e.kt)),Ey(u,t);var n=new Hf(e.target,t,1,e.sequenceNumber);_y(u,n)}})),u.Dh.$h(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return $c("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Cy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var u,a,c}))}))}function Cy(t,e,n){return Yi(this,void 0,void 0,(function(){var r=this;return Qi(this,(function(i){switch(i.label){case 0:if(!qp(e))throw e;return t.Nh.add(1),[4,my(t)];case 1:return i.sent(),t.kh.set("Offline"),n||(n=function(){return Sv(t.bh)}),t._s.po((function(){return Yi(r,void 0,void 0,(function(){return Qi(this,(function(e){switch(e.label){case 0:return $c("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,gy(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Dy(t,e){return e().catch((function(n){return Cy(t,n,e)}))}function ky(t){return Yi(this,void 0,void 0,(function(){var e,n,r,i,o;return Qi(this,(function(s){switch(s.label){case 0:e=rl(t),n=qy(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!(Ay(u=e)&&u.Ch.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Ov(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=qy(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Cy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Py(e)&&Ly(e),[2]}var u}))}))}function Py(t){return Ay(t)&&!qy(t).zu()&&t.Ch.length>0}function Ly(t){qy(t).start()}function Ry(t){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(e){return qy(t).Eh(),[2]}))}))}function Vy(t){return Yi(this,void 0,void 0,(function(){var e,n,r,i;return Qi(this,(function(o){for(e=qy(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function jy(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i;return Qi(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=wd.from(r,e,n),[4,Dy(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,ky(t)];case 2:return o.sent(),[2]}}))}))}function My(t,e){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(n){switch(n.label){case 0:return e&&qy(t)._h?[4,function(t,e){return Yi(this,void 0,void 0,(function(){var n,r;return Qi(this,(function(i){switch(i.label){case 0:return xh(r=e.code)&&r!==ll.ABORTED?(n=t.Ch.shift(),qy(t).Yu(),[4,Dy(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,ky(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Py(t)&&Ly(t),[2]}}))}))}function Fy(t,e){return Yi(this,void 0,void 0,(function(){var n;return Qi(this,(function(r){switch(r.label){case 0:return n=rl(t),e?(n.Nh.delete(2),[4,gy(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,my(n)]);case 3:r.sent(),n.kh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Uy(t){var e,n,r,i,o=this;return t.Uh||(t.Uh=(e=t.Sh,n=t._s,r={wu:Sy.bind(null,t),Tu:xy.bind(null,t),ah:Oy.bind(null,t)},(i=rl(e)).Ih(),new hy(n,i.Qu,i.credentials,i.Qt,r)),t.Fh.push((function(e){return Yi(o,void 0,void 0,(function(){return Qi(this,(function(n){switch(n.label){case 0:return e?(t.Uh.Yu(),Ty(t)?Iy(t):t.kh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:n.sent(),Ny(t),n.label=3;case 3:return[2]}}))}))}))),t.Uh}function qy(t){var e,n,r,i,o=this;return t.Qh||(t.Qh=(e=t.Sh,n=t._s,r={wu:Ry.bind(null,t),Tu:My.bind(null,t),wh:Vy.bind(null,t),dh:jy.bind(null,t)},(i=rl(e)).Ih(),new py(n,i.Qu,i.credentials,i.Qt,r)),t.Fh.push((function(e){return Yi(o,void 0,void 0,(function(){return Qi(this,(function(n){switch(n.label){case 0:return e?(t.Qh.Yu(),[4,ky(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:n.sent(),t.Ch.length>0&&($c("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),n.label=4;case 4:return[2]}}))}))}))),t.Qh}var By=function(){this.Kh=void 0,this.listeners=[]},zy=function(){this.queries=new Bd((function(t){return Uf(t)}),Ff),this.onlineState="Unknown",this.Wh=new Set};function Gy(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return Qi(this,(function(c){switch(c.label){case 0:if(n=rl(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new By),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return u=c.sent(),a=Yp(u,"Initialization of query '"+qf(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&Qy(n),[2]}}))}))}function Hy(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i,o,s;return Qi(this,(function(u){return n=rl(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function Ky(t,e){for(var n=rl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,l=a.listeners;c<l.length;c++)l[c].zh(s)&&(r=!0);a.Kh=s}}r&&Qy(n)}function Yy(t,e,n){var r=rl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Qy(t){t.Wh.forEach((function(t){t.next()}))}var Xy=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Yh(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=Yh.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),Wy=function(t){this.key=t},$y=function(t){this.key=t},Jy=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Bh(),this.De=Bh(),this.hl=zf(t),this.ll=new Hh(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new Kh,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,u=!1,a=Df(this.query)&&i.size===this.query.limit?i.last():null,c=kf(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var l=i.get(t),f=e instanceof of?e:null;f&&(f=Bf(n.query,f)?f:null);var h=!!l&&n.De.has(l.key),p=!!f&&(f.Vt||n.De.has(f.key)&&f.hasCommittedMutations),d=!1;l&&f?l.data().isEqual(f.data())?h!==p&&(r.track({type:3,doc:f}),d=!0):n.wl(l,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.hl(f,a)>0||c&&n.hl(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),d=!0):l&&!f&&(r.track({type:1,doc:l}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Df(this.query)||kf(this.query))for(;s.size>this.query.limit;){var l=Df(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:u,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return el()}})(n)-o(i)||r.hl(t.doc,e.doc);var n,i,o})),this.El(n);var s=e?this.Tl():[],u=0===this.ul.size&&this.Be?1:0,a=u!==this.al;return this.al=u,0!==o.length||a?{snapshot:new Yh(this.query,t.ll,i,o,t.De,0===u,a,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new Kh,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Bh(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new $y(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new Wy(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Bh();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return Yh.Ne(this.query,this.ll,this.De,0===this.al)},t}(),Zy=function(t,e,n){this.query=t,this.targetId=e,this.view=n},tg=function(t){this.key=t,this.Pl=!1},eg=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Bd((function(t){return Uf(t)}),Ff),this.Sl=new Map,this.Dl=[],this.Cl=new Ch(Nl.H),this.xl=new Map,this.Nl=new jv,this.Fl={},this.Ol=new Map,this.kl=$d.$i(),this.onlineState="Unknown",this.Ml=void 0}return Object.defineProperty(t.prototype,"Ll",{get:function(){return!0===this.Ml},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Qi(this,(function(a){switch(a.label){case 0:return n=Dg(t),(o=n.vl.get(e))?(r=o.targetId,n.Vl.Oa(r),i=o.view.Rl(),[3,4]):[3,1];case 1:return[4,Cv(n.bh,jf(e))];case 2:return s=a.sent(),u=n.Vl.Oa(s.targetId),r=s.targetId,[4,rg(n,e,r,"current"===u)];case 3:i=a.sent(),n.Ll&&by(n.yl,s),a.label=4;case 4:return[2,i]}}))}))}function rg(t,e,n,r){return Yi(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Qi(this,(function(l){switch(l.label){case 0:return t.$l=function(e,n,r){return function(t,e,n,r){return Yi(this,void 0,void 0,(function(){var i,o,s;return Qi(this,(function(u){switch(u.label){case 0:return(i=e.view.fl(n)).lc?[4,kv(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.Fe.get(e.targetId),s=e.view.wi(i,t.Ll,o),[2,(yg(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,kv(t.bh,e,!0)];case 1:return i=l.sent(),o=new Jy(e,i.Rc),s=o.fl(i.documents),u=Xh.$e(n,r&&"Offline"!==t.onlineState),a=o.wi(s,t.Ll,u),yg(t,n,a.Il),c=new Zy(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),a.snapshot)]}}))}))}function ig(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i;return Qi(this,(function(o){switch(o.label){case 0:return n=rl(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!Ff(t,e)}))),void n.vl.delete(e))]:n.Ll?(n.Vl.Ma(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,Dv(n.bh,r.targetId,!1).then((function(){n.Vl.$a(r.targetId),wy(n.yl,r.targetId),dg(n,r.targetId)})).catch(qd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return dg(n,r.targetId),[4,Dv(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function og(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i,o,s;return Qi(this,(function(u){switch(u.label){case 0:r=kg(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,(a=r.bh,c=e,f=rl(a),h=wl.now(),p=c.reduce((function(t,e){return t.add(e.key)}),Bh()),f.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return f.Tc.Xo(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=dh(o,l.get(o.key));null!=s&&n.push(new mh(o.key,s,nf(s.proto.mapValue),ch.exists(!0)))}return f.zo.Ri(t,h,n,c)}))})).then((function(t){var e=t.xs(l);return{batchId:t.batchId,ri:e}})))];case 2:return i=u.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.Fl[t.currentUser.A()];r||(r=new Ch(sl)),r=r.zt(e,n),t.Fl[t.currentUser.A()]=r}(r,i.batchId,n),[4,bg(r,i.ri)];case 3:return u.sent(),[4,ky(r.yl)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=Yp(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var a,c,l,f,h,p}))}))}function sg(t,e){return Yi(this,void 0,void 0,(function(){var n,r;return Qi(this,(function(i){switch(i.label){case 0:n=rl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,xv(n.bh,e)];case 2:return r=i.sent(),e.Fe.forEach((function(t,e){var r=n.xl.get(e);r&&(nl(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?nl(r.Pl):t.Qe.size>0&&(nl(r.Pl),r.Pl=!1))})),[4,bg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,qd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function ug(t,e,n){var r=rl(t);if(r.Ll&&0===n||!r.Ll&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=rl(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&Qy(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ll&&r.Vl.Qa(e)}}function ag(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Qi(this,(function(c){switch(c.label){case 0:return(r=rl(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Ch(Nl.H)).zt(o,new sf(o,_l.min())),u=Bh().add(o),a=new Qh(_l.min(),new Map,new Ph(sl),s,u),[4,sg(r,a)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),mg(r),[3,4];case 2:return[4,Dv(r.bh,e,!1).then((function(){return dg(r,e,n)})).catch(qd)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function cg(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i;return Qi(this,(function(o){switch(o.label){case 0:n=rl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Nv(n.bh,e)];case 2:return i=o.sent(),pg(n,r,null),hg(n,r),n.Vl.Na(r,"acknowledged"),[4,bg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,qd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function lg(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i;return Qi(this,(function(o){switch(o.label){case 0:r=rl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.bh,u=e,a=rl(s),a.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return a.zo.Pi(t,u).next((function(n){return nl(null!==n),e=n.keys(),a.zo.Ci(t,n)})).next((function(){return a.zo.Fi(t)})).next((function(){return a.Tc.Xo(t,e)}))})))];case 2:return i=o.sent(),pg(r,e,n),hg(r,e),r.Vl.Na(e,"rejected",n),[4,bg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,qd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,u,a}))}))}function fg(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i,o,s;return Qi(this,(function(u){switch(u.label){case 0:Ay((n=rl(t)).yl)||$c("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,(a=n.bh,c=rl(a),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c.zo.Vi(t)})))];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Ol.get(r)||[]).push(e),n.Ol.set(r,i),[3,4]);case 3:return o=u.sent(),s=Yp(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var a,c}))}))}function hg(t,e){(t.Ol.get(e)||[]).forEach((function(t){t.resolve()})),t.Ol.delete(e)}function pg(t,e,n){var r=rl(t),i=r.Fl[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fl[r.currentUser.A()]=i}}function dg(t,e,n){void 0===n&&(n=null),t.Vl.Ma(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ll&&t.Nl.Oc(e).forEach((function(e){t.Nl.Oi(e)||vg(t,e)}))}function vg(t,e){var n=t.Cl.get(e);null!==n&&(wy(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),mg(t))}function yg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Wy?(t.Nl.nr(o.key,e),gg(t,o)):o instanceof $y?($c("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Oi(o.key)||vg(t,o.key)):el()}}function gg(t,e){var n=e.key;t.Cl.get(n)||($c("SyncEngine","New document in limbo: "+n),t.Dl.push(n),mg(t))}function mg(t){for(;t.Dl.length>0&&t.Cl.size<t.pl;){var e=t.Dl.shift(),n=t.kl.next();t.xl.set(n,new tg(e)),t.Cl=t.Cl.zt(e,n),by(t.yl,new Hf(jf(Cf(e.path)),n,2,bl.q))}}function bg(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i,o,s;return Qi(this,(function(u){switch(u.label){case 0:return r=rl(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,u){s.push(r.$l(u,e,n).then((function(t){if(t){r.Ll&&r.Vl.Ba(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=_v.oc(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.bl.ah(i),[4,function(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,l;return Qi(this,(function(f){switch(f.label){case 0:n=rl(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Vp.forEach(e,(function(e){return Vp.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return Vp.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!qp(r=f.sent()))throw r;return $c("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.fc.get(u),c=a.kt,l=a.$t(c),n.fc=n.fc.zt(u,l));return[2]}}))}))}(r.bh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function wg(t,e){return Yi(this,void 0,void 0,(function(){var n,r;return Qi(this,(function(i){switch(i.label){case 0:return(n=rl(t)).currentUser.isEqual(e)?[3,3]:($c("SyncEngine","User change. New user:",e.A()),[4,Av(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Ol.forEach((function(t){t.forEach((function(t){t.reject(new fl(ll.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Ol.clear(),n.Vl.Ua(e,r.mc,r.Ac),[4,bg(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function _g(t,e){var n=rl(t),r=n.xl.get(e);if(r&&r.Pl)return Bh().add(r.key);var i=Bh(),o=n.Sl.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.vl.get(a);i=i.Pe(c.view._l)}return i}function Eg(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i;return Qi(this,(function(o){switch(o.label){case 0:return[4,kv((n=rl(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ll&&yg(n,e.targetId,i.Il),i)]}}))}))}function Ig(t){return Yi(this,void 0,void 0,(function(){var e;return Qi(this,(function(n){return[2,Lv((e=rl(t)).bh).then((function(t){return bg(e,t)}))]}))}))}function Tg(t,e,n,r){return Yi(this,void 0,void 0,(function(){var i,o;return Qi(this,(function(s){switch(s.label){case 0:return[4,(u=(i=rl(t)).bh,a=e,c=rl(u),l=rl(c.zo),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.yi(t,a).next((function(e){return e?c.Tc.Xo(t,e):Vp.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,ky(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(pg(i,e,r||null),hg(i,e),function(t,e){rl(rl(t).zo).xi(e)}(i.bh,e)):el(),s.label=4;case 4:return[4,bg(i,o)];case 5:return s.sent(),[3,7];case 6:$c("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var u,a,c,l}))}))}function Ag(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return Qi(this,(function(l){switch(l.label){case 0:return Dg(n=rl(t)),kg(n),!0!==e||!0===n.Ml?[3,3]:(r=n.Vl.va(),[4,Ng(n,r.it())]);case 1:return i=l.sent(),n.Ml=!0,[4,Fy(n.yl,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)u=s[o],by(n.yl,u);return[3,7];case 3:return!1!==e||!1===n.Ml?[3,7]:(a=[],c=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.La(e)?a.push(e):c=c.then((function(){return dg(n,e),Dv(n.bh,e,!0)})),wy(n.yl,e)})),[4,c]);case 4:return l.sent(),[4,Ng(n,a)];case 5:return l.sent(),(f=rl(n)).xl.forEach((function(t,e){wy(f.yl,e)})),f.Nl.kc(),f.xl=new Map,f.Cl=new Ch(Nl.H),n.Ml=!1,[4,Fy(n.yl,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var f}))}))}function Ng(t,e,n){return Yi(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,l,f,h,p,d,v;return Qi(this,(function(y){switch(y.label){case 0:n=rl(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.Sl.get(u))&&0!==c.length?[4,Cv(n.bh,jf(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),l=0,f=c,y.label=3;case 3:return l<f.length?(h=f[l],p=n.vl.get(h),[4,Eg(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Pv(n.bh,u)];case 8:return v=y.sent(),[4,Cv(n.bh,v)];case 9:return a=y.sent(),[4,rg(n,Sg(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function Sg(t){return Of(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xg(t){var e=rl(t);return rl(rl(e.bh).persistence).Uo()}function Og(t,e,n,r){return Yi(this,void 0,void 0,(function(){var i,o,s;return Qi(this,(function(u){switch(u.label){case 0:return(i=rl(t)).Ml?($c("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Lv(i.bh)];case 3:return o=u.sent(),s=Qh.Le(e,"current"===n),[4,bg(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,Dv(i.bh,e,!0)];case 6:return u.sent(),dg(i,e,r),[3,8];case 7:el(),u.label=8;case 8:return[2]}}))}))}function Cg(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,l,f,h;return Qi(this,(function(p){switch(p.label){case 0:if(!(r=Dg(t)).Ml)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Sl.has(s)?($c("SyncEngine","Adding an already active target "+s),[3,5]):[4,Pv(r.bh,s)]):[3,6];case 2:return u=p.sent(),[4,Cv(r.bh,u)];case 3:return a=p.sent(),[4,rg(r,Sg(u),a.targetId,!1)];case 4:p.sent(),by(r.yl,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Qi(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,Dv(r.bh,t,!1).then((function(){wy(r.yl,t),dg(r,t)})).catch(qd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,p.label=7;case 7:return l<f.length?(h=f[l],[5,c(h)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Dg(t){var e=rl(t);return e.yl.Dh.$h=sg.bind(null,e),e.yl.Dh.vn=_g.bind(null,e),e.yl.Dh.Lh=ag.bind(null,e),e.bl.ah=Ky.bind(null,e.gl),e.bl.Bl=Yy.bind(null,e.gl),e}function kg(t){var e=rl(t);return e.yl.Dh.Bh=cg.bind(null,e),e.yl.Dh.qh=lg.bind(null,e),e}var Pg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(e){switch(e.label){case 0:return this.Qt=cy(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Tv(this.persistence,new Ev,t.Jl,this.Qt)},t.prototype.jl=function(t){return new zv(Hv.ia,this.Qt)},t.prototype.Wl=function(t){return new ey},t.prototype.terminate=function(){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.Mo()];case 1:return t.sent(),[4,this.persistence.Mo()];case 2:return t.sent(),[2]}}))}))},t}(),Lg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Hi(e,t),e.prototype.initialize=function(e){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Rv(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,kg(this.Yl._a)];case 4:return n.sent(),[4,ky(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return Tv(this.persistence,new Ev,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new iv(e,t._s)},e.prototype.jl=function(t){var e=bv(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Ud.Ys(this.cacheSizeBytes):Ud.ti;return new yv(this.synchronizeTabs,e,t.clientId,n,t._s,uy(),ay(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new ey},e}(Pg),Rg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Hi(e,t),e.prototype.initialize=function(e){return Yi(this,void 0,void 0,(function(){var n,r=this;return Qi(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof ty?(this.Vl._a={eu:Tg.bind(null,n),nu:Og.bind(null,n),su:Cg.bind(null,n),Uo:xg.bind(null,n),tu:Ig.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return Yi(r,void 0,void 0,(function(){return Qi(this,(function(e){switch(e.label){case 0:return[4,Ag(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=uy();if(!ty.Kn(e))throw new fl(ll.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bv(t.yu.t,t.yu.persistenceKey);return new ty(e,t._s,n,t.clientId,t.Jl)},e}(Lg),Vg=function(){function t(){}return t.prototype.initialize=function(t,e){return Yi(this,void 0,void 0,(function(){var n=this;return Qi(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return ug(n._a,t,1)},this.yl.Dh.n_=wg.bind(null,this._a),[4,Fy(this.yl,this._a.Ll)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new zy},t.prototype.Xl=function(t){var e,n,r=cy(t.yu.t),i=(e=t.yu,new sy(e));return n=t.credentials,new dy(n,i,r)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return ug(s._a,t,0)},o=ry.Kn()?new ry:new ny,new yy(e,n,r,i,o)},t.prototype.e_=function(t,e){return n=this.bh,r=this.yl,i=this.gl,o=this.Vl,s=t.Jl,u=t.pl,a=e,c=new eg(n,r,i,o,s,u),a&&(c.Ml=!0),c;var n,r,i,o,s,u,a,c},t.prototype.terminate=function(){return function(t){return Yi(this,void 0,void 0,(function(){var e;return Qi(this,(function(n){switch(n.label){case 0:return e=rl(t),$c("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,my(e)];case 1:return n.sent(),e.Oh.Mo(),e.kh.set("Unknown"),[2]}}))}))}(this.yl)},t}(),jg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Mg=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new fl(ll.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Al(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),Fg=function(t){this._methodName=t},Ug=function(t){this.d_=t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function qg(t,e,n){if(!n)throw new fl(ll.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Bg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new fl(ll.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function zg(t,e,n,r){if(!0===e&&!0===r)throw new fl(ll.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Gg(t){if(!Nl.wt(t))throw new fl(ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Hg(t){if(Nl.wt(t))throw new fl(ll.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Kg(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":el()}function Yg(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new fl(ll.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Kg(t);throw new fl(ll.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Qg(t,e){if(e<=0)throw new fl(ll.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xg=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new fl(ll.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new fl(ll.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Wg=new Map,$g=function(){function t(t,e){this.w_="(lite)",this.E_=new Xg({}),this.T_=!1,t instanceof Qc?(this.I_=t,this.m_=new vl):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new fl(ll.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qc(t.options.projectId)}(t),this.m_=new yl(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new fl(ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new fl(ll.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new Xg(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new vl;switch(t.type){case"gapi":var e=t.client;return nl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ml(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new fl(ll.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return this,(t=Wg.get(this))&&($c("ComponentProvider","Removing Datastore"),Wg.delete(this),t.terminate()),Promise.resolve();var t},t}(),Jg=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new tm(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Zg=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),tm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Cf(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Hi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new Jg(this.firestore,null,new Nl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(Zg);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Ug&&(t=t.d_),qg("collection","path",e),t instanceof $g)return Hg(n=Il.ot.apply(Il,Ji([e],r))),new tm(t,null,n);if(!(t instanceof Jg||t instanceof tm))throw new fl(ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Hg(n=Il.ot.apply(Il,Ji([t.path],r)).child(Il.ot(e))),new tm(t.firestore,null,n)}function nm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Ug&&(t=t.d_),1===arguments.length&&(e=ol.u()),qg("doc","path",e),t instanceof $g)return Gg(n=Il.ot.apply(Il,Ji([e],r))),new Jg(t,null,new Nl(n));if(!(t instanceof Jg||t instanceof tm))throw new fl(ll.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Gg(n=t.D_.child(Il.ot.apply(Il,Ji([e],r)))),new Jg(t.firestore,t instanceof tm?t.v_:null,new Nl(n))}function rm(t,e){return t instanceof Ug&&(t=t.d_),e instanceof Ug&&(e=e.d_),(t instanceof Jg||t instanceof tm)&&(e instanceof Jg||e instanceof tm)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function im(t,e){return t instanceof Ug&&(t=t.d_),e instanceof Ug&&(e=e.d_),t instanceof Zg&&e instanceof Zg&&t.firestore===e.firestore&&Ff(t.C_,e.C_)&&t.v_===e.v_}var om=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new fl(ll.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new fl(ll.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return sl(this.x_,t.x_)||sl(this.N_,t.N_)},t}(),sm=/^__.*__$/,um=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new mh(t,this.data,this.Gt,e,this.fieldTransforms):new gh(t,this.data,e,this.fieldTransforms)},t}(),am=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new mh(t,this.data,this.Gt,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw el()}}var lm=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Cm(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(cm(this.k_)&&sm.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),fm=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||cy(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new lm({k_:t,methodName:e,j_:n,path:Al.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function hm(t){var e=t.p_(),n=cy(t.I_);return new fm(t.I_,!!e.ignoreUndefinedProperties,n)}function pm(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Nm("Data must be an object, but it was:",s,r);var u,a,c=Tm(r,s);if(o.merge)u=new Cl(s.Gt),a=s.fieldTransforms;else if(o.mergeFields){for(var l=[],f=0,h=o.mergeFields;f<h.length;f++){var p=Sm(e,h[f],n);if(!s.contains(p))throw new fl(ll.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Dm(l,p)||l.push(p)}u=new Cl(l),a=s.fieldTransforms.filter((function(t){return u.Tt(t.field)}))}else u=null,a=s.fieldTransforms;return new um(new tf(c),u,a)}var dm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Fg);function vm(t,e,n){return new lm({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var ym=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.prototype.z_=function(t){return new uh(t.path,new Zf)},e.prototype.isEqual=function(t){return t instanceof e},e}(Fg),gm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Hi(e,t),e.prototype.z_=function(t){var e=vm(this,t,!0),n=this.H_.map((function(t){return Im(t,e)})),r=new th(n);return new uh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Fg),mm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Hi(e,t),e.prototype.z_=function(t){var e=vm(this,t,!0),n=this.H_.map((function(t){return Im(t,e)})),r=new nh(n);return new uh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Fg),bm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Hi(e,t),e.prototype.z_=function(t){var e=new ih(t.Qt,Qf(t.Qt,this.J_));return new uh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Fg);function wm(t,e,n,r){var i=t.G_(1,e,n);Nm("Data must be an object, but it was:",i,r);var o=[],s=new ef;xl(r,(function(t,r){var u=Om(e,t,n);r instanceof Ug&&(r=r.d_);var a=i.U_(u);if(r instanceof dm)o.push(u);else{var c=Im(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Cl(o);return new am(s.Pt(),u,i.fieldTransforms)}function _m(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[Sm(e,r,n)],a=[i];if(o.length%2!=0)throw new fl(ll.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Sm(e,o[c])),a.push(o[c+1]);for(var l=[],f=new ef,h=u.length-1;h>=0;--h)if(!Dm(l,u[h])){var p=u[h],d=a[h];d instanceof Ug&&(d=d.d_);var v=s.U_(p);if(d instanceof dm)l.push(p);else{var y=Im(d,v);null!=y&&(l.push(p),f.set(p,y))}}var g=new Cl(l);return new am(f.Pt(),g,s.fieldTransforms)}function Em(t,e,n,r){return void 0===r&&(r=!1),Im(n,t.G_(r?4:3,e))}function Im(t,e){if(t instanceof Ug&&(t=t.d_),Am(t))return Nm("Unsupported field value:",e,t),Tm(t,e);if(t instanceof Fg)return function(t,e){if(!cm(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Im(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Ug&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Qf(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=wl.fromDate(t);return{timestampValue:sp(e.Qt,n)}}if(t instanceof wl)return n=new wl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:sp(e.Qt,n)};if(t instanceof om)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hl)return{bytesValue:up(e.Qt,t.I)};if(t instanceof Jg){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:lp(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+Kg(t))}(t,e)}function Tm(t,e){var n={};return Ol(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):xl(t,(function(t,r){var i=Im(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Am(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof wl||t instanceof om||t instanceof hl||t instanceof Jg||t instanceof Fg)}function Nm(t,e,n){if(!Am(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=Kg(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}var i}function Sm(t,e,n){if(e instanceof Ug&&(e=e.d_),e instanceof Mg)return e.f_;if("string"==typeof e)return Om(t,e);throw Cm("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var xm=new RegExp("[~\\*/\\[\\]]");function Om(t,e,n){if(e.search(xm)>=0)throw Cm("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Mg.bind.apply(Mg,Ji([void 0],e.split("."))))).f_}catch(r){throw Cm("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Cm(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new fl(ll.INVALID_ARGUMENT,(u+=". ")+t+a)}function Dm(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var km=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Yi(this,void 0,void 0,(function(){var e,n=this;return Qi(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new fl(ll.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Qi(this,(function(a){switch(a.label){case 0:return n=rl(t),r=yp(n.Qt)+"/documents",i={documents:e.map((function(t){return hp(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.Qt,"found"in(r=t)?function(t,e){nl(!!e.found),e.found.name,e.found.updateTime;var n=pp(t,e.found.name),r=cp(e.found.updateTime),i=new tf({mapValue:{fields:e.found.fields}});return new of(n,r,i,{})}(e,r):"missing"in r?function(t,e){nl(!!e.missing),nl(!!e.readTime);var n=pp(t,e.missing),r=cp(e.readTime);return new sf(n,r)}(e,r):el());s.set(i.key.toString(),i)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());nl(!!e),u.push(e)})),u)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof sf||t instanceof of?n.sf(t):el()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(n){this.Z_=n}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Ah(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Yi(this,void 0,void 0,(function(){var t,e=this;return Qi(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Nl._t(n);e.mutations.push(new Nh(r,e.jt(r)))})),[4,function(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i;return Qi(this,(function(o){switch(o.label){case 0:return n=rl(t),r=yp(n.Qt)+"/documents",i={writes:e.map((function(t){return bp(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof of)e=t.version;else{if(!(t instanceof sf))throw el();e=_l.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new fl(ll.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?ch.updateTime(e):ch.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(_l.min()))throw new fl(ll.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ch.updateTime(e)}return ch.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Pm=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new ly(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.$u((function(){return Yi(t,void 0,void 0,(function(){var t,e,n=this;return Qi(this,(function(r){return t=new km(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Ml(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.Es.reject(n),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!xh(e)}return!1},t}(),Lm=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=pl.UNAUTHENTICATED,this.clientId=ol.u(),this._f=function(){},this.C=new Rp,this.credentials.v((function(t){$c("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new fl(ll.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Rp;return this._s.Tf((function(){return Yi(t,void 0,void 0,(function(){var t,n;return Qi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Yp(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t,e){return Yi(this,void 0,void 0,(function(){var n,r,i=this;return Qi(this,(function(o){switch(o.label){case 0:return t._s.Af(),$c("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return Yi(i,void 0,void 0,(function(){return Qi(this,(function(t){switch(t.label){case 0:return[4,Av(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Vm(t,e){return Yi(this,void 0,void 0,(function(){var n,r;return Qi(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,jm(t)];case 1:return n=i.sent(),$c("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return Yi(this,void 0,void 0,(function(){var n,r;return Qi(this,(function(i){switch(i.label){case 0:return(n=rl(t))._s.Af(),$c("RemoteStore","RemoteStore received new credentials"),r=Ay(n),n.Nh.add(3),[4,my(n)];case 1:return i.sent(),r&&n.kh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,gy(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function jm(t){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:($c("FirestoreClient","Using default OfflineComponentProvider"),[4,Rm(t,new Pg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Mm(t){return Yi(this,void 0,void 0,(function(){return Qi(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:($c("FirestoreClient","Using default OnlineComponentProvider"),[4,Vm(t,new Vg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Fm(t){return jm(t).then((function(t){return t.persistence}))}function Um(t){return jm(t).then((function(t){return t.bh}))}function qm(t){return Mm(t).then((function(t){return t.yl}))}function Bm(t){return Mm(t).then((function(t){return t._a}))}function zm(t){return Yi(this,void 0,void 0,(function(){var e,n;return Qi(this,(function(r){switch(r.label){case 0:return[4,Mm(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=ng.bind(null,e._a),n.Hh=ig.bind(null,e._a),n)]}}))}))}function Gm(t,e,n){var r=this;void 0===n&&(n={});var i=new Rp;return t._s.Ps((function(){return Yi(r,void 0,void 0,(function(){var r;return Qi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new jg({next:function(o){e.Ps((function(){return Hy(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new fl(ll.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new fl(ll.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Xy(Cf(n.path),o,{includeMetadataChanges:!0,nl:!0});return Gy(t,s)},[4,zm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function Hm(t,e,n){var r=this;void 0===n&&(n={});var i=new Rp;return t._s.Ps((function(){return Yi(r,void 0,void 0,(function(){var r;return Qi(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new jg({next:function(n){e.Ps((function(){return Hy(t,s)})),n.fromCache&&"server"===r.source?i.reject(new fl(ll.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Xy(n,o,{includeMetadataChanges:!0,nl:!0});return Gy(t,s)},[4,zm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var Km=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new ly(this,"async_queue_retry"),this.vf=function(){var e=ay();e&&$c("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=ay();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=ay();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Yi(this,void 0,void 0,(function(){var t,e=this;return Qi(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!qp(t=n.sent()))throw t;return $c("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.$u((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,Jc("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Kp.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&el()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Yi(this,void 0,void 0,(function(){var t;return Qi(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function Ym(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Qm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new Km,r.w_="name"in e?e.name:"[DEFAULT]",r}return Hi(e,t),e.prototype.b_=function(){return this.qf||Wm(this),this.qf.terminate()},e}($g);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t){return t.qf||Wm(t),t.qf.df(),t.qf}function Wm(t){var e,n,r,i=t.p_(),o=(e=t.I_,n=t.w_,new Yc(e,n,(r=i).host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.qf=new Lm(t.m_,t.Bf,o)}function $m(t,e,n){var r=this,i=new Rp;return t._s.enqueue((function(){return Yi(r,void 0,void 0,(function(){var r;return Qi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Rm(t,n)];case 1:return o.sent(),[4,Vm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===ll.FAILED_PRECONDITION||s.code===ll.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function Jm(t){if(t.R_||t.P_)throw new fl(ll.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zm=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),ql(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pl(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Ll(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw el()}},t.prototype.Hf=function(t,e){var n=this,r={};return xl(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new om(Pl(t.latitude),Pl(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Vl(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(jl(t));default:return null}},t.prototype.Qf=function(t){var e=kl(t);return new wl(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Il.ot(t);nl(Lp(n));var r=new Qc(n.get(1),n.get(3)),i=new Nl(n.Y(5));return r.isEqual(e)||Jc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),tb=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Jg(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new eb(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(nb("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),eb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(tb);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t,e){return"string"==typeof e?Om(t,e):e instanceof Ug?e.d_.f_:e.f_}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t){if(kf(t)&&0===t.xt.length)throw new fl(ll.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ib=function(){};function ob(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var sb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Hi(e,t),e.prototype.td=function(t){var e,n,r,i=hm(t.firestore),o=function(t,e,n,r,i,o,s){var u;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new fl(ll.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){pb(s,o);for(var a=[],c=0,l=s;c<l.length;c++){var f=l[c];a.push(hb(r,t,f))}u={arrayValue:{values:a}}}else u=hb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||pb(s,o),u=Em(n,"where",s,"in"===o||"not-in"===o);var h=pf.create(i,o,u);return function(t,e){if(e.Ct()){var n=Lf(t);if(null!==n&&!n.isEqual(e.field))throw new fl(ll.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Pf(t);null!==r&&db(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new fl(ll.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new fl(ll.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,i,t.firestore.I_,this.ed,this.nd,this.sd);return new Zg(t.firestore,t.v_,(e=t.C_,n=o,r=e.filters.concat([n]),new xf(e.path,e.collectionGroup,e.xt.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(ib),ub=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Hi(e,t),e.prototype.td=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new fl(ll.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new fl(ll.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Tf(e,n);return function(t,e){if(null===Pf(t)){var n=Lf(t);null!==n&&db(t,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new Zg(t.firestore,t.v_,(e=t.C_,n=i,r=e.xt.concat([n]),new xf(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(ib),ab=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Hi(e,t),e.prototype.td=function(t){return new Zg(t.firestore,t.v_,Mf(t.C_,this.od,this.ad))},e}(ib),cb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Hi(e,t),e.prototype.td=function(t){var e,n,r=fb(t,this.type,this.ud,this.hd);return new Zg(t.firestore,t.v_,(e=t.C_,n=r,new xf(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(ib),lb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Hi(e,t),e.prototype.td=function(t){var e,n,r=fb(t,this.type,this.ud,this.hd);return new Zg(t.firestore,t.v_,(e=t.C_,n=r,new xf(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(ib);function fb(t,e,n,r){if(n[0]instanceof Ug&&(n[0]=n[0].d_),n[0]instanceof tb)return function(t,e,n,r,i){if(!r)throw new fl(ll.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Vf(t);s<u.length;s++){var a=u[s];if(a.field.ut())o.push(Ql(e,r.key));else{var c=r.field(a.field);if(Rl(c))throw new fl(ll.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=a.field.rt();throw new fl(ll.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Ef(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=hm(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new fl(ll.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.ut()){if("string"!=typeof c)throw new fl(ll.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Rf(t)&&-1!==c.indexOf("/"))throw new fl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Il.ot(c));if(!Nl.wt(l))throw new fl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var f=new Nl(l);u.push(Ql(e,f))}else{var h=Em(n,r,c);u.push(h)}}return new Ef(u,o)}(t.C_,t.firestore.I_,i,e,n,r)}function hb(t,e,n){if(n instanceof Ug&&(n=n.d_),"string"==typeof n){if(""===n)throw new fl(ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rf(e)&&-1!==n.indexOf("/"))throw new fl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Il.ot(n));if(!Nl.wt(r))throw new fl(ll.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ql(t,new Nl(r))}if(n instanceof Jg)return Ql(t,n.S_);throw new fl(ll.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Kg(n)+".")}function pb(t,e){if(!Array.isArray(t)||0===t.length)throw new fl(ll.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new fl(ll.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function db(t,e,n){if(!n.isEqual(e))throw new fl(ll.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var yb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Hi(e,t),e.prototype.Wf=function(t){return new hl(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Jg(this.firestore,null,e)},e}(Zm),gb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),mb=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).Yf=e,u.ld=e,u.metadata=o,u}return Hi(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new bb(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(nb("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(tb),bb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(mb),wb=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new gb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new bb(n.Yf,n.Xf,r.key,r,new gb(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new fl(ll.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new bb(t.Yf,t.Xf,e.doc.key,e.doc,new gb(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new bb(t.Yf,t.Xf,e.doc.key,e.doc,new gb(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:_b(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return el()}}function Eb(t,e){return t instanceof mb&&e instanceof mb?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof wb&&e instanceof wb&&t.Yf===e.Yf&&im(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ib=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Hi(e,t),e.prototype.Wf=function(t){return new hl(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new Jg(this.firestore,null,e)},e}(Zm);function Tb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Yg(t,Jg);var o=Yg(t.firestore,Qm),s=hm(o);return e instanceof Ug&&(e=e.d_),Nb(o,[("string"==typeof e||e instanceof Mg?_m(s,"updateDoc",t.S_,e,n,r):wm(s,"updateDoc",t.S_,e)).F_(t.S_,ch.exists(!0))])}function Ab(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Ug&&(t=t.d_);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||Ym(i[u])||(s=i[u],u++);var a,c,l,f={includeMetadataChanges:s.includeMetadataChanges};if(Ym(i[u])){var h=i[u];i[u]=null===(e=h.next)||void 0===e?void 0:e.bind(h),i[u+1]=null===(n=h.error)||void 0===n?void 0:n.bind(h),i[u+2]=null===(r=h.complete)||void 0===r?void 0:r.bind(h)}if(t instanceof Jg)c=Yg(t.firestore,Qm),l=Cf(t.S_.path),a={next:function(e){i[u]&&i[u](Sb(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=Yg(t,Zg);c=Yg(p.firestore,Qm),l=p.C_;var d=new Ib(c);a={next:function(t){i[u]&&i[u](new wb(c,d,p,t))},error:i[u+1],complete:i[u+2]},rb(t.C_)}return function(t,e,n,r){var i=this,o=new jg(r),s=new Xy(e,o,n);return t._s.Ps((function(){return Yi(i,void 0,void 0,(function(){var e;return Qi(this,(function(n){switch(n.label){case 0:return e=Gy,[4,zm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return Yi(i,void 0,void 0,(function(){var e;return Qi(this,(function(n){switch(n.label){case 0:return e=Hy,[4,zm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Xm(c),l,f,a)}function Nb(t,e){return function(t,e){var n=this,r=new Rp;return t._s.Ps((function(){return Yi(n,void 0,void 0,(function(){var n;return Qi(this,(function(i){switch(i.label){case 0:return n=og,[4,Bm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Xm(t),e)}function Sb(t,e,n){var r=n.docs.get(e.S_),i=new Ib(t);return new mb(t,i,e.S_,r,new gb(n.hasPendingWrites,n.fromCache),e.v_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xb=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=hm(t)}return t.prototype.set=function(t,e,n){this.md();var r=Ob(t,this.Yf),i=vb(r.v_,e,n),o=pm(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,ch.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=Ob(t,this.Yf);return e instanceof Ug&&(e=e.d_),o="string"==typeof e||e instanceof Mg?_m(this.Id,"WriteBatch.update",s.S_,e,n,r):wm(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,ch.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=Ob(t,this.Yf);return this.Ed=this.Ed.concat(new Ah(e.S_,ch.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new fl(ll.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ob(t,e){if(t instanceof Ug&&(t=t.d_),t.firestore!==e)throw new fl(ll.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Hi(e,t),e.prototype.get=function(e){var n=this,r=Ob(e,this.Yf),i=new Ib(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new mb(n.Yf,i,r.S_,t.Zf,new gb(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=hm(t)}return t.prototype.get=function(t){var e=this,n=Ob(t,this.Yf),r=new yb(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return el();var i=t[0];if(i instanceof sf)return new tb(e.Yf,r,n.S_,null,n.v_);if(i instanceof of)return new tb(e.Yf,r,i.key,i,n.v_);throw el()}))},t.prototype.set=function(t,e,n){var r=Ob(t,this.Yf),i=vb(r.v_,e,n),o=pm(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Ob(t,this.Yf);return e instanceof Ug&&(e=e.d_),o="string"==typeof e||e instanceof Mg?_m(this.Id,"Transaction.update",s.S_,e,n,r):wm(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=Ob(t,this.Yf);return this.Ad.delete(e.S_),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(){if("undefined"==typeof Uint8Array)throw new fl(ll.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function kb(){if("undefined"==typeof atob)throw new fl(ll.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Pb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.fromBase64String=function(t){return kb(),new e(hl.fromBase64String(t))},e.fromUint8Array=function(t){return Db(),new e(hl.fromUint8Array(t))},e.prototype.toBase64=function(){return kb(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return Db(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Ug),Lb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Jm(t=Yg(t,Qm));var n=Xm(t),r=t.p_(),i=new Vg;return $m(n,i,new Lg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Jm(t=Yg(t,Qm));var e=Xm(t),n=t.p_(),r=new Vg;return $m(e,r,new Rg(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new fl(ll.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Rp;return t.Bf.Tf((function(){return Yi(e,void 0,void 0,(function(){var e;return Qi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Yi(this,void 0,void 0,(function(){var e;return Qi(this,(function(n){switch(n.label){case 0:return Mp.Kn()?(e=t+"main",[4,Mp.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(bv(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),Rb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Qc||(i.Pd=e),i}return Hi(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){var n,r,i,o;n=this.d_,r=t,i=e,"firestore.googleapis.com"!==(o=(n=Yg(n,$g)).V_()).host&&o.host!==r&&Zc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n.g_(Object.assign(Object.assign({},o),{host:r+":"+i,ssl:!1}))},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Yi(e,void 0,void 0,(function(){var e,n;return Qi(this,(function(r){switch(r.label){case 0:return[4,Fm(t)];case 1:return e=r.sent(),[4,qm(t)];case 2:return n=r.sent(),[2,(e.yo(!0),i=n,o=rl(i),o.Nh.delete(0),gy(o))]}var i,o}))}))}))}(Xm(Yg(this.d_,Qm)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Yi(e,void 0,void 0,(function(){var e,n;return Qi(this,(function(r){switch(r.label){case 0:return[4,Fm(t)];case 1:return e=r.sent(),[4,qm(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Yi(this,void 0,void 0,(function(){var e;return Qi(this,(function(n){switch(n.label){case 0:return(e=rl(t)).Nh.add(0),[4,my(e)];case 1:return n.sent(),e.kh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Xm(Yg(this.d_,Qm)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&zg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Rp;return t._s.Ps((function(){return Yi(e,void 0,void 0,(function(){var e;return Qi(this,(function(r){switch(r.label){case 0:return e=fg,[4,Bm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Xm(Yg(this.d_,Qm)))},e.prototype.onSnapshotsInSync=function(t){return e=this.d_,n=t,function(t,e){var n=this,r=new jg(e);return t._s.Ps((function(){return Yi(n,void 0,void 0,(function(){var e;return Qi(this,(function(n){switch(n.label){case 0:return e=function(t,e){rl(t).Wh.add(e),e.next()},[4,zm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return Yi(n,void 0,void 0,(function(){var e;return Qi(this,(function(n){switch(n.label){case 0:return e=function(t,e){rl(t).Wh.delete(e)},[4,zm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Xm(e=Yg(e,Qm)),Ym(n)?n:{next:n});var e,n},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new fl(ll.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Xb(this,em(this.d_,t))}catch(e){throw qb(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Ub(this,nm(this.d_,t))}catch(e){throw qb(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Kb(this,function(t,e){if(t=Yg(t,$g),qg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new fl(ll.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Zg(t,null,(n=e,new xf(Il.ct(),n)));var n}(this.d_,t))}catch(e){throw qb(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new Rp;return t._s.Ps((function(){return Yi(n,void 0,void 0,(function(){var n;return Qi(this,(function(i){switch(i.label){case 0:return[4,(o=t,Mm(o).then((function(t){return t.Sh})))];case 1:return n=i.sent(),new Pm(t._s,n,e,r).run(),[2]}var o}))}))})),r.promise}(Xm(e=this.d_),(function(r){return function(e){return t(new jb(n,e))}(new Cb(e,r))}))},e.prototype.batch=function(){var t=this;return Xm(this.d_),new Mb(new xb(this.d_,(function(e){return Nb(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new fl(ll.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new fl(ll.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Ug),Vb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Hi(e,t),e.prototype.Wf=function(t){return new Pb(new hl(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return Ub.yd(e,this.firestore,null)},e}(Zm);var jb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new Vb(e),r}return Hi(e,t),e.prototype.get=function(t){var e=this,n=Wb(t);return this.d_.get(n).then((function(t){return new Gb(e.Yf,new mb(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=Wb(t);return n?(Bg("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Wb(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Ji([s,e,n],i)),this},e.prototype.delete=function(t){var e=Wb(t);return this.d_.delete(e),this},e}(Ug),Mb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.prototype.set=function(t,e,n){var r=Wb(t);return n?(Bg("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Wb(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Ji([s,e,n],i)),this},e.prototype.delete=function(t){var e=Wb(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(Ug),Fb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Hi(e,t),e.prototype.fromFirestore=function(t,e){var n=new bb(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new Hb(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Vb(t),n),i.set(n,o)),o},e}(Ug);Fb.Vd=new WeakMap;var Ub=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Vb(e),r}return Hi(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new fl(ll.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new Jg(n.d_,r,new Nl(t)))},e.yd=function(t,n,r){return new e(n,new Jg(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Xb(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Xb(this.firestore,em(this.d_,t))}catch(e){throw qb(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Ug&&(t=t.d_),t instanceof Jg&&rm(this.d_,t)},e.prototype.set=function(t,e){e=Bg("DocumentReference.set",e);try{return function(t,e,n){t=Yg(t,Jg);var r=Yg(t.firestore,Qm),i=vb(t.v_,e,n);return Nb(r,[pm(hm(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,ch.Kt())])}(this.d_,t,e)}catch(n){throw qb(n,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Tb(this.d_,t):Tb.apply(void 0,Ji([this.d_,t,e],n))}catch(i){throw qb(i,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Nb(Yg((t=this.d_).firestore,Qm),[new Ah(t.S_,ch.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Bb(e),i=zb(e,(function(e){return new Gb(t.firestore,new mb(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return Ab(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Yg(t,Jg);var e=Yg(t.firestore,Qm),n=Xm(e),r=new Ib(e);return function(t,e){var n=this,r=new Rp;return t._s.Ps((function(){return Yi(n,void 0,void 0,(function(){var n;return Qi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i;return Qi(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,u=e,a=rl(s),a.persistence.runTransaction("read document","readonly",(function(t){return a.Tc.Ho(t,u)})))];case 1:return(i=o.sent())instanceof of?n.resolve(i):i instanceof sf?n.resolve(null):n.reject(new fl(ll.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Yp(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,u,a}))}))},[4,Um(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new mb(e,r,t.S_,n,new gb(n instanceof of&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Yg(t,Jg);var e=Yg(t.firestore,Qm);return Gm(Xm(e),t.S_,{source:"server"}).then((function(n){return Sb(e,t,n)}))}(this.d_):function(t){t=Yg(t,Jg);var e=Yg(t.firestore,Qm);return Gm(Xm(e),t.S_).then((function(n){return Sb(e,t,n)}))}(this.d_)).then((function(t){return new Gb(e.firestore,new mb(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Fb.gd(this.firestore,t)))},e}(Ug);function qb(t,e,n){return t.message=t.message.replace(e,n),t}function Bb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ym(r))return r}return{}}function zb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ym(t[0])?t[0]:Ym(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Gb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Hi(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ub(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Eb(this.d_,t.d_)},e}(Ug),Hb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(Gb),Kb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Vb(e),r}return Hi(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,ob(this.d_,(o=r,s=n,u=nb("where",i=t),new sb(u,s,o))))}catch(i){throw qb(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,u},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,ob(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=nb("orderBy",t);return new ub(r,n)}(t,n)))}catch(r){throw qb(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,ob(this.d_,(Qg("limit",n=t),new ab("limit",n,"F"))))}catch(n){throw qb(n,"limit()","Query.limit()")}var n},e.prototype.limitToLast=function(t){try{return new e(this.firestore,ob(this.d_,(Qg("limitToLast",n=t),new ab("limitToLast",n,"L"))))}catch(n){throw qb(n,"limitToLast()","Query.limitToLast()")}var n},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ob(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cb("startAt",t,!0)}.apply(void 0,t)))}catch(r){throw qb(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ob(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cb("startAfter",t,!1)}.apply(void 0,t)))}catch(r){throw qb(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ob(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lb("endBefore",t,!0)}.apply(void 0,t)))}catch(r){throw qb(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,ob(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new lb("endAt",t,!1)}.apply(void 0,t)))}catch(r){throw qb(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return im(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Yg(t,Zg);var e=Yg(t.firestore,Qm),n=Xm(e),r=new Ib(e);return function(t,e){var n=this,r=new Rp;return t._s.Ps((function(){return Yi(n,void 0,void 0,(function(){var n;return Qi(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Yi(this,void 0,void 0,(function(){var r,i,o,s,u;return Qi(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,kv(t,e,!0)];case 1:return u=a.sent(),r=new Jy(e,u.Rc),i=r.fl(u.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Yp(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Um(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new wb(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=Yg(t,Zg);var e=Yg(t.firestore,Qm),n=Xm(e),r=new Ib(e);return Hm(n,t.C_,{source:"server"}).then((function(n){return new wb(e,r,t,n)}))}(this.d_):function(t){t=Yg(t,Zg);var e=Yg(t.firestore,Qm),n=Xm(e),r=new Ib(e);return rb(t.C_),Hm(n,t.C_).then((function(n){return new wb(e,r,t,n)}))}(this.d_)).then((function(t){return new Qb(e.firestore,new wb(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Bb(e),i=zb(e,(function(e){return new Qb(t.firestore,new wb(t.firestore.d_,t.Xf,t.d_,e._d))}));return Ab(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Fb.gd(this.firestore,t)))},e}(Ug),Yb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Hi(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Hb(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(Ug),Qb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Hi(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Kb(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new Hb(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new Yb(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new Hb(n.Yf,r))}))},e.prototype.isEqual=function(t){return Eb(this.d_,t.d_)},e}(Ug),Xb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Hi(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new Ub(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Ub(this.firestore,void 0===t?nm(this.d_):nm(this.d_,t))}catch(e){throw qb(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this.d_,n=t,r=Yg(e.firestore,Qm),i=nm(e),o=vb(e.v_,n),Nb(r,[pm(hm(e.firestore),"addDoc",i.S_,o,null!==e.v_,{}).F_(i.S_,ch.exists(!1))]).then((function(){return i}))).then((function(t){return new Ub(s.firestore,t)}))},e.prototype.isEqual=function(t){return rm(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Fb.gd(this.firestore,t)))},e}(Kb);function Wb(t){return t instanceof Ug&&(t=t.d_),Yg(t,Jg)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var $b,Jb=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Mg.bind.apply(Mg,Ji([void 0],e))))||this}return Hi(e,t),e.documentId=function(){return new e(Al.ht().rt())},e.prototype.isEqual=function(t){return t instanceof Ug&&(t=t.d_),t instanceof Mg&&this.d_.f_.isEqual(t.f_)},e}(Ug),Zb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Hi(e,t),e.serverTimestamp=function(){var t=new ym("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new dm("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gm("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mm("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new bm("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(Ug),tw={Firestore:Rb,GeoPoint:om,Timestamp:wl,Blob:Pb,Transaction:jb,WriteBatch:Mb,DocumentReference:Ub,DocumentSnapshot:Gb,Query:Kb,QueryDocumentSnapshot:Hb,QuerySnapshot:Qb,CollectionReference:Xb,FieldPath:Jb,FieldValue:Zb,setLogLevel:function(t){var e;e=t,Xc.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};($b=Uo).INTERNAL.registerComponent(new fo("firestore",(function(t){return function(t,e){return new Rb(t,new Qm(t,e),new Lb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},tw))),$b.registerVersion("@firebase/firestore","2.1.5");export{Gn as F,ri as T,ir as a,Fi as b,Jn as c,Vr as d,Ue as e,sr as f,ur as g,Uo as h,xn as i,bi as j,Pn as k,Ci as l,Ui as m,Ei as n,Wn as o,Fe as p,qn as r,a as t,yi as v,qe as w};
