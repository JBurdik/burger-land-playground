function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl"),n=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function r(t){if(_(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=r(A(i)?s(i):i);if(o)for(const t in o)e[t]=o[t]}return e}if(S(t))return t}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function u(t){let e="";if(A(t))e=t;else if(_(t))for(let n=0;n<t.length;n++)e+=u(t[n])+" ";else if(S(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const a=t=>null==t?"":S(t)?JSON.stringify(t,c,2):String(t),c=(t,e)=>E(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:I(e)?{[`Set(${e.size})`]:[...e.values()]}:!S(e)||_(e)||k(e)?e:String(e),l={},f=[],h=()=>{},p=()=>!1,d=/^on[^a-z]/,v=t=>d.test(t),y=t=>t.startsWith("onUpdate:"),g=Object.assign,m=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(t,e)=>b.call(t,e),_=Array.isArray,E=t=>"[object Map]"===C(t),I=t=>"[object Set]"===C(t),T=t=>"function"==typeof t,A=t=>"string"==typeof t,N=t=>"symbol"==typeof t,S=t=>null!==t&&"object"==typeof t,x=t=>S(t)&&T(t.then)&&T(t.catch),O=Object.prototype.toString,C=t=>O.call(t),k=t=>"[object Object]"===C(t),D=t=>A(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,P=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),L=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},R=/-(\w)/g,V=L((t=>t.replace(R,((t,e)=>e?e.toUpperCase():"")))),M=/\B([A-Z])/g,j=L((t=>t.replace(M,"-$1").toLowerCase())),F=L((t=>t.charAt(0).toUpperCase()+t.slice(1))),U=L((t=>t?`on${F(t)}`:"")),q=(t,e)=>t!==e&&(t==t||e==e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},z=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},G=t=>{const e=parseFloat(t);return isNaN(e)?t:e},H=new WeakMap,K=[];let Y;const Q=Symbol(""),X=Symbol("");function W(t,e=l){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return e.scheduler?void 0:t();if(!K.includes(n)){Z(n);try{return et.push(tt),tt=!0,K.push(n),Y=n,t()}finally{K.pop(),rt(),Y=K[K.length-1]}}};return n.id=J++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function $(t){t.active&&(Z(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let J=0;function Z(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let tt=!0;const et=[];function nt(){et.push(tt),tt=!1}function rt(){const t=et.pop();tt=void 0===t||t}function it(t,e,n){if(!tt||void 0===Y)return;let r=H.get(t);r||H.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(Y)||(i.add(Y),Y.deps.push(i))}function ot(t,e,n,r,i,o){const s=H.get(t);if(!s)return;const u=new Set,a=t=>{t&&t.forEach((t=>{(t!==Y||t.allowRecurse)&&u.add(t)}))};if("clear"===e)s.forEach(a);else if("length"===n&&_(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&a(t)}));else switch(void 0!==n&&a(s.get(n)),e){case"add":_(t)?D(n)&&a(s.get("length")):(a(s.get(Q)),E(t)&&a(s.get(X)));break;case"delete":_(t)||(a(s.get(Q)),E(t)&&a(s.get(X)));break;case"set":E(t)&&a(s.get(Q))}u.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const st=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(N)),ut=ht(),at=ht(!1,!0),ct=ht(!0),lt=ht(!0,!0),ft={};function ht(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?Ft:jt).get(n))return n;const o=_(n);if(!t&&o&&w(ft,r))return Reflect.get(ft,r,i);const s=Reflect.get(n,r,i);if(N(r)?st.has(r):"__proto__"===r||"__v_isRef"===r)return s;if(t||it(n,0,r),e)return s;if(Qt(s)){return!o||!D(r)?s.value:s}return S(s)?t?Bt(s):qt(s):s}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];ft[t]=function(...t){const n=Yt(this);for(let e=0,i=this.length;e<i;e++)it(n,0,e+"");const r=e.apply(n,t);return-1===r||!1===r?e.apply(n,t.map(Yt)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];ft[t]=function(...t){nt();const n=e.apply(this,t);return rt(),n}}));function pt(t=!1){return function(e,n,r,i){const o=e[n];if(!t&&(r=Yt(r),!_(e)&&Qt(o)&&!Qt(r)))return o.value=r,!0;const s=_(e)&&D(n)?Number(n)<e.length:w(e,n),u=Reflect.set(e,n,r,i);return e===Yt(i)&&(s?q(r,o)&&ot(e,"set",n,r):ot(e,"add",n,r)),u}}const dt={get:ut,set:pt(),deleteProperty:function(t,e){const n=w(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&ot(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return N(e)&&st.has(e)||it(t,0,e),n},ownKeys:function(t){return it(t,0,_(t)?"length":Q),Reflect.ownKeys(t)}},vt={get:ct,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},yt=g({},dt,{get:at,set:pt(!0)});g({},vt,{get:lt});const gt=t=>S(t)?qt(t):t,mt=t=>S(t)?Bt(t):t,bt=t=>t,wt=t=>Reflect.getPrototypeOf(t);function _t(t,e,n=!1,r=!1){const i=Yt(t=t.__v_raw),o=Yt(e);e!==o&&!n&&it(i,0,e),!n&&it(i,0,o);const{has:s}=wt(i),u=n?mt:r?bt:gt;return s.call(i,e)?u(t.get(e)):s.call(i,o)?u(t.get(o)):void 0}function Et(t,e=!1){const n=this.__v_raw,r=Yt(n),i=Yt(t);return t!==i&&!e&&it(r,0,t),!e&&it(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function It(t,e=!1){return t=t.__v_raw,!e&&it(Yt(t),0,Q),Reflect.get(t,"size",t)}function Tt(t){t=Yt(t);const e=Yt(this),n=wt(e).has.call(e,t);return e.add(t),n||ot(e,"add",t,t),this}function At(t,e){e=Yt(e);const n=Yt(this),{has:r,get:i}=wt(n);let o=r.call(n,t);o||(t=Yt(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?q(e,s)&&ot(n,"set",t,e):ot(n,"add",t,e),this}function Nt(t){const e=Yt(this),{has:n,get:r}=wt(e);let i=n.call(e,t);i||(t=Yt(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&ot(e,"delete",t,void 0),o}function St(){const t=Yt(this),e=0!==t.size,n=t.clear();return e&&ot(t,"clear",void 0,void 0),n}function xt(t,e){return function(n,r){const i=this,o=i.__v_raw,s=Yt(o),u=t?mt:e?bt:gt;return!t&&it(s,0,Q),o.forEach(((t,e)=>n.call(r,u(t),u(e),i)))}}function Ot(t,e,n){return function(...r){const i=this.__v_raw,o=Yt(i),s=E(o),u="entries"===t||t===Symbol.iterator&&s,a="keys"===t&&s,c=i[t](...r),l=e?mt:n?bt:gt;return!e&&it(o,0,a?X:Q),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:u?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function Ct(t){return function(...e){return"delete"!==t&&this}}const kt={get(t){return _t(this,t)},get size(){return It(this)},has:Et,add:Tt,set:At,delete:Nt,clear:St,forEach:xt(!1,!1)},Dt={get(t){return _t(this,t,!1,!0)},get size(){return It(this)},has:Et,add:Tt,set:At,delete:Nt,clear:St,forEach:xt(!1,!0)},Pt={get(t){return _t(this,t,!0)},get size(){return It(this,!0)},has(t){return Et.call(this,t,!0)},add:Ct("add"),set:Ct("set"),delete:Ct("delete"),clear:Ct("clear"),forEach:xt(!0,!1)};function Lt(t,e){const n=e?Dt:t?Pt:kt;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(w(n,r)&&r in e?n:e,r,i)}["keys","values","entries",Symbol.iterator].forEach((t=>{kt[t]=Ot(t,!1,!1),Pt[t]=Ot(t,!0,!1),Dt[t]=Ot(t,!1,!0)}));const Rt={get:Lt(!1,!1)},Vt={get:Lt(!1,!0)},Mt={get:Lt(!0,!1)},jt=new WeakMap,Ft=new WeakMap;function Ut(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>C(t).slice(8,-1))(t))}function qt(t){return t&&t.__v_isReadonly?t:zt(t,!1,dt,Rt)}function Bt(t){return zt(t,!0,vt,Mt)}function zt(t,e,n,r){if(!S(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const i=e?Ft:jt,o=i.get(t);if(o)return o;const s=Ut(t);if(0===s)return t;const u=new Proxy(t,2===s?r:n);return i.set(t,u),u}function Gt(t){return Ht(t)?Gt(t.__v_raw):!(!t||!t.__v_isReactive)}function Ht(t){return!(!t||!t.__v_isReadonly)}function Kt(t){return Gt(t)||Ht(t)}function Yt(t){return t&&Yt(t.__v_raw)||t}function Qt(t){return Boolean(t&&!0===t.__v_isRef)}const Xt={get:(t,e,n)=>{return Qt(r=Reflect.get(t,e,n))?r.value:r;var r},set:(t,e,n,r)=>{const i=t[e];return Qt(i)&&!Qt(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Wt(t){return Gt(t)?t:new Proxy(t,Xt)}class $t{constructor(t,e){this._object=t,this._key=e,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}class Jt{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=W(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,ot(Yt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1),it(Yt(this),0,"value"),this._value}set value(t){this._setter(t)}}function Zt(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){ee(o,e,n)}return i}function te(t,e,n,r){if(T(t)){const i=Zt(t,e,n,r);return i&&x(i)&&i.catch((t=>{ee(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(te(t[o],e,n,r));return i}function ee(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void Zt(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let ne=!1,re=!1;const ie=[];let oe=0;const se=[];let ue=null,ae=0;const ce=[];let le=null,fe=0;const he=Promise.resolve();let pe=null,de=null;function ve(t){const e=pe||he;return t?e.then(this?t.bind(this):t):e}function ye(t){ie.length&&ie.includes(t,ne&&t.allowRecurse?oe+1:oe)||t===de||(ie.push(t),ge())}function ge(){ne||re||(re=!0,pe=he.then(Ee))}function me(t,e,n,r){_(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),ge()}function be(t,e=null){if(se.length){for(de=e,ue=[...new Set(se)],se.length=0,ae=0;ae<ue.length;ae++)ue[ae]();ue=null,ae=0,de=null,be(t,e)}}function we(t){if(ce.length){const t=[...new Set(ce)];if(ce.length=0,le)return void le.push(...t);for(le=t,le.sort(((t,e)=>_e(t)-_e(e))),fe=0;fe<le.length;fe++)le[fe]();le=null,fe=0}}const _e=t=>null==t.id?1/0:t.id;function Ee(t){re=!1,ne=!0,be(t),ie.sort(((t,e)=>_e(t)-_e(e)));try{for(oe=0;oe<ie.length;oe++){const t=ie[oe];t&&Zt(t,null,14)}}finally{oe=0,ie.length=0,we(),ne=!1,pe=null,(ie.length||ce.length)&&Ee(t)}}function Ie(t,e,...n){const r=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(G))}let u=U(V(e)),a=r[u];!a&&o&&(u=U(j(e)),a=r[u]),a&&te(a,t,6,i);const c=r[u+"Once"];if(c){if(t.emitted){if(t.emitted[u])return}else(t.emitted={})[u]=!0;te(c,t,6,i)}}function Te(t,e,n=!1){if(!e.deopt&&void 0!==t.__emits)return t.__emits;const r=t.emits;let i={},o=!1;if(!T(t)){const r=t=>{o=!0,g(i,Te(t,e,!0))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return r||o?(_(r)?r.forEach((t=>i[t]=null)):g(i,r),t.__emits=i):t.__emits=null}function Ae(t,e){return!(!t||!v(e))&&(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,j(e))||w(t,e))}let Ne=null;function Se(t){Ne=t}function xe(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:u,attrs:a,emit:c,render:l,renderCache:f,data:h,setupState:p,ctx:d}=t;let v;Ne=t;try{let t;if(4&n.shapeFlag){const e=i||r;v=cr(l.call(e,e,f,o,p,h,d)),t=a}else{const n=e;0,v=cr(n.length>1?n(o,{attrs:a,slots:u,emit:c}):n(o,null)),t=e.props?a:Ce(a)}let g=v;if(!1!==e.inheritAttrs&&t){const e=Object.keys(t),{shapeFlag:n}=g;e.length&&(1&n||6&n)&&(s&&e.some(y)&&(t=ke(t,s)),g=sr(g,t))}n.dirs&&(g.dirs=g.dirs?g.dirs.concat(n.dirs):n.dirs),n.transition&&(g.transition=n.transition),v=g}catch(g){ee(g,t,1),v=or(Yn)}return Ne=null,v}function Oe(t){let e;for(let n=0;n<t.length;n++){const r=t[n];if(!tr(r))return;if(r.type!==Yn||"v-if"===r.children){if(e)return;e=r}}return e}const Ce=t=>{let e;for(const n in t)("class"===n||"style"===n||v(n))&&((e||(e={}))[n]=t[n]);return e},ke=(t,e)=>{const n={};for(const r in t)y(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function De(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Ae(n,o))return!0}return!1}function Pe(t){if(T(t)&&(t=t()),_(t)){t=Oe(t)}return cr(t)}let Le=0;const Re=t=>Le+=t;function Ve(t,e=Ne){if(!e)return t;const n=(...n)=>{Le||$n(!0);const r=Ne;Se(e);const i=t(...n);return Se(r),Le||Jn(),i};return n._c=!0,n}let Me=null;const je=[];function Fe(t){je.push(Me=t)}function Ue(){je.pop(),Me=je[je.length-1]||null}function qe(t){return e=>Ve((function(){Fe(t);const n=e.apply(this,arguments);return Ue(),n}))}function Be(t,e,n,r=!1){const i={},o={};z(o,nr,1),ze(t,e,i,o),n?t.props=r?i:zt(i,!1,yt,Vt):t.type.props?t.props=i:t.props=o,t.attrs=o}function ze(t,e,n,r){const[i,o]=t.propsOptions;if(e)for(const s in e){const o=e[s];if(P(s))continue;let u;i&&w(i,u=V(s))?n[u]=o:Ae(t.emitsOptions,s)||(r[s]=o)}if(o){const e=Yt(n);for(let r=0;r<o.length;r++){const s=o[r];n[s]=Ge(i,e,s,e[s],t)}}}function Ge(t,e,n,r,i){const o=t[n];if(null!=o){const t=w(o,"default");if(t&&void 0===r){const t=o.default;o.type!==Function&&T(t)?(Cr(i),r=t(e),Cr(null)):r=t}o[0]&&(w(e,n)||t?!o[1]||""!==r&&r!==j(n)||(r=!0):r=!1)}return r}function He(t,e,n=!1){if(!e.deopt&&t.__props)return t.__props;const r=t.props,i={},o=[];let s=!1;if(!T(t)){const r=t=>{s=!0;const[n,r]=He(t,e,!0);g(i,n),r&&o.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!r&&!s)return t.__props=f;if(_(r))for(let u=0;u<r.length;u++){const t=V(r[u]);Ke(t)&&(i[t]=l)}else if(r)for(const u in r){const t=V(u);if(Ke(t)){const e=r[u],n=i[t]=_(e)||T(e)?{type:e}:e;if(n){const e=Xe(Boolean,n.type),r=Xe(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||w(n,"default"))&&o.push(t)}}}return t.__props=[i,o]}function Ke(t){return"$"!==t[0]}function Ye(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Qe(t,e){return Ye(t)===Ye(e)}function Xe(t,e){if(_(e)){for(let n=0,r=e.length;n<r;n++)if(Qe(e[n],t))return n}else if(T(e))return Qe(e,t)?0:-1;return-1}function We(t,e,n=xr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;nt(),Cr(n);const i=te(e,n,t,r);return Cr(null),rt(),i});return r?i.unshift(o):i.push(o),o}}const $e=t=>(e,n=xr)=>!kr&&We(t,e,n),Je=$e("bm"),Ze=$e("m"),tn=$e("bu"),en=$e("u"),nn=$e("bum"),rn=$e("um"),on=$e("rtg"),sn=$e("rtc"),un={};function an(t,e,n){return cn(t,e,n)}function cn(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=l,u=xr){let a,c,f=!1;if(Qt(t)?(a=()=>t.value,f=!!t._shallow):Gt(t)?(a=()=>t,r=!0):a=_(t)?()=>t.map((t=>Qt(t)?t.value:Gt(t)?fn(t):T(t)?Zt(t,u,2):void 0)):T(t)?e?()=>Zt(t,u,2):()=>{if(!u||!u.isUnmounted)return c&&c(),Zt(t,u,3,[p])}:h,e&&r){const t=a;a=()=>fn(t())}const p=t=>{c=g.options.onStop=()=>{Zt(t,u,4)}};let d=_(t)?[]:un;const v=()=>{if(g.active)if(e){const t=g();(r||f||q(t,d))&&(c&&c(),te(e,u,3,[t,d===un?void 0:d,p]),d=t)}else g()};let y;v.allowRecurse=!!e,y="sync"===i?v:"post"===i?()=>Vn(v,u&&u.suspense):()=>{!u||u.isMounted?function(t){me(t,ue,se,ae)}(v):v()};const g=W(a,{lazy:!0,onTrack:o,onTrigger:s,scheduler:y});return Lr(g,u),e?n?v():d=g():"post"===i?Vn(g,u&&u.suspense):g(),()=>{$(g),u&&m(u.effects,g)}}function ln(t,e,n){const r=this.proxy;return cn(A(t)?()=>r[t]:t.bind(r),e.bind(r),n,this)}function fn(t,e=new Set){if(!S(t)||e.has(t))return t;if(e.add(t),Qt(t))fn(t.value,e);else if(_(t))for(let n=0;n<t.length;n++)fn(t[n],e);else if(I(t)||E(t))t.forEach((t=>{fn(t,e)}));else for(const n in t)fn(t[n],e);return t}function hn(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ze((()=>{t.isMounted=!0})),nn((()=>{t.isUnmounting=!0})),t}const pn=[Function,Array],dn={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:pn,onEnter:pn,onAfterEnter:pn,onEnterCancelled:pn,onBeforeLeave:pn,onLeave:pn,onAfterLeave:pn,onLeaveCancelled:pn,onBeforeAppear:pn,onAppear:pn,onAfterAppear:pn,onAppearCancelled:pn},setup(t,{slots:e}){const n=Or(),r=hn();let i;return()=>{const o=e.default&&wn(e.default(),!0);if(!o||!o.length)return;const s=Yt(t),{mode:u}=s,a=o[0];if(r.isLeaving)return gn(a);const c=mn(a);if(!c)return gn(a);const l=yn(c,s,r,n);bn(c,l);const f=n.subTree,h=f&&mn(f);let p=!1;const{getTransitionKey:d}=c.type;if(d){const t=d();void 0===i?i=t:t!==i&&(i=t,p=!0)}if(h&&h.type!==Yn&&(!er(c,h)||p)){const t=yn(h,s,r,n);if(bn(h,t),"out-in"===u)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,n.update()},gn(a);"in-out"===u&&(t.delayLeave=(t,e,n)=>{vn(r,h)[String(h.key)]=h,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete l.delayedLeave},l.delayedLeave=n})}return a}}};function vn(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function yn(t,e,n,r){const{appear:i,mode:o,persisted:s=!1,onBeforeEnter:u,onEnter:a,onAfterEnter:c,onEnterCancelled:l,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:d,onBeforeAppear:v,onAppear:y,onAfterAppear:g,onAppearCancelled:m}=e,b=String(t.key),w=vn(n,t),_=(t,e)=>{t&&te(t,r,9,e)},E={mode:o,persisted:s,beforeEnter(e){let r=u;if(!n.isMounted){if(!i)return;r=v||u}e._leaveCb&&e._leaveCb(!0);const o=w[b];o&&er(t,o)&&o.el._leaveCb&&o.el._leaveCb(),_(r,[e])},enter(t){let e=a,r=c,o=l;if(!n.isMounted){if(!i)return;e=y||a,r=g||c,o=m||l}let s=!1;const u=t._enterCb=e=>{s||(s=!0,_(e?o:r,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?(e(t,u),e.length<=1&&u()):u()},leave(e,r){const i=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return r();_(f,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,r(),_(n?d:p,[e]),e._leaveCb=void 0,w[i]===t&&delete w[i])};w[i]=t,h?(h(e,s),h.length<=1&&s()):s()},clone:t=>yn(t,e,n,r)};return E}function gn(t){if(_n(t))return(t=sr(t)).children=null,t}function mn(t){return _n(t)?t.children?t.children[0]:void 0:t}function bn(t,e){6&t.shapeFlag&&t.component?bn(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function wn(t,e=!1){let n=[],r=0;for(let i=0;i<t.length;i++){const o=t[i];o.type===Hn?(128&o.patchFlag&&r++,n=n.concat(wn(o.children,e))):(e||o.type!==Yn)&&n.push(o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}const _n=t=>t.type.__isKeepAlive;function En(t,e,n=xr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(We(e,r,n),n){let t=n.parent;for(;t&&t.parent;)_n(t.parent.vnode)&&In(r,e,n,t),t=t.parent}}function In(t,e,n,r){const i=We(e,t,r,!0);rn((()=>{m(r[e],i)}),n)}const Tn=t=>"_"===t[0]||"$stable"===t,An=t=>_(t)?t.map(cr):[cr(t)],Nn=(t,e,n)=>Ve((t=>An(e(t))),n),Sn=(t,e)=>{const n=t._ctx;for(const r in t){if(Tn(r))continue;const i=t[r];if(T(i))e[r]=Nn(0,i,n);else if(null!=i){const t=An(i);e[r]=()=>t}}},xn=(t,e)=>{const n=An(e);t.slots.default=()=>n};function On(t,e){if(null===Ne)return t;const n=Ne.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,s,u=l]=e[i];T(t)&&(t={mounted:t,updated:t}),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:u})}return t}function Cn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const u=i[s];o&&(u.oldValue=o[s].value);const a=u.dir[r];a&&te(a,n,8,[t.el,u,t,e])}}function kn(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},isCustomElement:p,errorHandler:void 0,warnHandler:void 0},mixins:[],components:{},directives:{},provides:Object.create(null)}}let Dn=0;function Pn(t,e){return function(n,r=null){null==r||S(r)||(r=null);const i=kn(),o=new Set;let s=!1;const u=i.app={_uid:Dn++,_component:n,_props:r,_container:null,_context:i,version:jr,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&T(t.install)?(o.add(t),t.install(u,...e)):T(t)&&(o.add(t),t(u,...e))),u),mixin:t=>(i.mixins.includes(t)||(i.mixins.push(t),(t.props||t.emits)&&(i.deopt=!0)),u),component:(t,e)=>e?(i.components[t]=e,u):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,u):i.directives[t],mount(o,a){if(!s){const c=or(n,r);return c.appContext=i,a&&e?e(c,o):t(c,o),s=!0,u._container=o,o.__vue_app__=u,c.component.proxy}},unmount(){s&&t(null,u._container)},provide:(t,e)=>(i.provides[t]=e,u)};return u}}function Ln(t){return T(t)?{setup:t,name:t.name}:t}const Rn={scheduler:ye,allowRecurse:!0},Vn=function(t,e){e&&e.pendingBranch?_(t)?e.effects.push(...t):e.effects.push(t):me(t,le,ce,fe)},Mn=(t,e,n,r)=>{if(_(t))return void t.forEach(((t,i)=>Mn(t,e&&(_(e)?e[i]:e),n,r)));let i;i=!r||r.type.__asyncLoader?null:4&r.shapeFlag?r.component.exposed||r.component.proxy:r.el;const{i:o,r:s}=t,u=e&&e.r,a=o.refs===l?o.refs={}:o.refs,c=o.setupState;if(null!=u&&u!==s&&(A(u)?(a[u]=null,w(c,u)&&(c[u]=null)):Qt(u)&&(u.value=null)),A(s)){const t=()=>{a[s]=i,w(c,s)&&(c[s]=i)};i?(t.id=-1,Vn(t,n)):t()}else if(Qt(s)){const t=()=>{s.value=i};i?(t.id=-1,Vn(t,n)):t()}else T(s)&&Zt(s,o,12,[i,a])};function jn(t){return function(t,e){const{insert:n,remove:r,patchProp:i,forcePatchProp:o,createElement:s,createText:u,createComment:a,setText:c,setElementText:p,parentNode:d,nextSibling:v,setScopeId:y=h,cloneNode:m,insertStaticContent:b}=t,_=(t,e,n,r=null,i=null,o=null,s=!1,u=!1)=>{t&&!er(t,e)&&(r=st(t),J(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:a,ref:c,shapeFlag:l}=e;switch(a){case Kn:E(t,e,n,r);break;case Yn:I(t,e,n,r);break;case Qn:null==t&&T(e,n,r,s);break;case Hn:M(t,e,n,r,i,o,s,u);break;default:1&l?S(t,e,n,r,i,o,s,u):6&l?F(t,e,n,r,i,o,s,u):(64&l||128&l)&&a.process(t,e,n,r,i,o,s,u,at)}null!=c&&i&&Mn(c,t&&t.ref,o,e)},E=(t,e,r,i)=>{if(null==t)n(e.el=u(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&c(n,e.children)}},I=(t,e,r,i)=>{null==t?n(e.el=a(e.children||""),r,i):e.el=t.el},T=(t,e,n,r)=>{[t.el,t.anchor]=b(t.children,e,n,r)},A=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=v(t),n(t,r,i),t=o;n(e,r,i)},N=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=v(t),r(t),t=n;r(e)},S=(t,e,n,r,i,o,s,u)=>{s=s||"svg"===e.type,null==t?O(e,n,r,i,o,s,u):D(t,e,i,o,s,u)},O=(t,e,r,o,u,a,c)=>{let l,f;const{type:h,props:d,shapeFlag:v,transition:y,scopeId:g,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==m&&-1===b)l=t.el=m(t.el);else{if(l=t.el=s(t.type,a,d&&d.is),8&v?p(l,t.children):16&v&&k(t.children,l,null,o,u,a&&"foreignObject"!==h,c||!!t.dynamicChildren),w&&Cn(t,null,o,"created"),d){for(const e in d)P(e)||i(l,e,null,d[e],a,t.children,o,u,it);(f=d.onVnodeBeforeMount)&&Fn(f,o,t)}C(l,g,t,o)}w&&Cn(t,null,o,"beforeMount");const _=(!u||u&&!u.pendingBranch)&&y&&!y.persisted;_&&y.beforeEnter(l),n(l,e,r),((f=d&&d.onVnodeMounted)||_||w)&&Vn((()=>{f&&Fn(f,o,t),_&&y.enter(l),w&&Cn(t,null,o,"mounted")}),u)},C=(t,e,n,r)=>{if(e&&y(t,e),r){const i=r.type.__scopeId;i&&i!==e&&y(t,i+"-s"),n===r.subTree&&C(t,r.vnode.scopeId,r.vnode,r.parent)}},k=(t,e,n,r,i,o,s,u=0)=>{for(let a=u;a<t.length;a++){const u=t[a]=s?lr(t[a]):cr(t[a]);_(null,u,e,n,r,i,o,s)}},D=(t,e,n,r,s,u)=>{const a=e.el=t.el;let{patchFlag:c,dynamicChildren:f,dirs:h}=e;c|=16&t.patchFlag;const d=t.props||l,v=e.props||l;let y;if((y=v.onVnodeBeforeUpdate)&&Fn(y,n,e,t),h&&Cn(e,t,n,"beforeUpdate"),c>0){if(16&c)R(a,e,d,v,n,r,s);else if(2&c&&d.class!==v.class&&i(a,"class",null,v.class,s),4&c&&i(a,"style",d.style,v.style,s),8&c){const u=e.dynamicProps;for(let e=0;e<u.length;e++){const c=u[e],l=d[c],f=v[c];(f!==l||o&&o(a,c))&&i(a,c,l,f,s,t.children,n,r,it)}}1&c&&t.children!==e.children&&p(a,e.children)}else u||null!=f||R(a,e,d,v,n,r,s);const g=s&&"foreignObject"!==e.type;f?L(t.dynamicChildren,f,a,n,r,g):u||K(t,e,a,null,n,r,g),((y=v.onVnodeUpdated)||h)&&Vn((()=>{y&&Fn(y,n,e,t),h&&Cn(e,t,n,"updated")}),r)},L=(t,e,n,r,i,o)=>{for(let s=0;s<e.length;s++){const u=t[s],a=e[s],c=u.type===Hn||!er(u,a)||6&u.shapeFlag||64&u.shapeFlag?d(u.el):n;_(u,a,c,null,r,i,o,!0)}},R=(t,e,n,r,s,u,a)=>{if(n!==r){for(const c in r){if(P(c))continue;const l=r[c],f=n[c];(l!==f||o&&o(t,c))&&i(t,c,f,l,a,e.children,s,u,it)}if(n!==l)for(const o in n)P(o)||o in r||i(t,o,n[o],null,a,e.children,s,u,it)}},M=(t,e,r,i,o,s,a,c)=>{const l=e.el=t?t.el:u(""),f=e.anchor=t?t.anchor:u("");let{patchFlag:h,dynamicChildren:p}=e;h>0&&(c=!0),null==t?(n(l,r,i),n(f,r,i),k(e.children,r,f,o,s,a,c)):h>0&&64&h&&p&&t.dynamicChildren?(L(t.dynamicChildren,p,r,o,s,a),(null!=e.key||o&&e===o.subTree)&&Un(t,e,!0)):K(t,e,r,f,o,s,a,c)},F=(t,e,n,r,i,o,s,u)=>{null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):U(e,n,r,i,o,s,u):q(t,e,u)},U=(t,e,n,r,i,o,s)=>{const u=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||Nr,o={uid:Sr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:He(r,i),emitsOptions:Te(r,i),emit:null,emitted:null,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Ie.bind(null,o),o}(t,r,i);if(_n(t)&&(u.ctx.renderer=at),function(t,e=!1){kr=e;const{props:n,children:r,shapeFlag:i}=t.vnode,o=4&i;Be(t,n,o,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=e,z(e,"_",n)):Sn(e,t.slots={})}else t.slots={},e&&xn(t,e);z(t.slots,nr,1)})(t,r);const s=o?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Tr);const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=Wt(e)};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;xr=t,nt();const i=Zt(r,t,0,[t.props,n]);if(rt(),xr=null,x(i)){if(e)return i.then((e=>{Dr(t,e)}));t.asyncDep=i}else Dr(t,i)}else Pr(t)}(t,e):void 0;kr=!1}(u),u.asyncDep){if(i&&i.registerDep(u,G),!t.el){const t=u.subTree=or(Yn);I(null,t,e,n)}}else G(u,t,e,n,i,o,s)},q=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:u,patchFlag:a}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&a>=0))return!(!i&&!u||u&&u.$stable)||r!==s&&(r?!s||De(r,s,c):!!s);if(1024&a)return!0;if(16&a)return r?De(r,s,c):!!s;if(8&a){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Ae(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void H(r,e,n);r.next=e,function(t){const e=ie.indexOf(t);e>-1&&ie.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},G=(t,e,n,r,i,o,s)=>{t.update=W((function(){if(t.isMounted){let e,{next:n,bu:r,u:u,parent:a,vnode:c}=t,l=n;n?(n.el=c.el,H(t,n,s)):n=c,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&Fn(e,a,n,c);const f=xe(t),h=t.subTree;t.subTree=f,_(h,f,d(h.el),st(h),t,i,o),n.el=f.el,null===l&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,f.el),u&&Vn(u,i),(e=n.props&&n.props.onVnodeUpdated)&&Vn((()=>{Fn(e,a,n,c)}),i)}else{let s;const{el:u,props:a}=e,{bm:c,m:l,parent:f}=t;c&&B(c),(s=a&&a.onVnodeBeforeMount)&&Fn(s,f,e);const h=t.subTree=xe(t);if(u&&lt?lt(e.el,h,t,i):(_(null,h,n,r,t,i,o),e.el=h.el),l&&Vn(l,i),s=a&&a.onVnodeMounted){const t=e;Vn((()=>{Fn(s,f,t)}),i)}const{a:p}=t;p&&256&e.shapeFlag&&Vn(p,i),t.isMounted=!0,e=n=r=null}}),Rn)},H=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,u=Yt(i),[a]=t.propsOptions;if(!(r||s>0)||16&s){let r;ze(t,e,i,o);for(const o in u)e&&(w(e,o)||(r=j(o))!==o&&w(e,r))||(a?!n||void 0===n[o]&&void 0===n[r]||(i[o]=Ge(a,e||l,o,void 0,t)):delete i[o]);if(o!==u)for(const t in o)e&&w(e,t)||delete o[t]}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){const s=n[r],c=e[s];if(a)if(w(o,s))o[s]=c;else{const e=V(s);i[e]=Ge(a,u,e,c,t)}else o[s]=c}}ot(t,"set","$attrs")}(t,e.props,r,n),((t,e)=>{const{vnode:n,slots:r}=t;let i=!0,o=l;if(32&n.shapeFlag){const t=e._;t?1===t?i=!1:g(r,e):(i=!e.$stable,Sn(e,r)),o=e}else e&&(xn(t,e),o={default:1});if(i)for(const s in r)Tn(s)||s in o||delete r[s]})(t,e.children),be(void 0,t.update)},K=(t,e,n,r,i,o,s,u=!1)=>{const a=t&&t.children,c=t?t.shapeFlag:0,l=e.children,{patchFlag:f,shapeFlag:h}=e;if(f>0){if(128&f)return void Q(a,l,n,r,i,o,s,u);if(256&f)return void Y(a,l,n,r,i,o,s,u)}8&h?(16&c&&it(a,i,o),l!==a&&p(n,l)):16&c?16&h?Q(a,l,n,r,i,o,s,u):it(a,i,o,!0):(8&c&&p(n,""),16&h&&k(l,n,r,i,o,s,u))},Y=(t,e,n,r,i,o,s,u)=>{e=e||f;const a=(t=t||f).length,c=e.length,l=Math.min(a,c);let h;for(h=0;h<l;h++){const r=e[h]=u?lr(e[h]):cr(e[h]);_(t[h],r,n,null,i,o,s,u)}a>c?it(t,i,o,!0,!1,l):k(e,n,r,i,o,s,u,l)},Q=(t,e,n,r,i,o,s,u)=>{let a=0;const c=e.length;let l=t.length-1,h=c-1;for(;a<=l&&a<=h;){const r=t[a],c=e[a]=u?lr(e[a]):cr(e[a]);if(!er(r,c))break;_(r,c,n,null,i,o,s,u),a++}for(;a<=l&&a<=h;){const r=t[l],a=e[h]=u?lr(e[h]):cr(e[h]);if(!er(r,a))break;_(r,a,n,null,i,o,s,u),l--,h--}if(a>l){if(a<=h){const t=h+1,l=t<c?e[t].el:r;for(;a<=h;)_(null,e[a]=u?lr(e[a]):cr(e[a]),n,l,i,o,s),a++}}else if(a>h)for(;a<=l;)J(t[a],i,o,!0),a++;else{const p=a,d=a,v=new Map;for(a=d;a<=h;a++){const t=e[a]=u?lr(e[a]):cr(e[a]);null!=t.key&&v.set(t.key,a)}let y,g=0;const m=h-d+1;let b=!1,w=0;const E=new Array(m);for(a=0;a<m;a++)E[a]=0;for(a=p;a<=l;a++){const r=t[a];if(g>=m){J(r,i,o,!0);continue}let c;if(null!=r.key)c=v.get(r.key);else for(y=d;y<=h;y++)if(0===E[y-d]&&er(r,e[y])){c=y;break}void 0===c?J(r,i,o,!0):(E[c-d]=a+1,c>=w?w=c:b=!0,_(r,e[c],n,null,i,o,s,u),g++)}const I=b?function(t){const e=t.slice(),n=[0];let r,i,o,s,u;const a=t.length;for(r=0;r<a;r++){const a=t[r];if(0!==a){if(i=n[n.length-1],t[i]<a){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)u=(o+s)/2|0,t[n[u]]<a?o=u+1:s=u;a<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(E):f;for(y=I.length-1,a=m-1;a>=0;a--){const t=d+a,u=e[t],l=t+1<c?e[t+1].el:r;0===E[a]?_(null,u,n,l,i,o,s):b&&(y<0||a!==I[y]?X(u,n,l,2):y--)}}},X=(t,e,r,i,o=null)=>{const{el:s,type:u,transition:a,children:c,shapeFlag:l}=t;if(6&l)return void X(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void u.move(t,e,r,at);if(u===Hn){n(s,e,r);for(let t=0;t<c.length;t++)X(c[t],e,r,i);return void n(t.anchor,e,r)}if(u===Qn)return void A(t,e,r);if(2!==i&&1&l&&a)if(0===i)a.beforeEnter(s),n(s,e,r),Vn((()=>a.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=a,u=()=>n(s,e,r),c=()=>{t(s,(()=>{u(),o&&o()}))};i?i(s,u,c):c()}else n(s,e,r)},J=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:u,children:a,dynamicChildren:c,shapeFlag:l,patchFlag:f,dirs:h}=t;if(null!=u&&Mn(u,null,n,null),256&l)return void e.ctx.deactivate(t);const p=1&l&&h;let d;if((d=s&&s.onVnodeBeforeUnmount)&&Fn(d,e,t),6&l)et(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Cn(t,null,e,"beforeUnmount"),c&&(o!==Hn||f>0&&64&f)?it(c,e,n,!1,!0):(o===Hn&&(128&f||256&f)||!i&&16&l)&&it(a,e,n),64&l&&(r||!qn(t.props))&&t.type.remove(t,at),r&&Z(t)}((d=s&&s.onVnodeUnmounted)||p)&&Vn((()=>{d&&Fn(d,e,t),p&&Cn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===Hn)return void tt(n,i);if(e===Qn)return void N(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},tt=(t,e)=>{let n;for(;t!==e;)n=v(t),r(t),t=n;r(e)},et=(t,e,n)=>{const{bum:r,effects:i,update:o,subTree:s,um:u}=t;if(r&&B(r),i)for(let a=0;a<i.length;a++)$(i[a]);o&&($(o),J(s,t,e,n)),u&&Vn(u,e),Vn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},it=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)J(t[s],e,n,r,i)},st=t=>6&t.shapeFlag?st(t.component.subTree):128&t.shapeFlag?t.suspense.next():v(t.anchor||t.el),ut=(t,e)=>{null==t?e._vnode&&J(e._vnode,null,null,!0):_(e._vnode||null,t,e),we(),e._vnode=t},at={p:_,um:J,m:X,r:Z,mt:U,mc:k,pc:K,pbc:L,n:st,o:t};let ct,lt;e&&([ct,lt]=e(at));return{render:ut,hydrate:ct,createApp:Pn(ut,ct)}}(t)}function Fn(t,e,n,r=null){te(t,e,7,[n,r])}function Un(t,e,n=!1){const r=t.children,i=e.children;if(_(r)&&_(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=lr(i[o]),e.el=t.el),n||Un(t,e))}}const qn=t=>t&&(t.disabled||""===t.disabled);function Bn(t){return function(t,e,n=!0){const r=Ne||xr;if(r){const n=r.type;if("components"===t){if("_self"===e)return n;const t=Rr(n);if(t&&(t===e||t===V(e)||t===F(V(e))))return n}return Gn(r[t]||n[t],e)||Gn(r.appContext[t],e)}}("components",t)||t}const zn=Symbol();function Gn(t,e){return t&&(t[e]||t[V(e)]||t[F(V(e))])}const Hn=Symbol(void 0),Kn=Symbol(void 0),Yn=Symbol(void 0),Qn=Symbol(void 0),Xn=[];let Wn=null;function $n(t=!1){Xn.push(Wn=t?null:[])}function Jn(){Xn.pop(),Wn=Xn[Xn.length-1]||null}function Zn(t,e,n,r,i){const o=or(t,e,n,r,i,!0);return o.dynamicChildren=Wn||f,Jn(),Wn&&Wn.push(o),o}function tr(t){return!!t&&!0===t.__v_isVNode}function er(t,e){return t.type===e.type&&t.key===e.key}const nr="__vInternal",rr=({key:t})=>null!=t?t:null,ir=({ref:t})=>null!=t?A(t)||Qt(t)||T(t)?{i:Ne,r:t}:t:null,or=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==zn||(t=Yn);if(tr(t)){const r=sr(t,e,!0);return n&&fr(r,n),r}a=t,T(a)&&"__vccOpts"in a&&(t=t.__vccOpts);var a;if(e){(Kt(e)||nr in e)&&(e=g({},e));let{class:t,style:n}=e;t&&!A(t)&&(e.class=u(t)),S(n)&&(Kt(n)&&!_(n)&&(n=g({},n)),e.style=r(n))}const c=A(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:S(t)?4:T(t)?2:0,l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&rr(e),ref:e&&ir(e),scopeId:Me,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};if(fr(l,n),128&c){const{content:t,fallback:e}=function(t){const{shapeFlag:e,children:n}=t;let r,i;return 32&e?(r=Pe(n.default),i=Pe(n.fallback)):(r=Pe(n),i=cr(null)),{content:r,fallback:i}}(l);l.ssContent=t,l.ssFallback=e}!s&&Wn&&(i>0||6&c)&&32!==i&&Wn.push(l);return l};function sr(t,e,n=!1){const{props:i,ref:o,patchFlag:s}=t,a=e?function(...t){const e=g({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=u([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(v(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,i[t]):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&rr(a),ref:e&&e.ref?n&&o?_(o)?o.concat(ir(e)):[o,ir(e)]:ir(e):o,scopeId:t.scopeId,children:t.children,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Hn?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&sr(t.ssContent),ssFallback:t.ssFallback&&sr(t.ssFallback),el:t.el,anchor:t.anchor}}function ur(t=" ",e=0){return or(Kn,null,t,e)}function ar(t="",e=!1){return e?($n(),Zn(Yn,null,t)):or(Yn,null,t)}function cr(t){return null==t||"boolean"==typeof t?or(Yn):_(t)?or(Hn,null,t):"object"==typeof t?null===t.el?t:sr(t):or(Kn,null,String(t))}function lr(t){return null===t.el?t:sr(t)}function fr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(_(e))n=16;else if("object"==typeof e){if(1&r||64&r){const n=e.default;return void(n&&(n._c&&Re(1),fr(t,n()),n._c&&Re(-1)))}{n=32;const r=e._;r||nr in e?3===r&&Ne&&(1024&Ne.vnode.patchFlag?(e._=2,t.patchFlag|=1024):e._=1):e._ctx=Ne}}else T(e)?(e={default:e,_ctx:Ne},n=32):(e=String(e),64&r?(n=16,e=[ur(e)]):n=8);t.children=e,t.shapeFlag|=n}function hr(t,e,n=!1){const r=xr||Ne;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&T(e)?e():e}}let pr=!1;function dr(t,e,n=[],r=[],i=[],o=!1){const{mixins:s,extends:u,data:a,computed:c,methods:f,watch:p,provide:d,inject:v,components:y,directives:m,beforeMount:b,mounted:w,beforeUpdate:E,updated:I,activated:A,deactivated:N,beforeDestroy:x,beforeUnmount:O,destroyed:C,unmounted:k,render:D,renderTracked:P,renderTriggered:L,errorCaptured:R,expose:V}=e,M=t.proxy,j=t.ctx,F=t.appContext.mixins;if(o&&D&&t.render===h&&(t.render=D),o||(pr=!0,vr("beforeCreate","bc",e,t,F),pr=!1,mr(t,F,n,r,i)),u&&dr(t,u,n,r,i,!0),s&&mr(t,s,n,r,i),v)if(_(v))for(let l=0;l<v.length;l++){const t=v[l];j[t]=hr(t)}else for(const l in v){const t=v[l];S(t)?j[l]=hr(t.from||l,t.default,!0):j[l]=hr(t)}if(f)for(const l in f){const t=f[l];T(t)&&(j[l]=t.bind(M))}if(o?a&&n.push(a):(n.length&&n.forEach((e=>br(t,e,M))),a&&br(t,a,M)),c)for(const l in c){const t=c[l],e=Vr({get:T(t)?t.bind(M,M):T(t.get)?t.get.bind(M,M):h,set:!T(t)&&T(t.set)?t.set.bind(M):h});Object.defineProperty(j,l,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}var U;if(p&&r.push(p),!o&&r.length&&r.forEach((t=>{for(const e in t)wr(t[e],j,M,e)})),d&&i.push(d),!o&&i.length&&i.forEach((t=>{const e=T(t)?t.call(M):t;Reflect.ownKeys(e).forEach((t=>{!function(t,e){if(xr){let n=xr.provides;const r=xr.parent&&xr.parent.provides;r===n&&(n=xr.provides=Object.create(r)),n[t]=e}}(t,e[t])}))})),o&&(y&&g(t.components||(t.components=g({},t.type.components)),y),m&&g(t.directives||(t.directives=g({},t.type.directives)),m)),o||vr("created","c",e,t,F),b&&Je(b.bind(M)),w&&Ze(w.bind(M)),E&&tn(E.bind(M)),I&&en(I.bind(M)),A&&En(A.bind(M),"a",U),N&&function(t,e){En(t,"da",e)}(N.bind(M)),R&&((t,e=xr)=>{We("ec",t,e)})(R.bind(M)),P&&sn(P.bind(M)),L&&on(L.bind(M)),O&&nn(O.bind(M)),k&&rn(k.bind(M)),_(V)&&!o)if(V.length){const e=t.exposed||(t.exposed=Wt({}));V.forEach((t=>{e[t]=function(t,e){return Qt(t[e])?t[e]:new $t(t,e)}(M,t)}))}else t.exposed||(t.exposed=l)}function vr(t,e,n,r,i){gr(t,e,i,r);const{extends:o,mixins:s}=n;o&&yr(t,e,o,r),s&&gr(t,e,s,r);const u=n[t];u&&te(u.bind(r.proxy),r,e)}function yr(t,e,n,r){n.extends&&yr(t,e,n.extends,r);const i=n[t];i&&te(i.bind(r.proxy),r,e)}function gr(t,e,n,r){for(let i=0;i<n.length;i++){const o=n[i].mixins;o&&gr(t,e,o,r);const s=n[i][t];s&&te(s.bind(r.proxy),r,e)}}function mr(t,e,n,r,i){for(let o=0;o<e.length;o++)dr(t,e[o],n,r,i,!0)}function br(t,e,n){const r=e.call(n,n);S(r)&&(t.data===l?t.data=qt(r):g(t.data,r))}function wr(t,e,n,r){const i=r.includes(".")?function(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}(n,r):()=>n[r];if(A(t)){const n=e[t];T(n)&&an(i,n)}else if(T(t))an(i,t.bind(n));else if(S(t))if(_(t))t.forEach((t=>wr(t,e,n,r)));else{const r=T(t.handler)?t.handler.bind(n):e[t.handler];T(r)&&an(i,r,t)}}function _r(t,e,n){const r=n.appContext.config.optionMergeStrategies,{mixins:i,extends:o}=e;o&&_r(t,o,n),i&&i.forEach((e=>_r(t,e,n)));for(const s in e)r&&w(r,s)?t[s]=r[s](t[s],e[s],n.proxy,s):t[s]=e[s]}const Er=t=>t&&(t.proxy?t.proxy:Er(t.parent)),Ir=g(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Er(t.parent),$root:t=>t.root&&t.root.proxy,$emit:t=>t.emit,$options:t=>function(t){const e=t.type,{__merged:n,mixins:r,extends:i}=e;if(n)return n;const o=t.appContext.mixins;if(!o.length&&!r&&!i)return e;const s={};return o.forEach((e=>_r(s,e,t))),_r(s,e,t),e.__merged=s}(t),$forceUpdate:t=>()=>ye(t.update),$nextTick:t=>ve.bind(t.proxy),$watch:t=>ln.bind(t)}),Tr={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:u,appContext:a}=t;if("__v_skip"===e)return!0;let c;if("$"!==e[0]){const u=s[e];if(void 0!==u)switch(u){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==l&&w(r,e))return s[e]=0,r[e];if(i!==l&&w(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&w(c,e))return s[e]=2,o[e];if(n!==l&&w(n,e))return s[e]=3,n[e];pr||(s[e]=4)}}const f=Ir[e];let h,p;return f?("$attrs"===e&&it(t,0,e),f(t)):(h=u.__cssModules)&&(h=h[e])?h:n!==l&&w(n,e)?(s[e]=3,n[e]):(p=a.config.globalProperties,w(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==l&&w(i,e))i[e]=n;else if(r!==l&&w(r,e))r[e]=n;else if(e in t.props)return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let u;return void 0!==n[s]||t!==l&&w(t,s)||e!==l&&w(e,s)||(u=o[0])&&w(u,s)||w(r,s)||w(Ir,s)||w(i.config.globalProperties,s)}},Ar=g({},Tr,{get(t,e){if(e!==Symbol.unscopables)return Tr.get(t,e,t)},has:(t,n)=>"_"!==n[0]&&!e(n)}),Nr=kn();let Sr=0;let xr=null;const Or=()=>xr||Ne,Cr=t=>{xr=t};let kr=!1;function Dr(t,e,n){T(e)?t.render=e:S(e)&&(t.setupState=Wt(e)),Pr(t)}function Pr(t,e){const n=t.type;t.render||(t.render=n.render||h,t.render._rc&&(t.withProxy=new Proxy(t.ctx,Ar))),xr=t,nt(),dr(t,n),rt(),xr=null}function Lr(t,e=xr){e&&(e.effects||(e.effects=[])).push(t)}function Rr(t){return T(t)&&t.displayName||t.name}function Vr(t){const e=function(t){let e,n;return T(t)?(e=t,n=h):(e=t.get,n=t.set),new Jt(e,n,T(t)||!t.set)}(t);return Lr(e.effect),e}function Mr(t,e){let n;if(_(t)||A(t)){n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=e(t[r],r)}else if("number"==typeof t){n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r+1,r)}else if(S(t))if(t[Symbol.iterator])n=Array.from(t,e);else{const r=Object.keys(t);n=new Array(r.length);for(let i=0,o=r.length;i<o;i++){const o=r[i];n[i]=e(t[o],o,i)}}else n=[];return n}const jr="3.0.5",Fr="http://www.w3.org/2000/svg",Ur="undefined"!=typeof document?document:null;let qr,Br;const zr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n)=>e?Ur.createElementNS(Fr,t):Ur.createElement(t,n?{is:n}:void 0),createText:t=>Ur.createTextNode(t),createComment:t=>Ur.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ur.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode:t=>t.cloneNode(!0),insertStaticContent(t,e,n,r){const i=r?Br||(Br=Ur.createElementNS(Fr,"svg")):qr||(qr=Ur.createElement("div"));i.innerHTML=t;const o=i.firstChild;let s=o,u=s;for(;s;)u=s,zr.insert(s,e,n),s=i.firstChild;return[o,u]}};const Gr=/\s*!important$/;function Hr(t,e,n){if(_(n))n.forEach((n=>Hr(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Yr[e];if(n)return n;let r=V(e);if("filter"!==r&&r in t)return Yr[e]=r;r=F(r);for(let i=0;i<Kr.length;i++){const n=Kr[i]+r;if(n in t)return Yr[e]=n}return e}(t,e);Gr.test(n)?t.setProperty(j(r),n.replace(Gr,""),"important"):t[r]=n}}const Kr=["Webkit","Moz","ms"],Yr={};const Qr="http://www.w3.org/1999/xlink";let Xr=Date.now;"undefined"!=typeof document&&Xr()>document.createEvent("Event").timeStamp&&(Xr=()=>performance.now());let Wr=0;const $r=Promise.resolve(),Jr=()=>{Wr=0};function Zr(t,e,n,r){t.addEventListener(e,n,r)}function ti(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,u]=function(t){let e;if(ei.test(t)){let n;for(e={};n=t.match(ei);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t.slice(2).toLowerCase(),e]}(e);if(r){Zr(t,n,o[e]=function(t,e){const n=t=>{(t.timeStamp||Xr())>=n.attached-1&&te(function(t,e){if(_(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>Wr||($r.then(Jr),Wr=Xr()))(),n}(r,i),u)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,u),o[e]=void 0)}}const ei=/(?:Once|Passive|Capture)$/;const ni=/^on[a-z]/;const ri=(t,{slots:e})=>function(t,e,n){const r=arguments.length;return 2===r?S(e)&&!_(e)?tr(e)?or(t,null,[e]):or(t,e):or(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&tr(n)&&(n=[n]),or(t,e,n))}(dn,si(t),e);ri.displayName="Transition";const ii={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},oi=ri.props=g({},dn.props,ii);function si(t){let{name:e="v",type:n,css:r=!0,duration:i,enterFromClass:o=`${e}-enter-from`,enterActiveClass:s=`${e}-enter-active`,enterToClass:u=`${e}-enter-to`,appearFromClass:a=o,appearActiveClass:c=s,appearToClass:l=u,leaveFromClass:f=`${e}-leave-from`,leaveActiveClass:h=`${e}-leave-active`,leaveToClass:p=`${e}-leave-to`}=t;const d={};for(const g in t)g in ii||(d[g]=t[g]);if(!r)return d;const v=function(t){if(null==t)return null;if(S(t))return[ui(t.enter),ui(t.leave)];{const e=ui(t);return[e,e]}}(i),y=v&&v[0],m=v&&v[1],{onBeforeEnter:b,onEnter:w,onEnterCancelled:_,onLeave:E,onLeaveCancelled:I,onBeforeAppear:T=b,onAppear:A=w,onAppearCancelled:N=_}=d,x=(t,e,n)=>{ci(t,e?l:u),ci(t,e?c:s),n&&n()},O=(t,e)=>{ci(t,p),ci(t,h),e&&e()},C=t=>(e,r)=>{const i=t?A:w,s=()=>x(e,t,r);i&&i(e,s),li((()=>{ci(e,t?a:o),ai(e,t?l:u),i&&i.length>1||hi(e,n,y,s)}))};return g(d,{onBeforeEnter(t){b&&b(t),ai(t,o),ai(t,s)},onBeforeAppear(t){T&&T(t),ai(t,a),ai(t,c)},onEnter:C(!1),onAppear:C(!0),onLeave(t,e){const r=()=>O(t,e);ai(t,f),yi(),ai(t,h),li((()=>{ci(t,f),ai(t,p),E&&E.length>1||hi(t,n,m,r)})),E&&E(t,r)},onEnterCancelled(t){x(t,!1),_&&_(t)},onAppearCancelled(t){x(t,!0),N&&N(t)},onLeaveCancelled(t){O(t),I&&I(t)}})}function ui(t){return G(t)}function ai(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function ci(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function li(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let fi=0;function hi(t,e,n,r){const i=t._endId=++fi,o=()=>{i===t._endId&&r()};if(n)return setTimeout(o,n);const{type:s,timeout:u,propCount:a}=pi(t,e);if(!s)return r();const c=s+"end";let l=0;const f=()=>{t.removeEventListener(c,h),o()},h=e=>{e.target===t&&++l>=a&&f()};setTimeout((()=>{l<a&&f()}),u+1),t.addEventListener(c,h)}function pi(t,e){const n=window.getComputedStyle(t),r=t=>(n[t]||"").split(", "),i=r("transitionDelay"),o=r("transitionDuration"),s=di(i,o),u=r("animationDelay"),a=r("animationDuration"),c=di(u,a);let l=null,f=0,h=0;"transition"===e?s>0&&(l="transition",f=s,h=o.length):"animation"===e?c>0&&(l="animation",f=c,h=a.length):(f=Math.max(s,c),l=f>0?s>c?"transition":"animation":null,h=l?"transition"===l?o.length:a.length:0);return{type:l,timeout:f,propCount:h,hasTransform:"transition"===l&&/\b(transform|all)(,|$)/.test(n.transitionProperty)}}function di(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map(((e,n)=>vi(e)+vi(t[n]))))}function vi(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function yi(){return document.body.offsetHeight}const gi=new WeakMap,mi=new WeakMap,bi={name:"TransitionGroup",props:g({},oi,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Or(),r=hn();let i,o;return en((()=>{if(!i.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!function(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&r.classList.remove(t)))}));n.split(/\s+/).forEach((t=>t&&r.classList.add(t))),r.style.display="none";const i=1===e.nodeType?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=pi(r);return i.removeChild(r),o}(i[0].el,n.vnode.el,e))return;i.forEach(wi),i.forEach(_i);const r=i.filter(Ei);yi(),r.forEach((t=>{const n=t.el,r=n.style;ai(n,e),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,ci(n,e))};n.addEventListener("transitionend",i)}))})),()=>{const s=Yt(t),u=si(s),a=s.tag||Hn;i=o,o=e.default?wn(e.default()):[];for(let t=0;t<o.length;t++){const e=o[t];null!=e.key&&bn(e,yn(e,u,r,n))}if(i)for(let t=0;t<i.length;t++){const e=i[t];bn(e,yn(e,u,r,n)),gi.set(e,e.el.getBoundingClientRect())}return or(a,null,o)}}};function wi(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function _i(t){mi.set(t,t.el.getBoundingClientRect())}function Ei(t){const e=gi.get(t),n=mi.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${r}px,${i}px)`,e.transitionDuration="0s",t}}const Ii=t=>{const e=t.props["onUpdate:modelValue"];return _(e)?t=>B(e,t):e};function Ti(t){t.target.composing=!0}function Ai(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const Ni={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=Ii(i);const o=r||"number"===t.type;Zr(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n?r=r.trim():o&&(r=G(r)),t._assign(r)})),n&&Zr(t,"change",(()=>{t.value=t.value.trim()})),e||(Zr(t,"compositionstart",Ti),Zr(t,"compositionend",Ai),Zr(t,"change",Ai))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{trim:n,number:r}},i){if(t._assign=Ii(i),t.composing)return;if(document.activeElement===t){if(n&&t.value.trim()===e)return;if((r||"number"===t.type)&&G(t.value)===e)return}const o=null==e?"":e;t.value!==o&&(t.value=o)}},Si=["ctrl","shift","alt","meta"],xi={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>Si.some((n=>t[`${n}Key`]&&!e.includes(n)))},Oi=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=xi[e[t]];if(r&&r(n,e))return}return t(n,...r)},Ci=g({patchProp:(t,e,r,i,o=!1,s,u,a,c)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,i,o);break;case"style":!function(t,e,n){const r=t.style;if(n)if(A(n))e!==n&&(r.cssText=n);else{for(const t in n)Hr(r,t,n[t]);if(e&&!A(e))for(const t in e)null==n[t]&&Hr(r,t,"")}else t.removeAttribute("style")}(t,r,i);break;default:v(e)?y(e)||ti(t,e,0,i,u):function(t,e,n,r){if(r)return"innerHTML"===e||!!(e in t&&ni.test(e)&&T(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e&&"string"==typeof n)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if(ni.test(e)&&A(n))return!1;return e in t}(t,e,i,o)?function(t,e,n,r,i,o,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,i,o),void(t[e]=null==n?"":n);if("value"!==e||"PROGRESS"===t.tagName){if(""===n||null==n){const r=typeof t[e];if(""===n&&"boolean"===r)return void(t[e]=!0);if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch(uw){}}else{t._value=n;const e=null==n?"":n;t.value!==e&&(t.value=e)}}(t,e,i,s,u,a,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),function(t,e,r,i){if(i&&e.startsWith("xlink:"))null==r?t.removeAttributeNS(Qr,e.slice(6,e.length)):t.setAttributeNS(Qr,e,r);else{const i=n(e);null==r||i&&!1===r?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}(t,e,i,o))}},forcePatchProp:(t,e)=>"value"===e},zr);let ki;const Di=(...t)=>{const e=(ki||(ki=jn(Ci))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(A(t)){return document.querySelector(t)}return t}
/*!
 * vuex v4.0.0
 * (c) 2021 Evan You
 * @license MIT
 */(t);if(!r)return;const i=e._component;T(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var Pi=("undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function Li(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function Ri(t){return null!==t&&"object"==typeof t}var Vi=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},Mi={namespaced:{configurable:!0}};Mi.namespaced.get=function(){return!!this._rawModule.namespaced},Vi.prototype.addChild=function(t,e){this._children[t]=e},Vi.prototype.removeChild=function(t){delete this._children[t]},Vi.prototype.getChild=function(t){return this._children[t]},Vi.prototype.hasChild=function(t){return t in this._children},Vi.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},Vi.prototype.forEachChild=function(t){Li(this._children,t)},Vi.prototype.forEachGetter=function(t){this._rawModule.getters&&Li(this._rawModule.getters,t)},Vi.prototype.forEachAction=function(t){this._rawModule.actions&&Li(this._rawModule.actions,t)},Vi.prototype.forEachMutation=function(t){this._rawModule.mutations&&Li(this._rawModule.mutations,t)},Object.defineProperties(Vi.prototype,Mi);var ji=function(t){this.register([],t,!1)};function Fi(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;Fi(t.concat(r),e.getChild(r),n.modules[r])}}function Ui(t){return new qi(t)}ji.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},ji.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")}),"")},ji.prototype.update=function(t){Fi([],this.root,t)},ji.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=new Vi(e,n);0===t.length?this.root=i:this.get(t.slice(0,-1)).addChild(t[t.length-1],i);e.modules&&Li(e.modules,(function(e,i){r.register(t.concat(i),e,n)}))},ji.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r&&r.runtime&&e.removeChild(n)},ji.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};var qi=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var r=t.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ji(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null);var i=this,o=this.dispatch,s=this.commit;this.dispatch=function(t,e){return o.call(i,t,e)},this.commit=function(t,e,n){return s.call(i,t,e,n)},this.strict=r;var u=this._modules.root.state;Ki(this,u,[],this._modules.root),Hi(this,u),n.forEach((function(t){return t(e)})),(void 0===t.devtools||t.devtools)&&function(t){Pi&&(t._devtoolHook=Pi,Pi.emit("vuex:init",t),Pi.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){Pi.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){Pi.emit("vuex:action",t,e)}),{prepend:!0}))}(this)},Bi={state:{configurable:!0}};function zi(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function Gi(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Ki(t,n,[],t._modules.root,!0),Hi(t,n,e)}function Hi(t,e,n){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={};Li(i,(function(e,n){o[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return o[n]()},enumerable:!0})})),t._state=qt({data:e}),t.strict&&function(t){an((function(){return t._state.data}),(function(){}),{deep:!0,flush:"sync"})}(t),r&&n&&t._withCommit((function(){r.data=null}))}function Ki(t,e,n,r,i){var o=!n.length,s=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=r),!o&&!i){var u=Yi(e,n.slice(0,-1)),a=n[n.length-1];t._withCommit((function(){u[a]=r.state}))}var c=r.context=function(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var o=Qi(n,r,i),s=o.payload,u=o.options,a=o.type;return u&&u.root||(a=e+a),t.dispatch(a,s)},commit:r?t.commit:function(n,r,i){var o=Qi(n,r,i),s=o.payload,u=o.options,a=o.type;u&&u.root||(a=e+a),t.commit(a,s,u)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,r)===e){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return Yi(t.state,n)}}}),i}(t,s,n);r.forEachMutation((function(e,n){!function(t,e,n,r){(t._mutations[e]||(t._mutations[e]=[])).push((function(e){n.call(t,r.state,e)}))}(t,s+n,e,c)})),r.forEachAction((function(e,n){var r=e.root?n:s+n,i=e.handler||e;!function(t,e,n,r){(t._actions[e]||(t._actions[e]=[])).push((function(e){var i,o=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return(i=o)&&"function"==typeof i.then||(o=Promise.resolve(o)),t._devtoolHook?o.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):o}))}(t,r,i,c)})),r.forEachGetter((function(e,n){!function(t,e,n,r){if(t._wrappedGetters[e])return;t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)}}(t,s+n,e,c)})),r.forEachChild((function(r,o){Ki(t,e,n.concat(o),r,i)}))}function Yi(t,e){return e.reduce((function(t,e){return t[e]}),t)}function Qi(t,e,n){return Ri(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}qi.prototype.install=function(t,e){t.provide(e||"store",this),t.config.globalProperties.$store=this},Bi.state.get=function(){return this._state.data},Bi.state.set=function(t){},qi.prototype.commit=function(t,e,n){var r=this,i=Qi(t,e,n),o=i.type,s=i.payload,u={type:o,payload:s},a=this._mutations[o];a&&(this._withCommit((function(){a.forEach((function(t){t(s)}))})),this._subscribers.slice().forEach((function(t){return t(u,r.state)})))},qi.prototype.dispatch=function(t,e){var n=this,r=Qi(t,e),i=r.type,o=r.payload,s={type:i,payload:o},u=this._actions[i];if(u){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(s,n.state)}))}catch(uw){}var a=u.length>1?Promise.all(u.map((function(t){return t(o)}))):u[0](o);return new Promise((function(t,e){a.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,n.state)}))}catch(uw){}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch(uw){}e(t)}))}))}},qi.prototype.subscribe=function(t,e){return zi(t,this._subscribers,e)},qi.prototype.subscribeAction=function(t,e){return zi("function"==typeof t?{before:t}:t,this._actionSubscribers,e)},qi.prototype.watch=function(t,e,n){var r=this;return an((function(){return t(r.state,r.getters)}),e,Object.assign({},n))},qi.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},qi.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),Ki(this,this.state,t,this._modules.get(t),n.preserveState),Hi(this,this.state)},qi.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){delete Yi(e.state,t.slice(0,-1))[t[t.length-1]]})),Gi(this)},qi.prototype.hasModule=function(t){return"string"==typeof t&&(t=[t]),this._modules.isRegistered(t)},qi.prototype.hotUpdate=function(t){this._modules.update(t),Gi(this,!0)},qi.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(qi.prototype,Bi);var Xi=Ji((function(t,e){var n={};return $i(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=Zi(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"==typeof i?i.call(this,e,n):e[i]},n[r].vuex=!0})),n})),Wi=Ji((function(t,e){var n={};return $i(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var o=Zi(this.$store,"mapActions",t);if(!o)return;r=o.context.dispatch}return"function"==typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n}));function $i(t){return function(t){return Array.isArray(t)||Ri(t)}(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function Ji(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function Zi(t,e,n){return t._modulesNamespaceMap[n]}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var to=function(t,e){return(to=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function eo(t,e){function n(){this.constructor=t}to(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var no=function(){return(no=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ro(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{a(r.next(t))}catch(uw){o(uw)}}function u(t){try{a(r.throw(t))}catch(uw){o(uw)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,u)}a((r=r.apply(t,e||[])).next())}))}function io(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(uw){o=[6,uw],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function oo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function so(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function uo(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(so(arguments[e]));return t}function ao(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=co(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lo=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ho(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(uw){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var po=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,vo.prototype.create),o}return eo(e,t),e}(Error),vo=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?yo(o,r):"Error",u=this.serviceName+": "+s+" ("+i+").",a=new po(i,u,r);return a},t}();function yo(t,e){return t.replace(go,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var go=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bo(t,e){var n=new wo(t,e);return n.subscribe.bind(n)}var wo=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=_o),void 0===r.error&&(r.error=_o),void 0===r.complete&&(r.complete=_o);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(uw){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(uw){"undefined"!=typeof console&&console.error&&console.error(uw)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function _o(){}var Eo=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),Io=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new lo;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(uw){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=no({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(!o){if(r)return null;throw Error("Service "+this.name+" is not available")}return o}catch(uw){if(r)return null;throw uw}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(uw){}try{for(var r=oo(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=so(i.value,2),s=o[0],u=o[1],a=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(a);u.resolve(c)}catch(uw){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return ro(this,void 0,void 0,(function(){var t;return io(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(uo(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var To,Ao=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Io(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function No(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var So,xo,Oo=[];(xo=So||(So={}))[xo.DEBUG=0]="DEBUG",xo[xo.VERBOSE=1]="VERBOSE",xo[xo.INFO=2]="INFO",xo[xo.WARN=3]="WARN",xo[xo.ERROR=4]="ERROR",xo[xo.SILENT=5]="SILENT";var Co,ko={debug:So.DEBUG,verbose:So.VERBOSE,info:So.INFO,warn:So.WARN,error:So.ERROR,silent:So.SILENT},Do=So.INFO,Po=((To={})[So.DEBUG]="log",To[So.VERBOSE]="log",To[So.INFO]="info",To[So.WARN]="warn",To[So.ERROR]="error",To),Lo=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Po[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,No(["["+i+"]  "+t.name+":"],n))}},Ro=function(){function t(t){this.name=t,this._logLevel=Do,this._logHandler=Lo,this._userLogHandler=null,Oo.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in So))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ko[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,No([this,So.DEBUG],t)),this._logHandler.apply(this,No([this,So.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,No([this,So.VERBOSE],t)),this._logHandler.apply(this,No([this,So.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,No([this,So.INFO],t)),this._logHandler.apply(this,No([this,So.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,No([this,So.WARN],t)),this._logHandler.apply(this,No([this,So.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,No([this,So.ERROR],t)),this._logHandler.apply(this,No([this,So.ERROR],t))},t}();function Vo(t){Oo.forEach((function(e){e.setLogLevel(t)}))}var Mo,jo=((Co={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Co["bad-app-name"]="Illegal App name: '{$appName}",Co["duplicate-app"]="Firebase App named '{$appName}' already exists",Co["app-deleted"]="Firebase App named '{$appName}' already deleted",Co["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Co["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Co),Fo=new vo("app","Firebase",jo),Uo=((Mo={})["@firebase/app"]="fire-core",Mo["@firebase/analytics"]="fire-analytics",Mo["@firebase/auth"]="fire-auth",Mo["@firebase/database"]="fire-rtdb",Mo["@firebase/functions"]="fire-fn",Mo["@firebase/installations"]="fire-iid",Mo["@firebase/messaging"]="fire-fcm",Mo["@firebase/performance"]="fire-perf",Mo["@firebase/remote-config"]="fire-rc",Mo["@firebase/storage"]="fire-gcs",Mo["@firebase/firestore"]="fire-fst",Mo["fire-js"]="fire-js",Mo["firebase-wrapper"]="fire-js-all",Mo),qo=new Ro("@firebase/app"),Bo=function(){function t(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=co(void 0,t),this.container=new Ao(e.name),this._addComponent(new Eo("app",(function(){return o}),"PUBLIC"));try{for(var s=oo(this.firebase_.INTERNAL.components.values()),u=s.next();!u.done;u=s.next()){var a=u.value;this._addComponent(a)}}catch(c){r={error:c}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(uw){qo.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,uw)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Fo.create("app-deleted",{appName:this.name_})},t}();Bo.prototype.name&&Bo.prototype.options||Bo.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zo(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw Fo.create("bad-app-name",{appName:String(s)});if(mo(e,s))throw Fo.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Uo[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&a.push("and"),u&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void qo.warn(a.join(" "))}o(new Eo(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Vo,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Fo.create("invalid-log-argument",{appName:name});!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ko[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:So[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Oo;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.2.5",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!mo(e,t=t||"[DEFAULT]"))throw Fo.create("no-app",{appName:t});return e[t]}function o(o){var s,u,a=o.name;if(n.has(a))return qo.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var c=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw Fo.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&co(c,o.serviceProps),r[a]=c,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}try{for(var l=oo(Object.keys(e)),f=l.next();!f.done;f=l.next()){var h=f.value;e[h]._addComponent(o)}}catch(p){s={error:p}}finally{try{f&&!f.done&&(u=l.return)&&u.call(l)}finally{if(s)throw s.error}}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Go=function t(){var e=zo(Bo);return e.INTERNAL=no(no({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){co(e,t)},createSubscribe:bo,ErrorFactory:vo,deepExtend:co}),e}(),Ho=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){qo.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ko=self.firebase.SDK_VERSION;Ko&&Ko.indexOf("LITE")>=0&&qo.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Yo=Go.initializeApp;Go.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ho()&&qo.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Yo.apply(void 0,t)};var Qo,Xo,Wo=Go;(Qo=Wo).INTERNAL.registerComponent(new Eo("platform-logger",(function(t){return new Ho(t)}),"PRIVATE")),Qo.registerVersion("@firebase/app","0.6.14",Xo),Qo.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Wo.registerVersion("firebase","8.2.6","app");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var $o=function(t,e){return($o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Jo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Zo,ts="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},es=es||{},ns=ts||self;function rs(){}function is(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function os(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ss="closure_uid_"+(1e9*Math.random()>>>0),us=0;function as(t,e,n){return t.call.apply(t.bind,arguments)}function cs(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ls(t,e,n){return(ls=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?as:cs).apply(null,arguments)}function fs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function hs(){return Date.now()}function ps(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ds(){this.j=this.j,this.i=this.i}ds.prototype.j=!1,ds.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,ss)&&t[ss]||(t[ss]=++us))},ds.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var vs=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ys=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function gs(t){return Array.prototype.concat.apply([],arguments)}function ms(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function bs(t){return/^[\s\xa0]*$/.test(t)}var ws,_s=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Es(t,e){return-1!=t.indexOf(e)}function Is(t,e){return t<e?-1:t>e?1:0}t:{var Ts=ns.navigator;if(Ts){var As=Ts.userAgent;if(As){ws=As;break t}}ws=""}function Ns(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Ss(t){var e={};for(var n in t)e[n]=t[n];return e}var xs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Os(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<xs.length;o++)n=xs[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Cs(t){return Cs[" "](t),t}Cs[" "]=rs;var ks,Ds,Ps=Es(ws,"Opera"),Ls=Es(ws,"Trident")||Es(ws,"MSIE"),Rs=Es(ws,"Edge"),Vs=Rs||Ls,Ms=Es(ws,"Gecko")&&!(Es(ws.toLowerCase(),"webkit")&&!Es(ws,"Edge"))&&!(Es(ws,"Trident")||Es(ws,"MSIE"))&&!Es(ws,"Edge"),js=Es(ws.toLowerCase(),"webkit")&&!Es(ws,"Edge");function Fs(){var t=ns.document;return t?t.documentMode:void 0}t:{var Us="",qs=(Ds=ws,Ms?/rv:([^\);]+)(\)|;)/.exec(Ds):Rs?/Edge\/([\d\.]+)/.exec(Ds):Ls?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ds):js?/WebKit\/(\S+)/.exec(Ds):Ps?/(?:Version)[ \/]?(\S+)/.exec(Ds):void 0);if(qs&&(Us=qs?qs[1]:""),Ls){var Bs=Fs();if(null!=Bs&&Bs>parseFloat(Us)){ks=String(Bs);break t}}ks=Us}var zs,Gs={};function Hs(t){return function(t,e){var n=Gs;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=_s(String(ks)).split("."),r=_s(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=Is(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||Is(0==s[2].length,0==u[2].length)||Is(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(ns.document&&Ls){var Ks=Fs();zs=Ks||(parseInt(ks,10)||void 0)}else zs=void 0;var Ys=zs,Qs=!Ls||9<=Number(Ys),Xs=Ls&&!Hs("9"),Ws=function(){if(!ns.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ns.addEventListener("test",rs,e),ns.removeEventListener("test",rs,e)}catch(n){}return t}();function $s(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Js(t,e){if($s.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ms){t:{try{Cs(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Zs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}$s.prototype.b=function(){this.defaultPrevented=!0},ps(Js,$s);var Zs={2:"touch",3:"pen",4:"mouse"};Js.prototype.b=function(){Js.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xs)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var tu="closure_listenable_"+(1e6*Math.random()|0),eu=0;function nu(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++eu,this.Y=this.Z=!1}function ru(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function iu(t){this.src=t,this.a={},this.b=0}function ou(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=vs(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ru(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function su(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}iu.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=su(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new nu(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var uu="closure_lm_"+(1e6*Math.random()|0),au={};function cu(t,e,n,r,i){if(r&&r.once)return fu(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)cu(t,e[o],n,r,i);return null}return n=bu(n),t&&t[tu]?t.va(e,n,os(r)?!!r.capture:!!r,i):lu(t,e,n,!1,r,i)}function lu(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=os(i)?!!i.capture:!!i;if(s&&!Qs)return null;var u=gu(t);if(u||(t[uu]=u=new iu(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=yu,e=Qs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ws||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(du(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function fu(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)fu(t,e[o],n,r,i);return null}return n=bu(n),t&&t[tu]?t.wa(e,n,os(r)?!!r.capture:!!r,i):lu(t,e,n,!0,r,i)}function hu(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hu(t,e[o],n,r,i);else r=os(r)?!!r.capture:!!r,n=bu(n),t&&t[tu]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=su(o=t.a[e],n,r,i))&&(ru(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gu(t))&&(e=t.a[e.toString()],t=-1,e&&(t=su(e,n,r,i)),(n=-1<t?e[t]:null)&&pu(n))}function pu(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[tu])ou(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(du(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gu(e))?(ou(n,t),0==n.b&&(n.src=null,e[uu]=null)):ru(t)}}}function du(t){return t in au?au[t]:au[t]="on"+t}function vu(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&pu(t),n.call(r,e)}function yu(t,e){if(t.Y)return!0;if(!Qs){if(!e)t:{e=["window","event"];for(var n=ns,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return vu(t,e=new Js(e,this))}return vu(t,new Js(e,this))}function gu(t){return(t=t[uu])instanceof iu?t:null}var mu="__closure_events_fn_"+(1e9*Math.random()>>>0);function bu(t){return"function"==typeof t?t:(t[mu]||(t[mu]=function(e){return t.handleEvent(e)}),t[mu])}function wu(){ds.call(this),this.c=new iu(this),this.J=this,this.C=null}function _u(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new $s(e,t);else if(e instanceof $s)e.target=e.target||t;else{var i=e;Os(e=new $s(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Eu(s,r,!0,e)&&i}if(i=Eu(s=e.a=t,r,!0,e)&&i,i=Eu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Eu(s=e.a=n[o],r,!1,e)&&i}function Eu(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&ou(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}ps(wu,ds),wu.prototype[tu]=!0,(Zo=wu.prototype).addEventListener=function(t,e,n,r){cu(this,t,e,n,r)},Zo.removeEventListener=function(t,e,n,r){hu(this,t,e,n,r)},Zo.G=function(){if(wu.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ru(n[r]);delete e.a[t],e.b--}}this.C=null},Zo.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Zo.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Iu=ns.JSON.stringify;function Tu(){this.b=this.a=null}var Au,Nu=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new xu}),(function(t){t.reset()}));function Su(){var t=Du,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function xu(){this.next=this.b=this.a=null}function Ou(t){ns.setTimeout((function(){throw t}),0)}function Cu(t,e){Au||function(){var t=ns.Promise.resolve(void 0);Au=function(){t.then(Pu)}}(),ku||(Au(),ku=!0),Du.add(t,e)}Tu.prototype.add=function(t,e){var n=Nu.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},xu.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},xu.prototype.reset=function(){this.next=this.b=this.a=null};var ku=!1,Du=new Tu;function Pu(){for(var t;t=Su();){try{t.a.call(t.b)}catch(n){Ou(n)}var e=Nu;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}ku=!1}function Lu(t,e){wu.call(this),this.b=t||1,this.a=e||ns,this.f=ls(this.Za,this),this.g=hs()}function Ru(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Vu(t,e,n){if("function"==typeof t)n&&(t=ls(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ls(t.handleEvent,t)}return 2147483647<Number(e)?-1:ns.setTimeout(t,e||0)}function Mu(t){t.a=Vu((function(){t.a=null,t.c&&(t.c=!1,Mu(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ps(Lu,wu),(Zo=Lu.prototype).aa=!1,Zo.M=null,Zo.Za=function(){if(this.aa){var t=hs()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),_u(this,"tick"),this.aa&&(Ru(this),this.start()))}},Zo.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=hs())},Zo.G=function(){Lu.X.G.call(this),Ru(this),delete this.a};var ju=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}$o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Mu(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(ns.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ds);function Fu(t){ds.call(this),this.b=t,this.a={}}ps(Fu,ds);var Uu=[];function qu(t,e,n,r){Array.isArray(n)||(n&&(Uu[0]=n.toString()),n=Uu);for(var i=0;i<n.length;i++){var o=cu(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Bu(t){Ns(t.a,(function(t,e){this.a.hasOwnProperty(e)&&pu(t)}),t),t.a={}}function zu(){this.a=!0}function Gu(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Iu(n)}catch(u){return e}}(t,n)+(r?" "+r:"")}))}Fu.prototype.G=function(){Fu.X.G.call(this),Bu(this)},Fu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zu.prototype.info=function(){};var Hu={},Ku=null;function Yu(){return Ku=Ku||new wu}function Qu(t){$s.call(this,Hu.Fa,t)}function Xu(t){var e=Yu();_u(e,new Qu(e,t))}function Wu(t,e){$s.call(this,Hu.STAT_EVENT,t),this.stat=e}function $u(t){var e=Yu();_u(e,new Wu(e,t))}function Ju(t){$s.call(this,Hu.Ga,t)}function Zu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return ns.setTimeout((function(){t()}),e)}Hu.Fa="serverreachability",ps(Qu,$s),Hu.STAT_EVENT="statevent",ps(Wu,$s),Hu.Ga="timingevent",ps(Ju,$s);var ta={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ea={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function na(){}function ra(t){var e;return(e=t.a)||(e=t.a={}),e}function ia(){}na.prototype.a=null;var oa,sa={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ua(){$s.call(this,"d")}function aa(){$s.call(this,"c")}function ca(){}function la(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Fu(this),this.P=fa,t=Vs?125:void 0,this.R=new Lu(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ps(ua,$s),ps(aa,$s),ps(ca,na),oa=new ca;var fa=45e3,ha={},pa={};function da(t,e,n){t.H=1,t.i=Va(Ca(e)),t.j=n,t.I=!0,va(t,null)}function va(t,e){t.u=hs(),ma(t),t.l=Ca(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Xa(n.b,"t",r),t.D=0,t.a=zc(t.g,t.g.C?e:null),0<t.O&&(t.F=new ju(ls(t.Ca,t,t.a),t.O)),qu(t.J,t.a,"readystatechange",t.Xa),e=t.B?Ss(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Xu(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");s=2<=f.length&&"type"==f[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function ya(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ga(t,n);if(i==pa){4==e&&(t.h=4,$u(14),r=!1),Gu(t.c,t.f,null,"[Incomplete Response]");break}if(i==ha){t.h=4,$u(15),Gu(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Gu(t.c,t.f,i,null),Ia(t,i)}4==e&&0==n.length&&(t.h=1,$u(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rc(e),e.F=!0,$u(11))):(Gu(t.c,t.f,n,"[Invalid Chunked Response]"),Ea(t),_a(t))}function ga(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?pa:(n=Number(e.substring(n,r)),isNaN(n)?ha:(r+=1)+n>e.length?pa:(e=e.substr(r,n),t.D=r+n,e))}function ma(t){t.T=hs()+t.P,ba(t,t.P)}function ba(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Zu(ls(t.Va,t),e)}function wa(t){t.o&&(ns.clearTimeout(t.o),t.o=null)}function _a(t){0==t.g.v||t.A||jc(t.g,t)}function Ea(t){wa(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ru(t.R),Bu(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ia(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||nc(n.b,t)))if(n.I=t.N,!t.C&&nc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Mc(n),Nc(n)}Lc(n),$u(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Zu(ls(n.Sa,n),6e3));if(1>=ec(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else Uc(n,11)}else if((t.C||n.a==t)&&Mc(n),!bs(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=a.b;!f.a&&(Es(l,"spdy")||Es(l,"quic")||Es(l,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(rc(f,f.b),f.b=null))}if(a.A){var h=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(a.na=h,Ra(a.B,a.A,h))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=hs()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=Bc(a,a.C?a.ga:null,a.fa),p.C){ic(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(wa(d),ma(d)),a.a=p}else Pc(a);0<n.g.length&&Oc(n)}else"stop"!=i[0]&&"close"!=i[0]||Uc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Uc(n,7):Ac(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Xu(4)}catch(y){}}function Ta(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(is(t)||"string"==typeof t)ys(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(is(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(is(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Aa(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Aa)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Na(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Sa(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Sa(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Sa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Zo=la.prototype).setTimeout=function(t){this.P=t},Zo.Xa=function(t){t=t.target;var e=this.F;e&&3==_c(t)?e.f():this.Ca(t)},Zo.Ca=function(t){try{if(t==this.a)t:{var e=_c(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Vs&&!this.a.$())){this.A||4!=e||7==n||Xu(8==n||0>=r?3:2),wa(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bs(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,$u(12),Ea(this),_a(this);break t}Gu(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ia(this,a)}this.I?(ya(this,e,o),Vs&&this.b&&3==e&&(qu(this.J,this.R,"tick",this.Wa),this.R.start())):(Gu(this.c,this.f,o,null),Ia(this,o)),4==e&&Ea(this),this.b&&!this.A&&(4==e?jc(this.g,this):(this.b=!1,ma(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,$u(12)):(this.h=0,$u(13)),Ea(this),_a(this)}}}catch(c){}},Zo.Wa=function(){if(this.a){var t=_c(this.a),e=this.a.$();this.D<e.length&&(wa(this),ya(this,t,e),this.b&&4!=t&&ma(this))}},Zo.cancel=function(){this.A=!0,Ea(this)},Zo.Va=function(){this.o=null;var t=hs();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Xu(3),$u(17)),Ea(this),this.h=2,_a(this)):ba(this,this.T-t)},(Zo=Aa.prototype).K=function(){Na(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Zo.L=function(){return Na(this),this.a.concat()},Zo.get=function(t,e){return Sa(this.b,t)?this.b[t]:e},Zo.set=function(t,e){Sa(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Zo.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Oa(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Oa){this.a=void 0!==e?e:t.a,ka(this,t.f),this.j=t.j,Da(this,t.c),Pa(this,t.h),this.g=t.g,e=t.b;var n=new Ha;n.c=e.c,e.a&&(n.a=new Aa(e.a),n.b=e.b),La(this,n),this.i=t.i}else t&&(n=String(t).match(xa))?(this.a=!!e,ka(this,n[1]||"",!0),this.j=Ma(n[2]||""),Da(this,n[3]||"",!0),Pa(this,n[4]),this.g=Ma(n[5]||"",!0),La(this,n[6]||"",!0),this.i=Ma(n[7]||"")):(this.a=!!e,this.b=new Ha(null,this.a))}function Ca(t){return new Oa(t)}function ka(t,e,n){t.f=n?Ma(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Da(t,e,n){t.c=n?Ma(e,!0):e}function Pa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function La(t,e,n){e instanceof Ha?(t.b=e,function(t,e){e&&!t.f&&(Ka(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ya(this,e),Xa(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=ja(e,za)),t.b=new Ha(e,t.a))}function Ra(t,e,n){t.b.set(e,n)}function Va(t){return Ra(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^hs()).toString(36)),t}function Ma(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ja(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Fa),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Fa(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Oa.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ja(e,Ua,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ja(e,Ua,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ja(n,"/"==n.charAt(0)?Ba:qa,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ja(n,Ga)),t.join("")};var Ua=/[#\/\?@]/g,qa=/[#\?:]/g,Ba=/[#\?]/g,za=/[#\?@]/g,Ga=/#/g;function Ha(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ka(t){t.a||(t.a=new Aa,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ya(t,e){Ka(t),e=Wa(t,e),Sa(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Sa((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Na(t)))}function Qa(t,e){return Ka(t),e=Wa(t,e),Sa(t.a.b,e)}function Xa(t,e,n){Ya(t,e),0<n.length&&(t.c=null,t.a.set(Wa(t,e),ms(n)),t.b+=n.length)}function Wa(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Zo=Ha.prototype).add=function(t,e){Ka(this),this.c=null,t=Wa(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Zo.forEach=function(t,e){Ka(this),this.a.forEach((function(n,r){ys(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Zo.L=function(){Ka(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Zo.K=function(t){Ka(this);var e=[];if("string"==typeof t)Qa(this,t)&&(e=gs(e,this.a.get(Wa(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=gs(e,t[n])}return e},Zo.set=function(t,e){return Ka(this),this.c=null,Qa(this,t=Wa(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Zo.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Zo.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var $a=function(t,e){this.b=t,this.a=e};function Ja(t){this.g=t||Za,ns.PerformanceNavigationTiming?t=0<(t=ns.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(ns.ia&&ns.ia.ya&&ns.ia.ya()&&ns.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Za=10;function tc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ec(t){return t.b?1:t.a?t.a.size:0}function nc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function rc(t,e){t.a?t.a.add(e):t.b=e}function ic(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function oc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Jo(t.a.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ms(t.c)}function sc(){}function uc(){this.a=new sc}function ac(t,e,n){var r=n||"";try{Ta(t,(function(t,n){var i=t;os(t)&&(i=Iu(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(uw){throw e.push(r+"type="+encodeURIComponent("_badmap")),uw}}function cc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Ja.prototype.cancel=function(){var t,e;if(this.c=oc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Jo(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},sc.prototype.stringify=function(t){return ns.JSON.stringify(t,void 0)},sc.prototype.parse=function(t){return ns.JSON.parse(t,void 0)};var lc=ns.JSON.parse;function fc(t){wu.call(this),this.headers=new Aa,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=hc,this.D=this.F=!1}ps(fc,wu);var hc="",pc=/^https?$/i,dc=["POST","PUT"];function vc(t){return"content-type"==t.toLowerCase()}function yc(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,gc(t),bc(t)}function gc(t){t.u||(t.u=!0,_u(t,"complete"),_u(t,"error"))}function mc(t){if(t.b&&void 0!==es&&(!t.s[1]||4!=_c(t)||2!=t.W()))if(t.l&&4==_c(t))Vu(t.za,0,t);else if(_u(t,"readystatechange"),4==_c(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(xa)[1]||null;if(!o&&ns.self&&ns.self.location){var s=ns.self.location.protocol;o=s.substr(0,s.length-1)}i=!pc.test(o?o.toLowerCase():"")}e=i}if(e)_u(t,"complete"),_u(t,"success");else{t.h=6;try{var u=2<_c(t)?t.a.statusText:""}catch(a){u=""}t.f=u+" ["+t.W()+"]",gc(t)}}finally{bc(t)}}}function bc(t,e){if(t.a){wc(t);var n=t.a,r=t.s[0]?rs:null;t.a=null,t.s=null,e||_u(t,"ready");try{n.onreadystatechange=r}catch(uw){}}}function wc(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(ns.clearTimeout(t.m),t.m=null)}function _c(t){return t.a?t.a.readyState:0}function Ec(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ns(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ra(t,e,n))}function Ic(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Tc(t){this.pa=0,this.g=[],this.c=new zu,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Ic("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Ic("baseRetryDelayMs",5e3,t),this.Ra=Ic("retryDelaySeedMs",1e4,t),this.Ma=Ic("forwardChannelMaxRetries",2,t),this.ma=Ic("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ja(t&&t.concurrentRequestLimit),this.ka=new uc,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Ac(t){if(Sc(t),3==t.v){var e=t.R++,n=Ca(t.B);Ra(n,"SID",t.J),Ra(n,"RID",e),Ra(n,"TYPE","terminate"),kc(t,n),(e=new la(t,t.c,e,void 0)).H=2,e.i=Va(Ca(n)),n=!1,ns.navigator&&ns.navigator.sendBeacon&&(n=ns.navigator.sendBeacon(e.i.toString(),"")),!n&&ns.Image&&((new Image).src=e.i,n=!0),n||(e.a=zc(e.g,null),e.a.ba(e.i)),e.u=hs(),ma(e)}qc(t)}function Nc(t){t.a&&(Rc(t),t.a.cancel(),t.a=null)}function Sc(t){Nc(t),t.j&&(ns.clearTimeout(t.j),t.j=null),Mc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&ns.clearTimeout(t.h),t.h=null)}function xc(t,e){t.g.push(new $a(t.Oa++,e)),3==t.v&&Oc(t)}function Oc(t){tc(t.b)||t.h||(t.h=!0,Cu(t.Ba,t),t.u=0)}function Cc(t,e){var n;n=e?e.f:t.R++;var r=Ca(t.B);Ra(r,"SID",t.J),Ra(r,"RID",n),Ra(r,"AID",t.P),kc(t,r),t.i&&t.l&&Ec(r,t.i,t.l),n=new la(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Dc(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),rc(t.b,n),da(n,r,e)}function kc(t,e){t.f&&Ta({},(function(t,n){Ra(e,n,t)}))}function Dc(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ls(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,l=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{ac(l,s,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Pc(t){t.a||t.j||(t.T=1,Cu(t.Aa,t),t.o=0)}function Lc(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Zu(ls(t.Aa,t),Fc(t,t.o)),t.o++,!0)}function Rc(t){null!=t.s&&(ns.clearTimeout(t.s),t.s=null)}function Vc(t){t.a=new la(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ca(t.la);Ra(e,"RID","rpc"),Ra(e,"SID",t.J),Ra(e,"CI",t.H?"0":"1"),Ra(e,"AID",t.P),kc(t,e),Ra(e,"TYPE","xmlhttp"),t.i&&t.l&&Ec(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Va(Ca(e)),n.j=null,n.I=!0,va(n,t)}function Mc(t){null!=t.m&&(ns.clearTimeout(t.m),t.m=null)}function jc(t,e){var n=null;if(t.a==e){Mc(t),Rc(t),t.a=null;var r=2}else{if(!nc(t.b,e))return;n=e.s,ic(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=hs()-e.u;var i=t.u;_u(r=Yu(),new Ju(r,n,e,i)),Oc(t)}else Pc(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ec(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Zu(ls(t.Ba,t,e),Fc(t,t.u)),t.u++,0)))}(t,e)||2==r&&Lc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Uc(t,5);break;case 4:Uc(t,10);break;case 3:Uc(t,6);break;default:Uc(t,2)}}function Fc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Uc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ls(t.Ya,t);n||(n=new Oa("//www.google.com/images/cleardot.gif"),ns.location&&"http"==ns.location.protocol||ka(n,"https"),Va(n)),function(t,e){var n=new zu;if(ns.Image){var r=new Image;r.onload=fs(cc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=fs(cc,n,r,"TestLoadImage: error",!1,e),r.onabort=fs(cc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=fs(cc,n,r,"TestLoadImage: timeout",!1,e),ns.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else $u(2);t.v=0,t.f&&t.f.ra(e),qc(t),Sc(t)}function qc(t){t.v=0,t.I=-1,t.f&&(0==oc(t.b).length&&0==t.g.length||(t.b.c.length=0,ms(t.g),t.g.length=0),t.f.qa())}function Bc(t,e,n){var r=function(t){return t instanceof Oa?Ca(t):new Oa(t,void 0)}(n);if(""!=r.c)e&&Da(r,e+"."+r.c),Pa(r,r.h);else{var i=ns.location;r=function(t,e,n,r){var i=new Oa(null,void 0);return t&&ka(i,t),e&&Da(i,e),n&&Pa(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ns(t.V,(function(t,e){Ra(r,e,t)})),e=t.A,n=t.na,e&&n&&Ra(r,e,n),Ra(r,"VER",t.ha),kc(t,r),r}function zc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fc(t.Na)).F=t.C,e}function Gc(){}function Hc(){if(Ls&&!(10<=Number(Ys)))throw Error("Environmental error: no available transport.")}function Kc(t,e){wu.call(this),this.a=new Tc(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!bs(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bs(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Xc(this)}function Yc(t){ua.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Qc(){aa.call(this),this.status=1}function Xc(t){this.a=t}(Zo=fc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ra(this.H):ra(oa),this.a.onreadystatechange=ls(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void yc(this,o)}t=n||"";var i=new Aa(this.headers);r&&Ta(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=vc,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=ns.FormData&&t instanceof ns.FormData,!(0<=vs(dc,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{wc(this),0<this.o&&((this.D=function(t){return Ls&&Hs(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ls(this.xa,this)):this.m=Vu(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){yc(this,o)}},Zo.xa=function(){void 0!==es&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,_u(this,"timeout"),this.abort(8))},Zo.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,_u(this,"complete"),_u(this,"abort"),bc(this))},Zo.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),bc(this,!0)),fc.X.G.call(this)},Zo.za=function(){this.j||(this.A||this.l||this.g?mc(this):this.Ua())},Zo.Ua=function(){mc(this)},Zo.W=function(){try{return 2<_c(this)?this.a.status:-1}catch(Ds){return-1}},Zo.$=function(){try{return this.a?this.a.responseText:""}catch(Ds){return""}},Zo.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),lc(e)}},Zo.ua=function(){return this.h},Zo.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Zo=Tc.prototype).ha=8,Zo.v=1,Zo.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new la(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Os(r=Ss(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Dc(this,n,e),Ra(i=Ca(this.B),"RID",t),Ra(i,"CVER",22),this.A&&Ra(i,"X-HTTP-Session-Id",this.A),kc(this,i),this.i&&r&&Ec(i,this.i,r),rc(this.b,n),this.Ia&&Ra(i,"TYPE","init"),this.da?(Ra(i,"$req",e),Ra(i,"SID","null"),n.U=!0,da(n,i,null)):da(n,i,e),this.v=2}}else 3==this.v&&(t?Cc(this,t):0==this.g.length||tc(this.b)||Cc(this))},Zo.Aa=function(){if(this.j=null,Vc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Zu(ls(this.Ta,this),t)}},Zo.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,$u(10),Nc(this),Vc(this))},Zo.Sa=function(){null!=this.m&&(this.m=null,Nc(this),Lc(this),$u(19))},Zo.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),$u(2)):(this.c.info("Failed to ping google.com"),$u(1))},(Zo=Gc.prototype).ta=function(){},Zo.sa=function(){},Zo.ra=function(){},Zo.qa=function(){},Zo.Ja=function(){},Hc.prototype.a=function(t,e){return new Kc(t,e)},ps(Kc,wu),Kc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;$u(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Bc(t,null,t.fa),Oc(t)},Kc.prototype.close=function(){Ac(this.a)},Kc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,xc(this.a,e)}else this.l?((e={}).__data__=Iu(t),xc(this.a,e)):xc(this.a,t)},Kc.prototype.G=function(){this.a.f=null,delete this.f,Ac(this.a),delete this.a,Kc.X.G.call(this)},ps(Yc,ua),ps(Qc,aa),ps(Xc,Gc),Xc.prototype.ta=function(){_u(this.a,"a")},Xc.prototype.sa=function(t){_u(this.a,new Yc(t))},Xc.prototype.ra=function(t){_u(this.a,new Qc(t))},Xc.prototype.qa=function(){_u(this.a,"b")},Hc.prototype.createWebChannel=Hc.prototype.a,Kc.prototype.send=Kc.prototype.h,Kc.prototype.open=Kc.prototype.g,Kc.prototype.close=Kc.prototype.close,ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,ea.COMPLETE="complete",ia.EventType=sa,sa.OPEN="a",sa.CLOSE="b",sa.ERROR="c",sa.MESSAGE="d",wu.prototype.listen=wu.prototype.va,fc.prototype.listenOnce=fc.prototype.wa,fc.prototype.getLastError=fc.prototype.Qa,fc.prototype.getLastErrorCode=fc.prototype.ua,fc.prototype.getStatus=fc.prototype.W,fc.prototype.getResponseJson=fc.prototype.Pa,fc.prototype.getResponseText=fc.prototype.$,fc.prototype.send=fc.prototype.ba;var Wc=ta,$c=ea,Jc=Hu,Zc=10,tl=11,el=ia,nl=fc,rl=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},il=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ol=new Ro("@firebase/firestore");function sl(){return ol.logLevel}function ul(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ol.logLevel<=So.DEBUG){var r=e.map(ll);ol.debug.apply(ol,ao(["Firestore (8.2.6): "+t],r))}}function al(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ol.logLevel<=So.ERROR){var r=e.map(ll);ol.error.apply(ol,ao(["Firestore (8.2.6): "+t],r))}}function cl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ol.logLevel<=So.WARN){var r=e.map(ll);ol.warn.apply(ol,ao(["Firestore (8.2.6): "+t],r))}}function ll(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}
/**
  * @license
  * Copyright 2020 Google LLC
  *
  * Licensed under the Apache License, Version 2.0 (the "License");
  * you may not use this file except in compliance with the License.
  * You may obtain a copy of the License at
  *
  *   http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing, software
  * distributed under the License is distributed on an "AS IS" BASIS,
  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  * See the License for the specific language governing permissions and
  * limitations under the License.
  */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.6) INTERNAL ASSERTION FAILED: "+t;throw al(e),new Error(e)}function hl(t,e){t||fl()}function pl(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vl=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=dl(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function yl(t,e){return t<e?-1:t>e?1:0}function gl(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ml(t){return t+"\0"}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bl=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.h,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return yl(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();bl.T=new bl("");var wl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_l=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return eo(e,t),e}(Error),El=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(bl.fromBase64String(e))}catch(n){throw new _l(wl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(bl.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Il=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Il.UNAUTHENTICATED=new Il(null),Il.R=new Il("google-credentials-uid"),Il.P=new Il("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Tl=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Al=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Il.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Nl=function(){function t(t){var e=this;this.D=null,this.currentUser=Il.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.F(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(ul("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(hl("string"==typeof n.accessToken),new Tl(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.F=function(){var t=this.auth&&this.auth.getUid();return hl(null===t||"string"==typeof t),new Il(t)},t}(),Sl=function(){function t(t,e){this.O=t,this.k=e,this.type="FirstParty",this.user=Il.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.k},e=this.O.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),xl=function(){function t(t,e){this.O=t,this.k=e}return t.prototype.getToken=function(){return Promise.resolve(new Sl(this.O,this.k))},t.prototype.v=function(t){t(Il.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Ol=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.M=function(t){return n.L(t)},this.$=function(t){return e.B(t)})}return t.prototype.L=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.$&&this.$(t),t},t}();Ol.q=-1;var Cl=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new _l(wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new _l(wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new _l(wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _l(wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?yl(this.nanoseconds,t.nanoseconds):yl(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),kl=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Cl(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Dl=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&fl(),void 0===n?n=t.length-e:n>t.length-e&&fl(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new _l(wl.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(Dl),Ll=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Ll.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new _l(wl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new _l(wl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new _l(wl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new _l(wl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Dl),Vl=function(){function t(t){this.path=t}return t._t=function(e){return new t(Pl.ot(e))},t.ft=function(e){return new t(Pl.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Pl.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Pl.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Pl(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jl(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fl(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ul=function(){function t(t){this.fields=t,t.sort(Rl.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return gl(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),ql=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){if(hl(!!t),"string"==typeof t){var e=0,n=ql.exec(t);if(hl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:zl(t.seconds),nanos:zl(t.nanos)}}function zl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Gl(t){return"string"==typeof t?bl.fromBase64String(t):bl.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kl(t){var e=t.mapValue.fields.__previous_value__;return Hl(e)?Kl(e):e}function Yl(t){var e=Bl(t.mapValue.fields.__local_write_time__.timestampValue);return new Cl(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){return null==t}function Xl(t){return 0===t&&1/t==-1/0}function Wl(t){return"number"==typeof t&&Number.isInteger(t)&&!Xl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hl(t)?4:10:fl()}function Jl(t,e){var n,r=$l(t);if(r!==$l(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yl(t).isEqual(Yl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Bl(t.timestampValue),r=Bl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,Gl(t.bytesValue).isEqual(Gl(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return zl(t.geoPointValue.latitude)===zl(e.geoPointValue.latitude)&&zl(t.geoPointValue.longitude)===zl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return zl(t.integerValue)===zl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=zl(t.doubleValue),r=zl(e.doubleValue);return n===r?Xl(n)===Xl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return gl(t.arrayValue.values||[],e.arrayValue.values||[],Jl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ml(n)!==Ml(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Jl(n[i],r[i])))return!1;return!0}(t,e);default:return fl()}}function Zl(t,e){return void 0!==(t.values||[]).find((function(t){return Jl(t,e)}))}function tf(t,e){var n,r,i,o,s=$l(t),u=$l(e);if(s!==u)return yl(s,u);switch(s){case 0:return 0;case 1:return yl(t.booleanValue,e.booleanValue);case 2:return r=e,i=zl((n=t).integerValue||n.doubleValue),o=zl(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return ef(t.timestampValue,e.timestampValue);case 4:return ef(Yl(t),Yl(e));case 5:return yl(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Gl(t),r=Gl(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=yl(n[i],r[i]);if(0!==o)return o}return yl(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=yl(zl(t.latitude),zl(e.latitude));return 0!==n?n:yl(zl(t.longitude),zl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=tf(n[i],r[i]);if(o)return o}return yl(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=yl(r[s],o[s]);if(0!==u)return u;var a=tf(n[r[s]],i[o[s]]);if(0!==a)return a}return yl(r.length,o.length)}(t.mapValue,e.mapValue);default:throw fl()}}function ef(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return yl(t,e);var n=Bl(t),r=Bl(e),i=yl(n.seconds,r.seconds);return 0!==i?i:yl(n.nanos,r.nanos)}function nf(t){return rf(t)}function rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=Bl(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?Gl(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,Vl.ft(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=rf(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+rf(t.fields[o])}return e+"}"}(t.mapValue):fl();var e,n,r,i}function of(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function sf(t){return!!t&&"integerValue"in t}function uf(t){return!!t&&"arrayValue"in t}function af(t){return!!t&&"nullValue"in t}function cf(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lf(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ff=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!lf(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Jl(this.proto,t.proto)},t}(),hf=function(){function t(t){void 0===t&&(t=ff.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===$l(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(Rl.ct(),this.At);return null!=t?new ff(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=lf(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function pf(t){var e=[];return jl(t.fields||{},(function(t,n){var r=new Rl([t]);if(lf(n)){var i=pf(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new Ul(e)}var df=function(t,e){this.key=t,this.version=e},vf=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return eo(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(df),yf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return eo(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(df),gf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(df),mf=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function bf(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new mf(t,e,n,r,i,o,s)}function wf(t){var e=pl(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.rt()+e.op.toString()+nf(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.rt()+e.dir;var e})).join(","),Ql(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Pf(e.startAt)),e.endAt&&(n+="|ub:",n+=Pf(e.endAt)),e.vt=n}return e.vt}function _f(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Rf(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Jl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mf(t.startAt,e.startAt)&&Mf(t.endAt,e.endAt)}function Ef(t){return Vl.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var If=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return eo(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Tf(t,n,r):"array-contains"===n?new xf(t,r):"in"===n?new Of(t,r):"not-in"===n?new Cf(t,r):"array-contains-any"===n?new kf(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Af(t,n):new Nf(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(tf(e,this.value)):null!==e&&$l(this.value)===$l(e)&&this.Dt(tf(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return fl()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Tf=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Vl.ft(r.referenceValue),i}return eo(e,t),e.prototype.matches=function(t){var e=Vl.H(t.key,this.key);return this.Dt(e)},e}(If),Af=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Sf("in",n),r}return eo(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(If),Nf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Sf("not-in",n),r}return eo(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(If);function Sf(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Vl.ft(t.referenceValue)}))}var xf=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return eo(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return uf(e)&&Zl(e.arrayValue,this.value)},e}(If),Of=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return eo(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Zl(this.value.arrayValue,e)},e}(If),Cf=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return eo(e,t),e.prototype.matches=function(t){if(Zl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Zl(this.value.arrayValue,e)},e}(If),kf=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return eo(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!uf(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Zl(e.value.arrayValue,t)}))},e}(If),Df=function(t,e){this.position=t,this.before=e};function Pf(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return nf(t)})).join(",")}var Lf=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Rf(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Vf(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Vl.H(Vl.ft(s.referenceValue),n.key):tf(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Mf(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Jl(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jf=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Nt=null,this.Ft=null,this.startAt,this.endAt};function Ff(t,e,n,r,i,o,s,u){return new jf(t,e,n,r,i,o,s,u)}function Uf(t){return new jf(t)}function qf(t){return!Ql(t.limit)&&"F"===t.limitType}function Bf(t){return!Ql(t.limit)&&"L"===t.limitType}function zf(t){return t.xt.length>0?t.xt[0].field:null}function Gf(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Hf(t){return null!==t.collectionGroup}function Kf(t){var e=pl(t);if(null===e.Nt){e.Nt=[];var n=Gf(e),r=zf(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Lf(n)),e.Nt.push(new Lf(Rl.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var u=s[o];e.Nt.push(u),u.field.ut()&&(i=!0)}if(!i){var a=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Lf(Rl.ht(),a))}}}return e.Nt}function Yf(t){var e=pl(t);if(!e.Ft)if("F"===e.limitType)e.Ft=bf(e.path,e.collectionGroup,Kf(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Kf(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Lf(o.field,s))}var u=e.endAt?new Df(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Df(e.startAt.position,!e.startAt.before):null;e.Ft=bf(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.Ft}function Qf(t,e,n){return new jf(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xf(t,e){return _f(Yf(t),Yf(e))&&t.limitType===e.limitType}function Wf(t){return wf(Yf(t))+"|lt:"+t.limitType}function $f(t){return"Query(target="+(e=Yf(t),n=e.path.rt(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+nf(e.value);var e})).join(", ")+"]"),Ql(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.rt()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Pf(e.startAt)),e.endAt&&(n+=", endAt: "+Pf(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function Jf(t,e){return n=t,i=(r=e).key.path,(null!==n.collectionGroup?r.key.dt(n.collectionGroup)&&n.path.nt(i):Vl.wt(n.path)?n.path.isEqual(i):n.path.st(i))&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Vf(t.startAt,Kf(t),e)||t.endAt&&Vf(t.endAt,Kf(t),e))}(t,e);var n,r,i}function Zf(t){return function(e,n){for(var r=!1,i=0,o=Kf(t);i<o.length;i++){var s=o[i],u=th(s,e,n);if(0!==u)return u;r=r||s.field.ut()}return 0}}function th(t,e,n){var r,i,o,s,u=t.field.ut()?Vl.H(e.key,n.key):(r=t.field,i=n,o=e.field(r),s=i.field(r),null!==o&&null!==s?tf(o,s):fl());switch(t.dir){case"asc":return u;case"desc":return-1*u;default:return fl()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eh=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=kl.min()),void 0===o&&(o=kl.min()),void 0===s&&(s=bl.T),this.target=t,this.targetId=e,this.Ot=n,this.sequenceNumber=r,this.kt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Mt=function(e){return new t(this.target,this.targetId,this.Ot,e,this.kt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Lt=function(e,n){return new t(this.target,this.targetId,this.Ot,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.$t=function(e){return new t(this.target,this.targetId,this.Ot,this.sequenceNumber,this.kt,e,this.resumeToken)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(e)?"-0":e}}function rh(t){return{integerValue:""+t}}function ih(t,e){return Wl(e)?rh(e):nh(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oh=function(){this.qt=void 0};function sh(t,e,n){return t instanceof ch?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof lh?fh(t,e):t instanceof hh?ph(t,e):function(t,e){var n=ah(t,e),r=vh(n)+vh(t.Ut);return sf(n)&&sf(t.Ut)?rh(r):nh(t.Qt,r)}(t,e);var r,i,o}function uh(t,e,n){return t instanceof lh?fh(t,e):t instanceof hh?ph(t,e):n}function ah(t,e){return t instanceof dh?sf(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var ch=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e}(oh),lh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return eo(e,t),e}(oh);function fh(t,e){for(var n=yh(e),r=function(t){n.some((function(e){return Jl(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var hh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return eo(e,t),e}(oh);function ph(t,e){for(var n=yh(e),r=function(t){n=n.filter((function(e){return!Jl(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var dh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return eo(e,t),e}(oh);function vh(t){return zl(t.integerValue||t.doubleValue)}function yh(t){return uf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gh=function(t,e){this.field=t,this.transform=e},mh=function(t,e){this.version=t,this.transformResults=e},bh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function wh(t,e){return void 0!==t.updateTime?e instanceof vf&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof vf}var _h=function(){};function Eh(t,e,n){return t instanceof Sh?function(t,e,n){var r=t.value;if(n.transformResults){var i=Ch(t.fieldTransforms,e,n.transformResults);r=Dh(t.fieldTransforms,r,i)}return new vf(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof xh?function(t,e,n){if(!wh(t.jt,e))return new gf(t.key,n.version);var r=Oh(t,e,n.transformResults?Ch(t.fieldTransforms,e,n.transformResults):[]);return new vf(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):(r=n,new yf(t.key,r.version,{hasCommittedMutations:!0}));var r}function Ih(t,e,n){return t instanceof Sh?function(t,e,n){if(!wh(t.jt,e))return e;var r=t.value,i=kh(t.fieldTransforms,n,e);r=Dh(t.fieldTransforms,r,i);var o=Nh(e);return new vf(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof xh?function(t,e,n){if(!wh(t.jt,e))return e;var r=Nh(e),i=Oh(t,e,kh(t.fieldTransforms,n,e));return new vf(t.key,r,i,{Vt:!0})}(t,e,n):(i=e,wh((r=t).jt,i)?new yf(r.key,kl.min()):i);var r,i}function Th(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof vf?e.field(o.field):void 0,u=ah(o.transform,s||null);null!=u&&(n=null==n?(new hf).set(o.field,u):n.set(o.field,u))}return n?n.Pt():null}(t.fieldTransforms,e)}function Ah(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&gl(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof lh&&o instanceof lh||i instanceof hh&&o instanceof hh?gl(i.elements,o.elements,Jl):i instanceof dh&&o instanceof dh?Jl(i.Ut,o.Ut):i instanceof ch&&o instanceof ch);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt));var n,r}function Nh(t){return t instanceof vf?t.version:kl.min()}var Sh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return eo(e,t),e}(_h),xh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return eo(e,t),e}(_h);function Oh(t,e,n){var r,i,o,s;return i=t,o=r=e instanceof vf?e.data():ff.empty(),s=new hf(o),i.Gt.fields.forEach((function(t){if(!t.et()){var e=i.data.field(t);null!==e?s.set(t,e):s.delete(t)}})),r=s.Pt(),Dh(t.fieldTransforms,r,n)}function Ch(t,e,n){var r=[];hl(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof vf&&(u=e.field(o.field)),r.push(uh(s,u,n[i]))}return r}function kh(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],u=s.transform,a=null;n instanceof vf&&(a=n.field(s.field)),r.push(sh(u,a,e))}return r}function Dh(t,e,n){for(var r=new hf(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}var Ph,Lh,Rh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return eo(e,t),e}(_h),Vh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return eo(e,t),e}(_h),Mh=function(t){this.count=t};function jh(t){switch(t){case wl.OK:return fl();case wl.CANCELLED:case wl.UNKNOWN:case wl.DEADLINE_EXCEEDED:case wl.RESOURCE_EXHAUSTED:case wl.INTERNAL:case wl.UNAVAILABLE:case wl.UNAUTHENTICATED:return!1;case wl.INVALID_ARGUMENT:case wl.NOT_FOUND:case wl.ALREADY_EXISTS:case wl.PERMISSION_DENIED:case wl.FAILED_PRECONDITION:case wl.ABORTED:case wl.OUT_OF_RANGE:case wl.UNIMPLEMENTED:case wl.DATA_LOSS:return!0;default:return fl()}}function Fh(t){if(void 0===t)return al("GRPC error has no .code"),wl.UNKNOWN;switch(t){case Ph.OK:return wl.OK;case Ph.CANCELLED:return wl.CANCELLED;case Ph.UNKNOWN:return wl.UNKNOWN;case Ph.DEADLINE_EXCEEDED:return wl.DEADLINE_EXCEEDED;case Ph.RESOURCE_EXHAUSTED:return wl.RESOURCE_EXHAUSTED;case Ph.INTERNAL:return wl.INTERNAL;case Ph.UNAVAILABLE:return wl.UNAVAILABLE;case Ph.UNAUTHENTICATED:return wl.UNAUTHENTICATED;case Ph.INVALID_ARGUMENT:return wl.INVALID_ARGUMENT;case Ph.NOT_FOUND:return wl.NOT_FOUND;case Ph.ALREADY_EXISTS:return wl.ALREADY_EXISTS;case Ph.PERMISSION_DENIED:return wl.PERMISSION_DENIED;case Ph.FAILED_PRECONDITION:return wl.FAILED_PRECONDITION;case Ph.ABORTED:return wl.ABORTED;case Ph.OUT_OF_RANGE:return wl.OUT_OF_RANGE;case Ph.UNIMPLEMENTED:return wl.UNIMPLEMENTED;case Ph.DATA_LOSS:return wl.DATA_LOSS;default:return fl()}}(Lh=Ph||(Ph={}))[Lh.OK=0]="OK",Lh[Lh.CANCELLED=1]="CANCELLED",Lh[Lh.UNKNOWN=2]="UNKNOWN",Lh[Lh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lh[Lh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lh[Lh.NOT_FOUND=5]="NOT_FOUND",Lh[Lh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lh[Lh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lh[Lh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lh[Lh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lh[Lh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lh[Lh.ABORTED=10]="ABORTED",Lh[Lh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lh[Lh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lh[Lh.INTERNAL=13]="INTERNAL",Lh[Lh.UNAVAILABLE=14]="UNAVAILABLE",Lh[Lh.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Uh=function(){function t(t,e){this.H=t,this.root=e||Bh.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,Bh.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,Bh.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new qh(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new qh(this.root,t,this.H,!1)},t.prototype.ne=function(){return new qh(this.root,null,this.H,!0)},t.prototype.se=function(t){return new qh(this.root,t,this.H,!0)},t}(),qh=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),Bh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw fl();if(this.right.le())throw fl();var t=this.left.Ie();if(t!==this.right.Ie())throw fl();return t+(this.le()?0:1)},t}();Bh.EMPTY=null,Bh.RED=!0,Bh.Ht=!1,Bh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw fl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw fl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw fl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw fl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw fl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new Bh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var zh=function(){function t(t){this.H=t,this.data=new Uh(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Gh(this.data.te())},t.prototype.ee=function(t){return new Gh(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Gh=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),Hh=new Uh(Vl.H);function Kh(){return Hh}function Yh(){return Kh()}var Qh=new Uh(Vl.H);function Xh(){return Qh}var Wh=new Uh(Vl.H);var $h=new zh(Vl.H);function Jh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=$h,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Zh=new zh(yl);function tp(){return Zh}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ep=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Vl.H(e.key,n.key)}:function(t,e){return Vl.H(t.key,e.key)},this.ge=Xh(),this.Ve=new Uh(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),np=function(){function t(){this.be=new Uh(Vl.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):fl():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),rp=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=u}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ep.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Xf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ip=function(){function t(t,e,n,r,i){this.kt=t,this.Fe=e,this.Oe=n,this.ke=r,this.Me=i}return t.Le=function(e,n){var r=new Map;return r.set(e,op.$e(e,n)),new t(kl.min(),r,tp(),Kh(),Jh())},t}(),op=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.$e=function(e,n){return new t(bl.T,n,Jh(),Jh(),Jh())},t}(),sp=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},up=function(t,e){this.targetId=t,this.je=e},ap=function(t,e,n,r){void 0===n&&(n=bl.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},cp=function(){function t(){this.Ge=0,this.ze=hp(),this.He=bl.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Jh(),e=Jh(),n=Jh();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:fl()}})),new op(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=hp()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),lp=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Kh(),this._n=fp(),this.fn=new zh(yl)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof vf?this.wn(r,t.We):t.We instanceof yf&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:fl()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Ef(i))if(0===n){var o=new Vl(i.path);this.En(e,o,new yf(o,kl.min()))}else hl(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&Ef(o.target)){var s=new Vl(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new yf(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=Jh();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ot||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ip(t,n,this.fn,this.ln,r);return this.ln=Kh(),this._n=fp(),this.fn=new zh(yl),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new cp,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new zh(yl),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||ul("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new cp),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){return new Uh(Vl.H)}function hp(){return new Uh(Vl.H)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pp={asc:"ASCENDING",desc:"DESCENDING"},dp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vp=function(t,e){this.t=t,this.Bt=e};function yp(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function gp(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function mp(t,e){return yp(t,e.j())}function bp(t){return hl(!!t),kl.K((e=Bl(t),new Cl(e.seconds,e.nanos)));var e}function wp(t,e){return(n=t,new Pl(["projects",n.projectId,"databases",n.database])).child("documents").child(e).rt();var n}function _p(t){var e=Pl.ot(t);return hl(Gp(e)),e}function Ep(t,e){return wp(t.t,e.path)}function Ip(t,e){var n=_p(e);if(n.get(1)!==t.t.projectId)throw new _l(wl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new _l(wl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Vl(Sp(n))}function Tp(t,e){return wp(t.t,e)}function Ap(t){var e=_p(t);return 4===e.length?Pl.ct():Sp(e)}function Np(t){return new Pl(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Sp(t){return hl(t.length>4&&"documents"===t.get(4)),t.Y(5)}function xp(t,e,n){return{name:Ep(t,e),fields:n.proto.mapValue.fields}}function Op(t,e){var n,r,i;if(e instanceof Sh)n={update:xp(t,e.key,e.value)};else if(e instanceof Rh)n={delete:Ep(t,e.key)};else if(e instanceof xh)n={update:xp(t,e.key,e.data),updateMask:zp(e.Gt)};else{if(!(e instanceof Vh))return fl();n={verify:Ep(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ch)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof lh)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof hh)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof dh)return{fieldPath:e.field.rt(),increment:n.Ut};throw fl()}(0,t)}))),e.jt.Wt||(n.currentDocument=(r=t,void 0!==(i=e.jt).updateTime?{updateTime:mp(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:fl())),n}function Cp(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?bh.updateTime(bp(n.updateTime)):void 0!==n.exists?bh.exists(n.exists):bh.Kt():bh.Kt(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)hl("REQUEST_TIME"===e.setToServerValue),n=new ch;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new lh(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new hh(i)}else"increment"in e?n=new dh(t,e.increment):fl();var o=Rl.lt(e.fieldPath);return new gh(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=Ip(t,e.update.name),s=new ff({mapValue:{fields:e.update.fields}});if(e.updateMask){var u=function(t){var e=t.fieldPaths||[];return new Ul(e.map((function(t){return Rl.lt(t)})))}(e.updateMask);return new xh(o,s,u,r,i)}return new Sh(o,s,r,i)}if(e.delete){var a=Ip(t,e.delete);return new Rh(a,r)}if(e.verify){var c=Ip(t,e.verify);return new Vh(c,r)}return fl()}function kp(t,e){return{documents:[Tp(t,e.path)]}}function Dp(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Tp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Tp(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(cf(t.value))return{unaryFilter:{field:Fp(t.field),op:"IS_NAN"}};if(af(t.value))return{unaryFilter:{field:Fp(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(cf(t.value))return{unaryFilter:{field:Fp(t.field),op:"IS_NOT_NAN"}};if(af(t.value))return{unaryFilter:{field:Fp(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fp(t.field),op:jp(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Fp((e=t).field),direction:Mp(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,u,a=(s=t,u=e.limit,s.Bt||Ql(u)?u:{value:u});return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Rp(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Rp(e.endAt)),n}function Pp(t){var e=Ap(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){hl(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Lp(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return new Lf(Up((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var a,c,l=null;n.limit&&(a=n.limit,l=Ql(c="object"==typeof a?a.value:a)?null:c);var f=null;n.startAt&&(f=Vp(n.startAt));var h=null;return n.endAt&&(h=Vp(n.endAt)),Ff(e,i,u,s,l,"F",f,h)}function Lp(t){return t?void 0!==t.unaryFilter?[Bp(t)]:void 0!==t.fieldFilter?[qp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Lp(t)})).reduce((function(t,e){return t.concat(e)})):fl():[]}function Rp(t){return{before:t.before,values:t.position}}function Vp(t){var e=!!t.before,n=t.values||[];return new Df(n,e)}function Mp(t){return pp[t]}function jp(t){return dp[t]}function Fp(t){return{fieldPath:t.rt()}}function Up(t){return Rl.lt(t.fieldPath)}function qp(t){return If.create(Up(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return fl()}}(t.fieldFilter.op),t.fieldFilter.value)}function Bp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Up(t.unaryFilter.field);return If.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Up(t.unaryFilter.field);return If.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Up(t.unaryFilter.field);return If.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Up(t.unaryFilter.field);return If.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return fl()}}function zp(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function Gp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hp=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Kp=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&fl(),this.Nn=!0,this.xn?this.error?this.Fn(n,this.error):this.On(e,this.result):new t((function(t,i){r.Dn=function(n){r.On(e,n).next(t,i)},r.Cn=function(e){r.Fn(n,e).next(t,i)}}))},t.prototype.kn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Mn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.On=function(e,n){return e?this.Mn((function(){return e(n)})):t.resolve(n)},t.prototype.Fn=function(e,n){return e?this.Mn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Ln=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.$n=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Ln(r)},t}(),Yp=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Hp,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Wp(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=ed(e.target.error);n.Bn.reject(new Wp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Wp(n,o)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(ul("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Jp(e)},t}(),Qp=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(fo())&&al("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ul("SimpleDb","Removing database:",t),Zp(window.indexedDB.deleteDatabase(t)).kn()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=fo(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return ro(this,void 0,void 0,(function(){var e,n=this;return io(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(ul("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Wp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new _l(wl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Wp(t,n))},i.onupgradeneeded=function(t){ul("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Un.Jn(e,i.transaction,t.oldVersion,n.version).next((function(){ul("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return ro(this,void 0,void 0,(function(){var i,o,s,u,a;return io(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,a,c,l;return io(this,(function(f){switch(f.label){case 0:++o,f.label=1;case 1:return f.trys.push([1,4,,5]),[4,u.Hn(t)];case 2:return u.db=f.sent(),e=Yp.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Kp.reject(t)})).kn(),a={},s.catch((function(){})),[4,e.qn];case 3:return[2,(a.value=(f.sent(),s),a)];case 4:return c=f.sent(),l="FirebaseError"!==c.name&&o<3,ul("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Xp=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Zp(this.Zn.delete())},t}(),Wp=function(t){function e(e,n){var r=this;return(r=t.call(this,wl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return eo(e,t),e}(_l);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t){return"IndexedDbTransactionError"===t.name}var Jp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ul("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ul("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Zp(n)},t.prototype.add=function(t){return ul("SimpleDb","ADD",this.store.name,t,t),Zp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Zp(this.store.get(t)).next((function(n){return void 0===n&&(n=null),ul("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return ul("SimpleDb","DELETE",this.store.name,t),Zp(this.store.delete(t))},t.prototype.count=function(){return ul("SimpleDb","COUNT",this.store.name),Zp(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){ul("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Kp((function(n,r){e.onerror=function(t){var e=ed(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new Kp((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Xp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Kp){var u=s.catch((function(t){return o.done(),Kp.reject(t)}));n.push(u)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return Kp.Ln(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Zp(t){return new Kp((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=ed(t.target.error);n(e)}}))}var td=!1;function ed(t){var e=Qp.Qn(fo());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new _l("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return td||(td=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nd=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Hp,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new _l(wl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function rd(t,e){if(al("AsyncQueue",e+": "+t),$p(t))return new _l(wl.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var id="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",od=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=ad(e)),e=ud(t.get(n),e);return ad(e)}function ud(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function ad(t){return t+""}function cd(t){var e=t.length;if(hl(e>=2),2===e)return hl(""===t.charAt(0)&&""===t.charAt(1)),Pl.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&fl(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:fl()}o=s+2}return new Pl(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ld=function(t,e){this.seconds=t,this.nanoseconds=e},fd=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};fd.store="owner",fd.key="owner";var hd=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};hd.store="mutationQueues",hd.keyPath="userId";var pd=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};pd.store="mutations",pd.keyPath="batchId",pd.userMutationsIndex="userMutationsIndex",pd.userMutationsKeyPath=["userId","batchId"];var dd=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,sd(e)]},t.key=function(t,e,n){return[t,sd(e),n]},t}();dd.store="documentMutations",dd.PLACEHOLDER=new dd;var vd=function(t,e){this.path=t,this.readTime=e},yd=function(t,e){this.path=t,this.version=e},gd=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};gd.store="remoteDocuments",gd.readTimeIndex="readTimeIndex",gd.readTimeIndexPath="readTime",gd.collectionReadTimeIndex="collectionReadTimeIndex",gd.collectionReadTimeIndexPath=["parentPath","readTime"];var md=function(t){this.byteSize=t};md.store="remoteDocumentGlobal",md.key="remoteDocumentGlobalKey";var bd=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};bd.store="targets",bd.keyPath="targetId",bd.queryTargetsIndexName="queryTargetsIndex",bd.queryTargetsKeyPath=["canonicalId","targetId"];var wd=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};wd.store="targetDocuments",wd.keyPath=["targetId","path"],wd.documentTargetsIndex="documentTargetsIndex",wd.documentTargetsKeyPath=["path","targetId"];var _d=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};_d.key="targetGlobalKey",_d.store="targetGlobal";var Ed=function(t,e){this.collectionId=t,this.parent=e};Ed.store="collectionParents",Ed.keyPath=["collectionId","parent"];var Id=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Id.store="clientMetadata",Id.keyPath="clientId";var Td=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Td.store="bundles",Td.keyPath="bundleId";var Ad=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ad.store="namedQueries",Ad.keyPath="name";var Nd=ao(ao(ao(ao([hd.store,pd.store,dd.store,gd.store,bd.store,fd.store,_d.store,wd.store],[Id.store]),[md.store]),[Ed.store]),[Td.store,Ad.store]),Sd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return eo(e,t),e}(od);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e){var n=pl(t);return Qp.zn(n.ps,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Od=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Eh(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Ih(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Ih(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Jh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&gl(this.mutations,t.mutations,(function(t,e){return Ah(t,e)}))&&gl(this.baseMutations,t.baseMutations,(function(t,e){return Ah(t,e)}))},t}(),Cd=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.Fs=r}return t.from=function(e,n,r){hl(e.mutations.length===r.length);for(var i=Wh,o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),kd=function(t){this.Os=t};function Dd(t,e){if(e.document)return function(t,e,n){var r=Ip(t,e.name),i=bp(e.updateTime),o=new ff({mapValue:{fields:e.fields}});return new vf(r,i,o,{hasCommittedMutations:!!n})}(t.Os,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Vl.Et(e.noDocument.path),r=Md(e.noDocument.readTime);return new yf(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Vl.Et(e.unknownDocument.path);return r=Md(e.unknownDocument.version),new gf(i,r)}return fl()}function Pd(t,e,n){var r,i,o=Ld(n),s=e.key.path.X().it();if(e instanceof vf){var u={name:Ep(r=t.Os,(i=e).key),fields:i.bt().mapValue.fields,updateTime:yp(r,i.version.j())},a=e.hasCommittedMutations;return new gd(null,null,u,a,o,s)}if(e instanceof yf){var c=e.key.path.it(),l=Vd(e.version);return a=e.hasCommittedMutations,new gd(null,new vd(c,l),null,a,o,s)}if(e instanceof gf){var f=e.key.path.it(),h=Vd(e.version);return new gd(new yd(f,h),null,null,!0,o,s)}return fl()}function Ld(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Rd(t){var e=new Cl(t[0],t[1]);return kl.K(e)}function Vd(t){var e=t.j();return new ld(e.seconds,e.nanoseconds)}function Md(t){var e=new Cl(t.seconds,t.nanoseconds);return kl.K(e)}function jd(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Cp(t.Os,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Cp(t.Os,e)})),u=Cl.fromMillis(e.localWriteTimeMs);return new Od(e.batchId,u,n,s)}function Fd(t){var e,n,r=Md(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Md(t.lastLimboFreeSnapshotVersion):kl.min();return void 0!==t.query.documents?(hl(1===(n=t.query).documents.length),e=Yf(Uf(Ap(n.documents[0])))):e=Yf(Pp(t.query)),new eh(e,t.targetId,0,t.lastListenSequenceNumber,r,i,bl.fromBase64String(t.resumeToken))}function Ud(t,e){var n,r=Vd(e.kt),i=Vd(e.lastLimboFreeSnapshotVersion);n=Ef(e.target)?kp(t.Os,e.target):Dp(t.Os,e.target);var o=e.resumeToken.toBase64();return new bd(e.targetId,wf(e.target),r,o,e.sequenceNumber,i,n)}function qd(t){var e=Pp({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Qf(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bd=function(){function t(){}return t.prototype.ks=function(t,e){return zd(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Md(e.createTime),version:e.version};var e}))},t.prototype.Ms=function(t,e){return zd(t).put({bundleId:(n=e).id,createTime:Vd(bp(n.createTime)),version:n.version});var n},t.prototype.Ls=function(t,e){return Gd(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:qd(e.bundledQuery),readTime:Md(e.readTime)};var e}))},t.prototype.$s=function(t,e){return Gd(t).put({name:(n=e).name,readTime:Vd(bp(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function zd(t){return xd(t,Td.store)}function Gd(t){return xd(t,Ad.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hd=function(){function t(){this.Bs=new Kd}return t.prototype.qs=function(t,e){return this.Bs.add(e),Kp.resolve()},t.prototype.Us=function(t,e){return Kp.resolve(this.Bs.getEntries(e))},t}(),Kd=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new zh(Pl.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new zh(Pl.H)).it()},t}(),Yd=function(){function t(){this.Qs=new Kd}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:sd(i)};return Qd(t).put(o)}return Kp.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ml(e),""],!1,!0);return Qd(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(cd(o.parent))}return n}))},t}();function Qd(t){return xd(t,Ed.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xd={Ks:!1,Ws:0,js:0,Gs:0},Wd=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t){return ro(this,void 0,void 0,(function(){return io(this,(function(e){if(t.code!==wl.FAILED_PRECONDITION||t.message!==id)throw t;return ul("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wd.Xs=10,Wd.Zs=1e3,Wd.ti=new Wd(41943040,Wd.Xs,Wd.Zs),Wd.ei=new Wd(-1,0,0);var Jd=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.si(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){jl(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.et=function(){return Fl(this.ii)},t}(),Zd=function(){function t(){this.ri=new Jd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:kl.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Kp.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e,n){var r=t.store(pd.store),i=t.store(dd.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.hs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){hl(1===u)})));for(var c=[],l=0,f=n.mutations;l<f.length;l++){var h=f[l],p=dd.key(e,h.key.path,n.batchId);o.push(i.delete(p)),c.push(h.key)}return Kp.Ln(o).next((function(){return c}))}function ev(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw fl();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nv=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return hl(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return iv(t).hs({index:pd.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=ov(t),s=iv(t);return s.add({}).next((function(u){hl("number"==typeof u);for(var a=new Od(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Op(t.Os,e)})),i=n.mutations.map((function(e){return Op(t.Os,e)}));return new pd(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,a),l=[],f=new zh((function(t,e){return yl(t.rt(),e.rt())})),h=0,p=r;h<p.length;h++){var d=p[h],v=dd.key(i.userId,d.key.path,u);f=f.add(d.key.path.X()),l.push(s.put(c)),l.push(o.put(v,dd.PLACEHOLDER))}return f.forEach((function(e){l.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[u]=a.keys()})),Kp.Ln(l).next((function(){return a}))}))},t.prototype.Pi=function(t,e){var n=this;return iv(t).get(e).next((function(t){return t?(hl(t.userId===n.userId),jd(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Kp.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return iv(t).hs({index:pd.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(hl(e.batchId>=r),o=jd(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return iv(t).hs({index:pd.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return iv(t).rs(pd.userMutationsIndex,n).next((function(t){return t.map((function(t){return jd(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=dd.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ov(t).hs({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],l=cd(a);if(u===n.userId&&e.path.isEqual(l))return iv(t).get(c).next((function(t){if(!t)throw fl();hl(t.userId===n.userId),o.push(jd(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new zh(yl),i=[];return e.forEach((function(e){var o=dd.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=ov(t).hs({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=cd(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),Kp.Ln(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=dd.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new zh(yl);return ov(t).hs({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],l=cd(a);s===n.userId&&r.nt(l)?l.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Si(t,u)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(iv(t).get(e).next((function(t){if(null===t)throw fl();hl(t.userId===n.userId),r.push(jd(n.Qt,t))})))})),Kp.Ln(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return tv(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),Kp.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.Fi=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return Kp.resolve();var r=IDBKeyRange.lowerBound(dd.prefixForUser(e.userId)),i=[];return ov(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=cd(t[1]);i.push(o)}else r.done()})).next((function(){hl(0===i.length)}))}))},t.prototype.Oi=function(t,e){return rv(t,this.userId,e)},t.prototype.ki=function(t){var e=this;return sv(t).get(this.userId).next((function(t){return t||new hd(e.userId,-1,"")}))},t}();function rv(t,e,n){var r=dd.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ov(t).hs({range:o,us:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function iv(t){return xd(t,pd.store)}function ov(t){return xd(t,dd.store)}function sv(t){return xd(t,hd.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uv=function(){function t(t){this.Mi=t}return t.prototype.next=function(){return this.Mi+=2,this.Mi},t.Li=function(){return new t(0)},t.$i=function(){return new t(-1)},t}(),av=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new uv(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return kl.K(new Cl(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return cv(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return hl(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return cv(t).hs((function(s,u){var a=Fd(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Ji(t,a)))})).next((function(){return Kp.Ln(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return cv(t).hs((function(t,n){var r=Fd(n);e(r)}))},t.prototype.qi=function(t){return lv(t).get(_d.key).next((function(t){return hl(null!==t),t}))},t.prototype.Ui=function(t,e){return lv(t).put(_d.key,e)},t.prototype.Gi=function(t,e){return cv(t).put(Ud(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=wf(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return cv(t).hs({range:r,index:bd.queryTargetsIndexName},(function(t,n,r){var o=Fd(n);_f(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=fv(t);return e.forEach((function(e){var s=sd(e.path);i.push(o.put(new wd(n,s))),i.push(r.Ti.nr(t,n,e))})),Kp.Ln(i)},t.prototype.sr=function(t,e,n){var r=this,i=fv(t);return Kp.forEach(e,(function(e){var o=sd(e.path);return Kp.Ln([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=fv(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=fv(t),i=Jh();return r.hs({range:n,us:!0},(function(t,e,n){var r=cd(t[1]),o=new Vl(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Oi=function(t,e){var n=sd(e.path),r=IDBKeyRange.bound([n],[ml(n)],!1,!0),i=0;return fv(t).hs({index:wd.documentTargetsIndex,us:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return cv(t).get(e).next((function(t){return t?Fd(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){return xd(t,bd.store)}function lv(t){return xd(t,_d.store)}function fv(t){return xd(t,wd.store)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=yl(n,i);return 0===s?yl(r,o):s}var pv=function(){function t(t){this.cr=t,this.buffer=new zh(hv),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();hv(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),dv=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;ul("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return ro(e,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return $p(e=n.sent())?(ul("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,$d(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),vv=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Kp.resolve(Ol.q);var r=new pv(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(ul("LruGarbageCollector","Garbage collection skipped; disabled"),Kp.resolve(Xd)):this.pr(t).next((function(r){return r<n.params.zs?(ul("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Xd):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,u,a,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(ul("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.gr(t,n)})).next((function(t){return a=Date.now(),sl()<=So.DEBUG&&ul("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(a-u)+"ms\nTotal Duration: "+(a-l)+"ms"),Kp.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),yv=function(){function t(t,e){this.db=t,this.lr=new vv(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return gv(t,n)},t.prototype.ir=function(t,e,n){return gv(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return gv(t,e)},t.prototype.Cr=function(t,e){return r=e,i=!1,sv(n=t).ls((function(t){return rv(n,t,r).next((function(t){return t&&(i=!0),Kp.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.gr=function(t,e){var n=this,r=this.db.Fr().Nr(),i=[],o=0;return this.Dr(t,(function(s,u){if(u<=e){var a=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),fv(t).delete([0,sd(s.path)])}))}));i.push(a)}})).next((function(){return Kp.Ln(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Mt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Or=function(t,e){return gv(t,e)},t.prototype.Dr=function(t,e){var n,r=fv(t),i=Ol.q;return r.hs({index:wd.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==Ol.q&&e(new Vl(cd(n)),i),i=u,n=s):i=Ol.q})).next((function(){i!==Ol.q&&e(new Vl(cd(n)),i)}))},t.prototype.pr=function(t){return this.db.Fr().kr(t)},t}();function gv(t,e){return fv(t).put((n=e,r=t.bs,new wd(0,sd(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mv=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return _v(t).put(Ev(e),n)},t.prototype.li=function(t,e){var n=_v(t),r=Ev(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Mr(t,r)}))},t.prototype._i=function(t,e){var n=this;return _v(t).get(Ev(e)).next((function(t){return n.Lr(t)}))},t.prototype.$r=function(t,e){var n=this;return _v(t).get(Ev(e)).next((function(t){var e=n.Lr(t);return e?{hi:e,size:ev(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Yh();return this.Br(t,e,(function(t,e){var i=n.Lr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=Yh(),i=new Uh(Vl.H);return this.Br(t,e,(function(t,e){var o=n.Lr(e);o?(r=r.zt(t,o),i=i.zt(t,ev(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return Kp.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return _v(t).hs({range:r},(function(t,e,r){for(var s=Vl.Et(t);o&&Vl.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=Xh(),o=e.path.length+1,s={};if(n.isEqual(kl.min())){var u=e.path.it();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.it(),c=Ld(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=gd.collectionReadTimeIndex}return _v(t).hs(s,(function(t,n,s){if(t.length===o){var u=Dd(r.Qt,n);e.path.nt(u.key.path)?u instanceof vf&&Jf(e,u)&&(i=i.zt(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new bv(this,!!t&&t.Wr)},t.prototype.kr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return wv(t).get(md.key).next((function(t){return hl(!!t),t}))},t.prototype.Mr=function(t,e){return wv(t).put(md.key,e)},t.prototype.Lr=function(t){if(t){var e=Dd(this.Qt,t);return e instanceof yf&&e.version.isEqual(kl.min())?null:e}return null},t}(),bv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Jd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return eo(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new zh((function(t,e){return yl(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var u=e.Gr.get(o);if(s.hi){var a=Pd(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=ev(a);r+=c-u,n.push(e.jr.ai(t,o,a))}else if(r-=u,e.Wr){var l=Pd(e.jr.Qt,new yf(o,kl.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),Kp.Ln(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.$r(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(Zd);function wv(t){return xd(t,md.store)}function _v(t){return xd(t,gd.store)}function Ev(t){return t.path.it()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Iv=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;hl(n<r&&n>=0&&r<=11);var o=new Yp("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(fd.store),function(t){t.createObjectStore(hd.store,{keyPath:hd.keyPath}),t.createObjectStore(pd.store,{keyPath:pd.keyPath,autoIncrement:!0}).createIndex(pd.userMutationsIndex,pd.userMutationsKeyPath,{unique:!0}),t.createObjectStore(dd.store)}(t),Tv(t),function(t){t.createObjectStore(gd.store)}(t));var s=Kp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(wd.store),t.deleteObjectStore(bd.store),t.deleteObjectStore(_d.store)}(t),Tv(t)),s=s.next((function(){return function(t){var e=t.store(_d.store),n=new _d(0,0,kl.min().j(),0);return e.put(_d.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(pd.store).rs().next((function(n){t.deleteObjectStore(pd.store),t.createObjectStore(pd.store,{keyPath:pd.keyPath,autoIncrement:!0}).createIndex(pd.userMutationsIndex,pd.userMutationsKeyPath,{unique:!0});var r=e.store(pd.store),i=n.map((function(t){return r.put(t)}));return Kp.Ln(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Id.store,{keyPath:Id.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(md.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(gd.store);e.createIndex(gd.readTimeIndex,gd.readTimeIndexPath,{unique:!1}),e.createIndex(gd.collectionReadTimeIndex,gd.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Td.store,{keyPath:Td.keyPath})}(t),function(t){t.createObjectStore(Ad.store,{keyPath:Ad.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(gd.store).hs((function(t,n){e+=ev(n)})).next((function(){var n=new md(e);return t.store(md.store).put(md.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(hd.store),r=t.store(pd.store);return n.rs().next((function(n){return Kp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(pd.userMutationsIndex,i).next((function(r){return Kp.forEach(r,(function(r){hl(r.userId===n.userId);var i=jd(e.Qt,r);return tv(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(wd.store),n=t.store(gd.store);return t.store(_d.store).get(_d.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new Pl(n),s=[0,sd(o)];r.push(e.get(s).next((function(n){return n?Kp.resolve():(r=o,e.put(new wd(0,sd(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return Kp.Ln(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(Ed.store,{keyPath:Ed.keyPath});var n=e.store(Ed.store),r=new Kd,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:sd(i)})}};return e.store(gd.store).hs({us:!0},(function(t,e){var n=new Pl(t);return i(n.X())})).next((function(){return e.store(dd.store).hs({us:!0},(function(t,e){t[0];var n=t[1],r=(t[2],cd(n));return i(r.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(bd.store);return n.hs((function(t,r){var i=Fd(r),o=Ud(e.Qt,i);return n.put(o)}))},t}();function Tv(t){t.createObjectStore(wd.store,{keyPath:wd.keyPath}).createIndex(wd.documentTargetsIndex,wd.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bd.store,{keyPath:bd.keyPath}).createIndex(bd.queryTargetsIndexName,bd.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(_d.store)}var Av="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nv=function(){function t(e,n,r,i,o,s,u,a,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=u,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new _l(wl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var f,h;this.Ti=new yv(this,i),this.ho=n+"main",this.Qt=new kd(a),this.lo=new Qp(this.ho,11,new Iv(this.Qt)),this._o=new av(this.Ti,this.Qt),this.Ei=new Yd,this.fo=(f=this.Qt,h=this.Ei,new mv(f,h)),this.wo=new Bd,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&al("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new _l(wl.FAILED_PRECONDITION,Av);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new Ol(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return ro(e,void 0,void 0,(function(){return io(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return ro(e,void 0,void 0,(function(){return io(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return ro(e,void 0,void 0,(function(){return io(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return xv(e).put(new Id(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if($p(e))return ul("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ul("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return Sv(t).get(fd.key).next((function(t){return Kp.resolve(e.Do(t))}))},t.prototype.Co=function(t){return xv(t).delete(this.clientId)},t.prototype.xo=function(){return ro(this,void 0,void 0,(function(){var t,e,n,r,i=this;return io(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=xd(t,Id.store);return e.rs().next((function(t){var n=i.Fo(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Kp.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)r=n[e],this.Eo.removeItem(this.Oo(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Kp.resolve(!0):Sv(t).get(fd.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.ko(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new _l(wl.FAILED_PRECONDITION,Av);return!1}}return!(!e.networkEnabled||!e.inForeground)||xv(t).rs().next((function(t){return void 0===e.Fo(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&ul("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Mo=function(){return ro(this,void 0,void 0,(function(){var t=this;return io(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Lo(),this.co&&(this.co.cancel(),this.co=null),this.$o(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[fd.store,Id.store],(function(e){var n=new Sd(e,Ol.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.Fo=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.ko(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return xv(e).rs().next((function(e){return t.Fo(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return nv.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.Fr=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;ul("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.lo.runTransaction(t,o,Nd,(function(o){return i=new Sd(o,r.so?r.so.next():Ol.q),"readwrite-primary"===e?r.Vo(i).next((function(t){return!!t||r.bo(i)})).next((function(e){if(!e)throw al("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Zr.po((function(){return r.uo(!1)})),new _l(wl.FAILED_PRECONDITION,id);return n(i)})).next((function(t){return r.So(i).next((function(){return t}))})):r.jo(i).next((function(){return n(i)}))})).then((function(t){return i.Vs(),t}))},t.prototype.jo=function(t){var e=this;return Sv(t).get(fd.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.ko(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new _l(wl.FAILED_PRECONDITION,Av)}))},t.prototype.So=function(t){var e=new fd(this.clientId,this.allowTabSynchronization,Date.now());return Sv(t).put(fd.key,e)},t.Kn=function(){return Qp.Kn()},t.prototype.vo=function(t){var e=this,n=Sv(t);return n.get(fd.key).next((function(t){return e.Do(t)?(ul("IndexedDbPersistence","Releasing primary lease."),n.delete(fd.key)):Kp.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(al("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.$o=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Lo(),e.Zr.Ps((function(){return e.Mo()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.ko=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Oo(t)));return ul("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return al("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.Lo=function(){if(this.Eo)try{this.Eo.setItem(this.Oo(this.clientId),String(Date.now()))}catch(t){al("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Oo(this.clientId))}catch(t){}},t.prototype.Oo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Sv(t){return xd(t,fd.store)}function xv(t){return xd(t,Id.store)}function Ov(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Cv=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=Yh();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=Kh();return i.forEach((function(t,e){e||(e=new yf(t,kl.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return r=e,Vl.wt(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.tc(t,e.path):Hf(e)?this.ec(t,e,n):this.nc(t,e,n);var r},t.prototype.tc=function(t,e){return this.Ho(t,new Vl(e)).next((function(t){var e=Xh();return t instanceof vf&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=Xh();return this.Ei.Us(t,i).next((function(s){return Kp.forEach(s,(function(s){var u,a,c=(u=e,a=s.child(i),new jf(a,null,u.xt.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));return r.nc(t,c,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return i=e,o.sc(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,l=Ih(a,r.get(c),o.vs);r=l instanceof vf?r.zt(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Jf(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=Jh(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof xh&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof vf&&(c=c.zt(t,e))})),c}))},t}(),kv=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Jh(),i=Jh(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Dv=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.xt.length||1===i.xt.length&&i.xt[0].field.ut())||n.isEqual(kl.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(i){var s=o.hc(e,i);return(qf(e)||Bf(e))&&o.lc(e.limitType,s,r,n)?o.uc(t,e):(sl()<=So.DEBUG&&ul("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),$f(e)),o.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new zh(Zf(t));return e.forEach((function(e,r){r instanceof vf&&Jf(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return sl()<=So.DEBUG&&ul("QueryEngine","Using full collection scan to execute query:",$f(e)),this.ac.Kr(t,e,kl.min())},t}(),Pv=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Uh(yl),this.dc=new Jd((function(t){return wf(t)}),_f),this.wc=kl.min(),this.zo=t.Qo(n),this.Ec=t.Fr(),this._o=t.Sr(),this.Tc=new Cv(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t,e,n,r){return new Pv(t,e,n,r)}function Rv(t,e){return ro(this,void 0,void 0,(function(){var n,r,i,o;return io(this,(function(s){switch(s.label){case 0:return n=pl(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new Cv(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=Jh(),u=0,a=o;u<a.length;u++){var c=a[u];n.push(c.batchId);for(var l=0,f=c.mutations;l<f.length;l++){var h=f[l];s=s.add(h.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function Vv(t,e){var n=pl(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,u,a,c,l=e.batch.keys(),f=n.Ec.Nr({Wr:!0});return(r=n,i=t,o=e,s=f,u=o.batch,a=u.keys(),c=Kp.resolve(),a.forEach((function(t){c=c.next((function(){return s._i(i,t)})).next((function(e){var n=e,r=o.Fs.get(t);hl(null!==r),(!n||n.version._(r)<0)&&(n=u.Ss(t,n,o))&&s.ai(n,o.Ns)}))})),c.next((function(){return r.zo.Ci(i,u)}))).next((function(){return f.apply(t)})).next((function(){return n.zo.Fi(t)})).next((function(){return n.Tc.Xo(t,l)}))}))}function Mv(t){var e=pl(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function jv(t,e){var n=pl(t),r=e.kt,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.Fe.forEach((function(e,o){var u,a,c,l=i.get(o);if(l){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var f=e.resumeToken;if(f.l()>0){var h=l.Lt(f,r).Mt(t.bs);i=i.zt(o,h),u=l,c=e,hl((a=h).resumeToken.l()>0),(0===u.resumeToken.l()||a.kt.W()-u.kt.W()>=3e8||c.qe.size+c.Ue.size+c.Qe.size>0)&&s.push(n._o.Hi(t,h))}}}));var u=Kh();if(e.ke.forEach((function(r,i){e.Me.has(r)&&s.push(n.persistence.Ti.Or(t,r))})),s.push(function(t,e,n,r,i){var o=Jh();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Kh();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof yf&&s.version.isEqual(kl.min())?(e.li(n,a),o=o.zt(n,s)):null==u||s.version._(u.version)>0||0===s.version._(u.version)&&u.hasPendingWrites?(e.ai(s,a),o=o.zt(n,s)):ul("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}(t,o,e.ke,r,void 0).next((function(t){u=t}))),!r.isEqual(kl.min())){var a=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(a)}return Kp.Ln(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,u)}))})).then((function(t){return n.fc=i,t}))}function Fv(t,e){var n=pl(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function Uv(t,e){var n=pl(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?(r=i,Kp.resolve(r)):n._o.Bi(t).next((function(i){return r=new eh(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.kt._(r.kt)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function qv(t,e,n){return ro(this,void 0,void 0,(function(){var r,i,o,s;return io(this,(function(u){switch(u.label){case 0:r=pl(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",u.label=1;case 1:return u.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:u.sent(),u.label=3;case 3:return[3,5];case 4:if(!$p(s=u.sent()))throw s;return ul("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function Bv(t,e,n){var r=pl(t),i=kl.min(),o=Jh();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,u=t,a=Yf(e),c=pl(s),l=c.dc.get(a),void 0!==l?Kp.resolve(c.fc.get(l)):c._o.tr(u,a)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:kl.min(),n?o:Jh())})).next((function(t){return{documents:t,Rc:o}}));var s,u,a,c,l}))}function zv(t,e){var n=pl(t),r=pl(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function Gv(t){var e=pl(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.Ec,r=t,i=e.wc,o=pl(n),s=Kh(),u=Ld(i),a=_v(r),c=IDBKeyRange.lowerBound(u,!0),a.hs({index:gd.readTimeIndex,range:c},(function(t,e){var n=Dd(o.Qt,e);s=s.zt(n.key,n),u=e.readTime})).next((function(){return{Go:s,readTime:Rd(u)}}));var n,r,i,o,s,u,a,c})).then((function(t){var n=t.Go,r=t.readTime;return e.wc=r,n}))}function Hv(t){return ro(this,void 0,void 0,(function(){var e;return io(this,(function(n){return[2,(e=pl(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=_v(t),n=kl.min(),e.hs({index:gd.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Rd(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.wc=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kv=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.ks=function(t,e){return Kp.resolve(this.Vc.get(e))},t.prototype.Ms=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:bp(n.createTime)}),Kp.resolve()},t.prototype.Ls=function(t,e){return Kp.resolve(this.bc.get(e))},t.prototype.$s=function(t,e){return this.bc.set(e.name,{name:(n=e).name,query:qd(n.bundledQuery),readTime:bp(n.readTime)}),Kp.resolve();var n},t}(),Yv=function(){function t(){this.vc=new zh(Qv.Sc),this.Dc=new zh(Qv.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Qv(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new Qv(t,e))},t.prototype.Fc=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Oc=function(t){var e=this,n=new Vl(new Pl([])),r=new Qv(n,t),i=new Qv(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.kc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.Mc=function(t){var e=new Vl(new Pl([])),n=new Qv(e,t),r=new Qv(e,t+1),i=Jh();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Oi=function(t){var e=new Qv(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Qv=function(){function t(t,e){this.key=t,this.Lc=e}return t.Sc=function(t,e){return Vl.H(t.key,e.key)||yl(t.Lc,e.Lc)},t.Cc=function(t,e){return yl(t.Lc,e.Lc)||Vl.H(t.key,e.key)},t}(),Xv=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.$c=1,this.Bc=new zh(Qv.Sc)}return t.prototype.Ai=function(t){return Kp.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.$c;this.$c++,this.zo.length>0&&this.zo[this.zo.length-1];var o=new Od(i,e,n,r);this.zo.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.Bc=this.Bc.add(new Qv(a.key,i)),this.Ei.qs(t,a.key.path.X())}return Kp.resolve(o)},t.prototype.Pi=function(t,e){return Kp.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=e+1,r=this.Uc(n),i=r<0?0:r;return Kp.resolve(this.zo.length>i?this.zo[i]:null)},t.prototype.Vi=function(){return Kp.resolve(0===this.zo.length?-1:this.$c-1)},t.prototype.pi=function(t){return Kp.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Qv(e,0),i=new Qv(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Lc);o.push(e)})),Kp.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new zh(yl);return e.forEach((function(t){var e=new Qv(t,0),i=new Qv(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Lc)}))})),Kp.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Vl.wt(i)||(i=i.child(""));var o=new Qv(new Vl(i),0),s=new zh(yl);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Lc)),!0)}),o),Kp.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;hl(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Kp.forEach(e.mutations,(function(i){var o=new Qv(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Oi=function(t,e){var n=new Qv(e,0),r=this.Bc.Re(n);return Kp.resolve(e.isEqual(r&&r.key))},t.prototype.Fi=function(t){return this.zo.length,Kp.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Wv=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Uh(Vl.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Kp.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Yh();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),Kp.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=Xh(),i=new Vl(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),u=s.key,a=s.value,c=a.hi,l=a.readTime;if(!e.path.nt(u.path))break;l._(n)<=0||c instanceof vf&&Jf(e,c)&&(r=r.zt(c.key,c))}return Kp.resolve(r)},t.prototype.jc=function(t,e){return Kp.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new $v(this)},t.prototype.kr=function(t){return Kp.resolve(this.size)},t}(),$v=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return eo(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),Kp.Ln(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Zd),Jv=function(){function t(t){this.persistence=t,this.Gc=new Jd((function(t){return wf(t)}),_f),this.lastRemoteSnapshotVersion=kl.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Yv,this.targetCount=0,this.Jc=uv.Li()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),Kp.resolve()},t.prototype.Qi=function(t){return Kp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Kp.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Kp.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Kp.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new uv(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Kp.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Kp.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Oc(e.targetId),this.targetCount-=1,Kp.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,u.targetId)),i++)})),Kp.Ln(o).next((function(){return i}))},t.prototype.Zi=function(t){return Kp.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Kp.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Kp.resolve()},t.prototype.sr=function(t,e,n){this.Hc.Fc(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),Kp.Ln(i)},t.prototype.Yi=function(t,e){return this.Hc.Oc(e),Kp.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.Mc(e);return Kp.resolve(n)},t.prototype.Oi=function(t,e){return Kp.resolve(this.Hc.Oi(e))},t}(),Zv=function(){function t(t,e){var n,r=this;this.Yc={},this.so=new Ol(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new Jv(this),this.Ei=new Hd,this.fo=(n=this.Ei,new Wv(n,(function(t){return r.Ti.Xc(t)}))),this.Qt=new kd(e),this.wo=new Kv(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Mo=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Xv(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.Fr=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;ul("MemoryPersistence","Starting transaction:",t);var i=new ty(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).kn().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return Kp.$n(Object.values(this.Yc).map((function(n){return function(){return n.Oi(t,e)}})))},t}(),ty=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return eo(e,t),e}(od),ey=function(){function t(t){this.persistence=t,this.na=new Yv,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw fl()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Kp.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Kp.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Kp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Oc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.Fr().Nr();return Kp.forEach(this.ra,(function(r){var i=Vl._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Or=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Kp.$n([function(){return Kp.resolve(n.na.Oi(e))},function(){return n.persistence.Sr().Oi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t,e){return"firestore_clients_"+t+"_"+e}function ry(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function iy(t,e){return"firestore_targets_"+t+"_"+e}var oy=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new _l(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(al("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),sy=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new _l(r.error.code,r.error.message)),i?new t(e,r.state,o):(al("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),uy=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=tp(),s=0;i&&s<r.activeTargetIds.length;++s)i=Wl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(al("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ay=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(al("SharedClientState","Failed to parse online state: "+e),null)},t}(),cy=function(){function t(){this.activeTargetIds=tp()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),ly=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.M=null,this.da=this.wa.bind(this),this.Ea=new Uh(yl),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=ny(this.persistenceKey,this.la),this.ma="firestore_sequence_number_"+this.persistenceKey,this.Ea=this.Ea.zt(this.la,new cy),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return ro(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,a,c,l,f=this;return io(this,(function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(ny(this.persistenceKey,r)))&&(o=uy.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(u=this.pa(s))&&this.ba(u),a=0,c=this.Ta;a<c.length;a++)l=c[a],this.wa(l);return this.Ta=[],this.window.addEventListener("unload",(function(){return f.Mo()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.Fa(t)},t.prototype.Oa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(iy(this.persistenceKey,t));if(n){var r=sy.ca(t,n);r&&(e=r.state)}}return this.ka.ua(t),this.Va(),e},t.prototype.Ma=function(t){this.ka.ha(t),this.Va()},t.prototype.La=function(t){return this.ka.activeTargetIds.has(t)},t.prototype.$a=function(t){this.removeItem(iy(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.Fa(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.Mo=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ul("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ul("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ul("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ul("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void al("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return ro(e,void 0,void 0,(function(){var t,e,r,i,o,s;return io(this,(function(u){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Ol.q;if(null!=t)try{var n=JSON.parse(t);hl("number"==typeof n),e=n}catch(r){al("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==Ol.q&&this.M(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"ka",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.ka.aa())},t.prototype.xa=function(t,e,n){var r=new oy(this.currentUser,t,e,n),i=ry(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.Fa=function(t){var e=ry(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){var e={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(e))},t.prototype.qa=function(t,e,n){var r=iy(this.persistenceKey,t),i=new sy(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return uy.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return oy.ca(new Il(i),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return sy.ca(r,e)},t.prototype.pa=function(t){return ay.ca(t)},t.prototype.Ya=function(t){return ro(this,void 0,void 0,(function(){return io(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(ul("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this._a.su(s,u).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=tp();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),fy=function(){function t(){this.iu=new cy,this.ru={},this.fa=null,this.M=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Oa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.Ma=function(t){this.iu.ha(t)},t.prototype.La=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.$a=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new cy,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.Mo=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),hy=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.Mo=function(){},t}(),py=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.Mo=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){ul("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){ul("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),dy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},vy=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),yy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return eo(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new nl;s.listenOnce($c.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Wc.NO_ERROR:var e=s.getResponseJson();ul("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Wc.TIMEOUT:ul("Connection",'RPC "'+t+'" timed out'),o(new _l(wl.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:var n=s.getStatus();if(ul("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=(a=r.status,c=a.toLowerCase().replace(/_/g,"-"),Object.values(wl).indexOf(c)>=0?c:wl.UNKNOWN);o(new _l(u,r.message))}else o(new _l(wl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new _l(wl.UNAVAILABLE,"Connection failed."));break;default:fl()}}finally{ul("Connection",'RPC "'+t+'" completed.')}var a,c}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},e.prototype.Cu=function(t,e){var n,r,i=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new Hc,s=Yu(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(u.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fo())||"object"==typeof navigator&&"ReactNative"===navigator.product||fo().indexOf("Electron/")>=0||((r=fo()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||fo().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(u.httpHeadersOverwriteParam="$httpHeaders");var a=i.join("");ul("Connection","Creating WebChannel: "+a,u);var c=o.createWebChannel(a,u),l=!1,f=!1,h=new vy({fu:function(t){f?ul("Connection","Not sending because WebChannel is closed:",t):(l||(ul("Connection","Opening WebChannel transport."),c.open(),l=!0),ul("Connection","WebChannel sending:",t),c.send(t))},du:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,el.EventType.OPEN,(function(){f||ul("Connection","WebChannel transport opened.")})),p(c,el.EventType.CLOSE,(function(){f||(f=!0,ul("Connection","WebChannel transport closed"),h.Ru())})),p(c,el.EventType.ERROR,(function(t){f||(f=!0,cl("Connection","WebChannel transport errored:",t),h.Ru(new _l(wl.UNAVAILABLE,"The operation could not be completed")))})),p(c,el.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];hl(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){ul("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ph[t];if(void 0!==e)return Fh(e)}(o),u=i.message;void 0===s&&(s=wl.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),f=!0,h.Ru(new _l(s,u)),c.close()}else ul("Connection","WebChannel received:",n),h.Pu(n)}})),p(s,Jc.STAT_EVENT,(function(t){t.stat===Zc?ul("Connection","Detected buffering proxy"):t.stat===tl&&ul("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Au()}),0),h},e}(function(){function t(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);ul("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return ul("RestConnection","Received: ",t),t}),(function(e){throw cl("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.6",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){var n=dy[t];return this.gu+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(){return"undefined"!=typeof window?window:null}function my(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t){return new vp(t,!0)}var wy=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.Fu=i,this.Ou=0,this.ku=null,this.Mu=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ou=0},t.prototype.Lu=function(){this.Ou=this.Fu},t.prototype.$u=function(t){var e=this;this.cancel();var n=Math.floor(this.Ou+this.Bu()),r=Math.max(0,Date.now()-this.Mu),i=Math.max(0,n-r);i>0&&ul("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ou+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ku=this.Zr.Tr(this.fs,i,(function(){return e.Mu=Date.now(),t()})),this.Ou*=this.Nu,this.Ou<this.xu&&(this.Ou=this.xu),this.Ou>this.Fu&&(this.Ou=this.Fu)},t.prototype.qu=function(){null!==this.ku&&(this.ku.Rs(),this.ku=null)},t.prototype.cancel=function(){null!==this.ku&&(this.ku.cancel(),this.ku=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Ou},t}(),_y=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new wy(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return ro(this,void 0,void 0,(function(){return io(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return ro(this,void 0,void 0,(function(){return io(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return ro(this,void 0,void 0,(function(){return io(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===wl.RESOURCE_EXHAUSTED?(al(e.toString()),al("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Lu()):e&&e.code===wl.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new _l(wl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.$u((function(){return ro(t,void 0,void 0,(function(){return io(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return ul("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(ul("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ey=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return eo(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:fl(),o=e.targetChange.targetIds||[],s=function(t,e){return t.Bt?(hl(void 0===e||"string"==typeof e),bl.fromBase64String(e||"")):(hl(void 0===e||e instanceof Uint8Array),bl.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),u=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?wl.UNKNOWN:Fh(t.code);return new _l(e,t.message||"")}(a);n=new ap(i,o,s,u||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=Ip(t,i.document.name),s=bp(i.document.updateTime);var a=new ff({mapValue:{fields:i.document.fields}}),c=(u=new vf(o,s,a,{}),i.targetIds||[]),l=i.removedTargetIds||[];n=new sp(c,l,u.key,u)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=Ip(t,i.document),s=i.readTime?bp(i.readTime):kl.min(),a=new yf(o,s),u=i.removedTargetIds||[],n=new sp([],u,a.key,a);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=Ip(t,i.document),s=i.removedTargetIds||[],n=new sp([],s,o,null);else{if(!("filter"in e))return fl();e.filter;var f=e.filter;f.targetId,i=f.count||0,o=new Mh(i),s=f.targetId,n=new up(s,o)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return kl.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?kl.min():e.readTime?bp(e.readTime):kl.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e,n,r,i,o={};o.database=Np(this.Qt),o.addTarget=(e=this.Qt,i=(n=t).target,(r=Ef(i)?{documents:kp(e,i)}:{query:Dp(e,i)}).targetId=n.targetId,n.resumeToken.l()>0?r.resumeToken=gp(e,n.resumeToken):n.kt._(kl.min())>0&&(r.readTime=yp(e,n.kt.j())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return fl()}}(0,e.Ot);return null==n?null:{"goog-listen-tags":n}}(this.Qt,t);s&&(o.labels=s),this.th(o)},e.prototype.hh=function(t){var e={};e.database=Np(this.Qt),e.removeTarget=t,this.th(e)},e}(_y),Iy=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return eo(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(hl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(hl(void 0!==i),r.map((function(t){return function(t,e){var n=t.updateTime?bp(t.updateTime):bp(e);n.isEqual(kl.min())&&(n=bp(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new mh(n,r)}(t,i)}))):[]),n=bp(t.commitTime);return this.listener.dh(n,e)}var r,i;return hl(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Np(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Op(e.Qt,t)}))};this.th(n)},e}(_y),Ty=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return eo(e,t),e.prototype.Ih=function(){if(this.Th)throw new _l(wl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===wl.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===wl.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),Ay=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(al(e),this.Rh=!1):ul("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),Ny=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.Fh=[],this.Oh=i,this.Oh.ou((function(t){n.Ps((function(){return ro(o,void 0,void 0,(function(){return io(this,(function(t){switch(t.label){case 0:return Ry(this)?(ul("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return ro(this,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return(e=pl(t)).Nh.add(4),[4,xy(e)];case 1:return n.sent(),e.kh.set("Unknown"),e.Nh.delete(4),[4,Sy(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.kh=new Ay(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){return ro(this,void 0,void 0,(function(){var e,n;return io(this,(function(r){switch(r.label){case 0:if(!Ry(t))return[3,4];e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function xy(t){return ro(this,void 0,void 0,(function(){var e,n;return io(this,(function(r){switch(r.label){case 0:e=0,n=t.Fh,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Oy(t,e){var n=pl(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Ly(n)?Py(n):Wy(n).Hu()&&ky(n,e))}function Cy(t,e){var n=pl(t),r=Wy(n);n.xh.delete(e),r.Hu()&&Dy(n,e),0===n.xh.size&&(r.Hu()?r.Xu():Ry(n)&&n.kh.set("Unknown"))}function ky(t,e){t.Mh.on(e.targetId),Wy(t).uh(e)}function Dy(t,e){t.Mh.on(e),Wy(t).hh(e)}function Py(t){t.Mh=new lp({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Wy(t).start(),t.kh.Ph()}function Ly(t){return Ry(t)&&!Wy(t).zu()&&t.xh.size>0}function Ry(t){return 0===pl(t).Nh.size}function Vy(t){t.Mh=void 0}function My(t){return ro(this,void 0,void 0,(function(){return io(this,(function(e){return t.xh.forEach((function(e,n){ky(t,e)})),[2]}))}))}function jy(t,e){return ro(this,void 0,void 0,(function(){return io(this,(function(n){return Vy(t),Ly(t)?(t.kh.Vh(e),Py(t)):t.kh.set("Unknown"),[2]}))}))}function Fy(t,e,n){return ro(this,void 0,void 0,(function(){var r,i,o;return io(this,(function(s){switch(s.label){case 0:if(t.kh.set("Online"),!(e instanceof ap&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return ro(this,void 0,void 0,(function(){var n,r,i,o;return io(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.xh.has(o)?[4,t.Dh.Lh(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.xh.delete(o),t.Mh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),ul("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Uy(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof sp?t.Mh.dn(e):e instanceof up?t.Mh.Pn(e):t.Mh.Tn(e),n.isEqual(kl.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Mv(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,(u=t,a=n,c=u.Mh.Vn(a),c.Fe.forEach((function(t,e){if(t.resumeToken.l()>0){var n=u.xh.get(e);n&&u.xh.set(e,n.Lt(t.resumeToken,a))}})),c.Oe.forEach((function(t){var e=u.xh.get(t);if(e){u.xh.set(t,e.Lt(bl.T,e.kt)),Dy(u,t);var n=new eh(e.target,t,1,e.sequenceNumber);ky(u,n)}})),u.Dh.$h(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return ul("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Uy(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var u,a,c}))}))}function Uy(t,e,n){return ro(this,void 0,void 0,(function(){var r=this;return io(this,(function(i){switch(i.label){case 0:if(!$p(e))throw e;return t.Nh.add(1),[4,xy(t)];case 1:return i.sent(),t.kh.set("Offline"),n||(n=function(){return Mv(t.bh)}),t._s.po((function(){return ro(r,void 0,void 0,(function(){return io(this,(function(e){switch(e.label){case 0:return ul("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,Sy(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function qy(t,e){return e().catch((function(n){return Uy(t,n,e)}))}function By(t){return ro(this,void 0,void 0,(function(){var e,n,r,i,o;return io(this,(function(s){switch(s.label){case 0:e=pl(t),n=$y(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!(Ry(u=e)&&u.Ch.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Fv(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=$y(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Uy(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return zy(e)&&Gy(e),[2]}var u}))}))}function zy(t){return Ry(t)&&!$y(t).zu()&&t.Ch.length>0}function Gy(t){$y(t).start()}function Hy(t){return ro(this,void 0,void 0,(function(){return io(this,(function(e){return $y(t).Eh(),[2]}))}))}function Ky(t){return ro(this,void 0,void 0,(function(){var e,n,r,i;return io(this,(function(o){for(e=$y(t),n=0,r=t.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]}))}))}function Yy(t,e,n){return ro(this,void 0,void 0,(function(){var r,i;return io(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Cd.from(r,e,n),[4,qy(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,By(t)];case 2:return o.sent(),[2]}}))}))}function Qy(t,e){return ro(this,void 0,void 0,(function(){return io(this,(function(n){switch(n.label){case 0:return e&&$y(t)._h?[4,function(t,e){return ro(this,void 0,void 0,(function(){var n,r;return io(this,(function(i){switch(i.label){case 0:return jh(r=e.code)&&r!==wl.ABORTED?(n=t.Ch.shift(),$y(t).Yu(),[4,qy(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,By(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return zy(t)&&Gy(t),[2]}}))}))}function Xy(t,e){return ro(this,void 0,void 0,(function(){var n;return io(this,(function(r){switch(r.label){case 0:return n=pl(t),e?(n.Nh.delete(2),[4,Sy(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,xy(n)]);case 3:r.sent(),n.kh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Wy(t){var e,n,r,i,o=this;return t.Uh||(t.Uh=(e=t.Sh,n=t._s,r={wu:My.bind(null,t),Tu:jy.bind(null,t),ah:Fy.bind(null,t)},(i=pl(e)).Ih(),new Ey(n,i.Qu,i.credentials,i.Qt,r)),t.Fh.push((function(e){return ro(o,void 0,void 0,(function(){return io(this,(function(n){switch(n.label){case 0:return e?(t.Uh.Yu(),Ly(t)?Py(t):t.kh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:n.sent(),Vy(t),n.label=3;case 3:return[2]}}))}))}))),t.Uh}function $y(t){var e,n,r,i,o=this;return t.Qh||(t.Qh=(e=t.Sh,n=t._s,r={wu:Hy.bind(null,t),Tu:Qy.bind(null,t),wh:Ky.bind(null,t),dh:Yy.bind(null,t)},(i=pl(e)).Ih(),new Iy(n,i.Qu,i.credentials,i.Qt,r)),t.Fh.push((function(e){return ro(o,void 0,void 0,(function(){return io(this,(function(n){switch(n.label){case 0:return e?(t.Qh.Yu(),[4,By(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:n.sent(),t.Ch.length>0&&(ul("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),n.label=4;case 4:return[2]}}))}))}))),t.Qh}var Jy=function(){this.Kh=void 0,this.listeners=[]},Zy=function(){this.queries=new Jd((function(t){return Wf(t)}),Xf),this.onlineState="Unknown",this.Wh=new Set};function tg(t,e){return ro(this,void 0,void 0,(function(){var n,r,i,o,s,u,a;return io(this,(function(c){switch(c.label){case 0:if(n=pl(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Jy),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return u=c.sent(),a=rd(u,"Initialization of query '"+$f(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&ig(n),[2]}}))}))}function eg(t,e){return ro(this,void 0,void 0,(function(){var n,r,i,o,s;return io(this,(function(u){return n=pl(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function ng(t,e){for(var n=pl(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,l=a.listeners;c<l.length;c++)l[c].zh(s)&&(r=!0);a.Kh=s}}r&&ig(n)}function rg(t,e,n){var r=pl(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ig(t){t.Wh.forEach((function(t){t.next()}))}var og=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new rp(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=rp.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),sg=function(t){this.key=t},ug=function(t){this.key=t},ag=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Jh(),this.De=Jh(),this.hl=Zf(t),this.ll=new ep(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new np,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,u=!1,a=qf(this.query)&&i.size===this.query.limit?i.last():null,c=Bf(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var l=i.get(t),f=e instanceof vf?e:null;f&&(f=Jf(n.query,f)?f:null);var h=!!l&&n.De.has(l.key),p=!!f&&(f.Vt||n.De.has(f.key)&&f.hasCommittedMutations),d=!1;l&&f?l.data().isEqual(f.data())?h!==p&&(r.track({type:3,doc:f}),d=!0):n.wl(l,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.hl(f,a)>0||c&&n.hl(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),d=!0):l&&!f&&(r.track({type:1,doc:l}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),qf(this.query)||Bf(this.query))for(;s.size>this.query.limit;){var l=qf(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:u,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fl()}})(n)-o(i)||r.hl(t.doc,e.doc);var n,i,o})),this.El(n);var s=e?this.Tl():[],u=0===this.ul.size&&this.Be?1:0,a=u!==this.al;return this.al=u,0!==o.length||a?{snapshot:new rp(this.query,t.ll,i,o,t.De,0===u,a,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new np,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Jh(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new ug(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new sg(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Jh();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return rp.Ne(this.query,this.ll,this.De,0===this.al)},t}(),cg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},lg=function(t){this.key=t,this.Pl=!1},fg=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Jd((function(t){return Wf(t)}),Xf),this.Sl=new Map,this.Dl=[],this.Cl=new Uh(Vl.H),this.xl=new Map,this.Nl=new Yv,this.Fl={},this.Ol=new Map,this.kl=uv.$i(),this.onlineState="Unknown",this.Ml=void 0}return Object.defineProperty(t.prototype,"Ll",{get:function(){return!0===this.Ml},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){return ro(this,void 0,void 0,(function(){var n,r,i,o,s,u;return io(this,(function(a){switch(a.label){case 0:return n=qg(t),(o=n.vl.get(e))?(r=o.targetId,n.Vl.Oa(r),i=o.view.Rl(),[3,4]):[3,1];case 1:return[4,Uv(n.bh,Yf(e))];case 2:return s=a.sent(),u=n.Vl.Oa(s.targetId),r=s.targetId,[4,pg(n,e,r,"current"===u)];case 3:i=a.sent(),n.Ll&&Oy(n.yl,s),a.label=4;case 4:return[2,i]}}))}))}function pg(t,e,n,r){return ro(this,void 0,void 0,(function(){var i,o,s,u,a,c;return io(this,(function(l){switch(l.label){case 0:return t.$l=function(e,n,r){return function(t,e,n,r){return ro(this,void 0,void 0,(function(){var i,o,s;return io(this,(function(u){switch(u.label){case 0:return(i=e.view.fl(n)).lc?[4,Bv(t.bh,e.query,!1).then((function(t){var n=t.documents;return e.view.fl(n,i)}))]:[3,2];case 1:i=u.sent(),u.label=2;case 2:return o=r&&r.Fe.get(e.targetId),s=e.view.wi(i,t.Ll,o),[2,(Ng(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,Bv(t.bh,e,!0)];case 1:return i=l.sent(),o=new ag(e,i.Rc),s=o.fl(i.documents),u=op.$e(n,r&&"Offline"!==t.onlineState),a=o.wi(s,t.Ll,u),Ng(t,n,a.Il),c=new cg(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),a.snapshot)]}}))}))}function dg(t,e){return ro(this,void 0,void 0,(function(){var n,r,i;return io(this,(function(o){switch(o.label){case 0:return n=pl(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!Xf(t,e)}))),void n.vl.delete(e))]:n.Ll?(n.Vl.Ma(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,qv(n.bh,r.targetId,!1).then((function(){n.Vl.$a(r.targetId),Cy(n.yl,r.targetId),Tg(n,r.targetId)})).catch($d)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Tg(n,r.targetId),[4,qv(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function vg(t,e,n){return ro(this,void 0,void 0,(function(){var r,i,o,s;return io(this,(function(u){switch(u.label){case 0:r=Bg(t),u.label=1;case 1:return u.trys.push([1,5,,6]),[4,(a=r.bh,c=e,f=pl(a),h=Cl.now(),p=c.reduce((function(t,e){return t.add(e.key)}),Jh()),f.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return f.Tc.Xo(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=Th(o,l.get(o.key));null!=s&&n.push(new xh(o.key,s,pf(s.proto.mapValue),bh.exists(!0)))}return f.zo.Ri(t,h,n,c)}))})).then((function(t){var e=t.xs(l);return{batchId:t.batchId,ri:e}})))];case 2:return i=u.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.Fl[t.currentUser.A()];r||(r=new Uh(yl)),r=r.zt(e,n),t.Fl[t.currentUser.A()]=r}(r,i.batchId,n),[4,Og(r,i.ri)];case 3:return u.sent(),[4,By(r.yl)];case 4:return u.sent(),[3,6];case 5:return o=u.sent(),s=rd(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var a,c,l,f,h,p}))}))}function yg(t,e){return ro(this,void 0,void 0,(function(){var n,r;return io(this,(function(i){switch(i.label){case 0:n=pl(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,jv(n.bh,e)];case 2:return r=i.sent(),e.Fe.forEach((function(t,e){var r=n.xl.get(e);r&&(hl(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?hl(r.Pl):t.Qe.size>0&&(hl(r.Pl),r.Pl=!1))})),[4,Og(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,$d(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function gg(t,e,n){var r=pl(t);if(r.Ll&&0===n||!r.Ll&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=pl(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&ig(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ll&&r.Vl.Qa(e)}}function mg(t,e,n){return ro(this,void 0,void 0,(function(){var r,i,o,s,u,a;return io(this,(function(c){switch(c.label){case 0:return(r=pl(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Uh(Vl.H)).zt(o,new yf(o,kl.min())),u=Jh().add(o),a=new ip(kl.min(),new Map,new zh(yl),s,u),[4,yg(r,a)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),xg(r),[3,4];case 2:return[4,qv(r.bh,e,!1).then((function(){return Tg(r,e,n)})).catch($d)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function bg(t,e){return ro(this,void 0,void 0,(function(){var n,r,i;return io(this,(function(o){switch(o.label){case 0:n=pl(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Vv(n.bh,e)];case 2:return i=o.sent(),Ig(n,r,null),Eg(n,r),n.Vl.Na(r,"acknowledged"),[4,Og(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,$d(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function wg(t,e,n){return ro(this,void 0,void 0,(function(){var r,i;return io(this,(function(o){switch(o.label){case 0:r=pl(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.bh,u=e,a=pl(s),a.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return a.zo.Pi(t,u).next((function(n){return hl(null!==n),e=n.keys(),a.zo.Ci(t,n)})).next((function(){return a.zo.Fi(t)})).next((function(){return a.Tc.Xo(t,e)}))})))];case 2:return i=o.sent(),Ig(r,e,n),Eg(r,e),r.Vl.Na(e,"rejected",n),[4,Og(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,$d(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,u,a}))}))}function _g(t,e){return ro(this,void 0,void 0,(function(){var n,r,i,o,s;return io(this,(function(u){switch(u.label){case 0:Ry((n=pl(t)).yl)||ul("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,(a=n.bh,c=pl(a),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c.zo.Vi(t)})))];case 2:return-1===(r=u.sent())?[2,void e.resolve()]:((i=n.Ol.get(r)||[]).push(e),n.Ol.set(r,i),[3,4]);case 3:return o=u.sent(),s=rd(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var a,c}))}))}function Eg(t,e){(t.Ol.get(e)||[]).forEach((function(t){t.resolve()})),t.Ol.delete(e)}function Ig(t,e,n){var r=pl(t),i=r.Fl[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Fl[r.currentUser.A()]=i}}function Tg(t,e,n){void 0===n&&(n=null),t.Vl.Ma(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ll&&t.Nl.Oc(e).forEach((function(e){t.Nl.Oi(e)||Ag(t,e)}))}function Ag(t,e){var n=t.Cl.get(e);null!==n&&(Cy(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),xg(t))}function Ng(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof sg?(t.Nl.nr(o.key,e),Sg(t,o)):o instanceof ug?(ul("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Oi(o.key)||Ag(t,o.key)):fl()}}function Sg(t,e){var n=e.key;t.Cl.get(n)||(ul("SyncEngine","New document in limbo: "+n),t.Dl.push(n),xg(t))}function xg(t){for(;t.Dl.length>0&&t.Cl.size<t.pl;){var e=t.Dl.shift(),n=t.kl.next();t.xl.set(n,new lg(e)),t.Cl=t.Cl.zt(e,n),Oy(t.yl,new eh(Yf(Uf(e.path)),n,2,Ol.q))}}function Og(t,e,n){return ro(this,void 0,void 0,(function(){var r,i,o,s;return io(this,(function(u){switch(u.label){case 0:return r=pl(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,u){s.push(r.$l(u,e,n).then((function(t){if(t){r.Ll&&r.Vl.Ba(u.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=kv.oc(u.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.bl.ah(i),[4,function(t,e){return ro(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,l;return io(this,(function(f){switch(f.label){case 0:n=pl(t),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Kp.forEach(e,(function(e){return Kp.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return Kp.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return f.sent(),[3,4];case 3:if(!$p(r=f.sent()))throw r;return ul("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(a=n.fc.get(u),c=a.kt,l=a.$t(c),n.fc=n.fc.zt(u,l));return[2]}}))}))}(r.bh,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Cg(t,e){return ro(this,void 0,void 0,(function(){var n,r;return io(this,(function(i){switch(i.label){case 0:return(n=pl(t)).currentUser.isEqual(e)?[3,3]:(ul("SyncEngine","User change. New user:",e.A()),[4,Rv(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Ol.forEach((function(t){t.forEach((function(t){t.reject(new _l(wl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Ol.clear(),n.Vl.Ua(e,r.mc,r.Ac),[4,Og(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function kg(t,e){var n=pl(t),r=n.xl.get(e);if(r&&r.Pl)return Jh().add(r.key);var i=Jh(),o=n.Sl.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.vl.get(a);i=i.Pe(c.view._l)}return i}function Dg(t,e){return ro(this,void 0,void 0,(function(){var n,r,i;return io(this,(function(o){switch(o.label){case 0:return[4,Bv((n=pl(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ll&&Ng(n,e.targetId,i.Il),i)]}}))}))}function Pg(t){return ro(this,void 0,void 0,(function(){var e;return io(this,(function(n){return[2,Gv((e=pl(t)).bh).then((function(t){return Og(e,t)}))]}))}))}function Lg(t,e,n,r){return ro(this,void 0,void 0,(function(){var i,o;return io(this,(function(s){switch(s.label){case 0:return[4,(u=(i=pl(t)).bh,a=e,c=pl(u),l=pl(c.zo),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.yi(t,a).next((function(e){return e?c.Tc.Xo(t,e):Kp.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,By(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ig(i,e,r||null),Eg(i,e),function(t,e){pl(pl(t).zo).xi(e)}(i.bh,e)):fl(),s.label=4;case 4:return[4,Og(i,o)];case 5:return s.sent(),[3,7];case 6:ul("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var u,a,c,l}))}))}function Rg(t,e){return ro(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c;return io(this,(function(l){switch(l.label){case 0:return qg(n=pl(t)),Bg(n),!0!==e||!0===n.Ml?[3,3]:(r=n.Vl.va(),[4,Vg(n,r.it())]);case 1:return i=l.sent(),n.Ml=!0,[4,Xy(n.yl,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)u=s[o],Oy(n.yl,u);return[3,7];case 3:return!1!==e||!1===n.Ml?[3,7]:(a=[],c=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.La(e)?a.push(e):c=c.then((function(){return Tg(n,e),qv(n.bh,e,!0)})),Cy(n.yl,e)})),[4,c]);case 4:return l.sent(),[4,Vg(n,a)];case 5:return l.sent(),(f=pl(n)).xl.forEach((function(t,e){Cy(f.yl,e)})),f.Nl.kc(),f.xl=new Map,f.Cl=new Uh(Vl.H),n.Ml=!1,[4,Xy(n.yl,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var f}))}))}function Vg(t,e,n){return ro(this,void 0,void 0,(function(){var n,r,i,o,s,u,a,c,l,f,h,p,d,v;return io(this,(function(y){switch(y.label){case 0:n=pl(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=s[o],a=void 0,(c=n.Sl.get(u))&&0!==c.length?[4,Uv(n.bh,Yf(c[0]))]:[3,7]):[3,13];case 2:a=y.sent(),l=0,f=c,y.label=3;case 3:return l<f.length?(h=f[l],p=n.vl.get(h),[4,Dg(n,p)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,zv(n.bh,u)];case 8:return v=y.sent(),[4,Uv(n.bh,v)];case 9:return a=y.sent(),[4,pg(n,Mg(v),u,!1)];case 10:y.sent(),y.label=11;case 11:r.push(a),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function Mg(t){return Ff(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jg(t){var e=pl(t);return pl(pl(e.bh).persistence).Uo()}function Fg(t,e,n,r){return ro(this,void 0,void 0,(function(){var i,o,s;return io(this,(function(u){switch(u.label){case 0:return(i=pl(t)).Ml?(ul("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Gv(i.bh)];case 3:return o=u.sent(),s=ip.Le(e,"current"===n),[4,Og(i,o,s)];case 4:return u.sent(),[3,8];case 5:return[4,qv(i.bh,e,!0)];case 6:return u.sent(),Tg(i,e,r),[3,8];case 7:fl(),u.label=8;case 8:return[2]}}))}))}function Ug(t,e,n){return ro(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,l,f,h;return io(this,(function(p){switch(p.label){case 0:if(!(r=qg(t)).Ml)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Sl.has(s)?(ul("SyncEngine","Adding an already active target "+s),[3,5]):[4,zv(r.bh,s)]):[3,6];case 2:return u=p.sent(),[4,Uv(r.bh,u)];case 3:return a=p.sent(),[4,pg(r,Mg(u),a.targetId,!1)];case 4:p.sent(),Oy(r.yl,a),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return io(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,qv(r.bh,t,!1).then((function(){Cy(r.yl,t),Tg(r,t)})).catch($d)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,p.label=7;case 7:return l<f.length?(h=f[l],[5,c(h)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function qg(t){var e=pl(t);return e.yl.Dh.$h=yg.bind(null,e),e.yl.Dh.vn=kg.bind(null,e),e.yl.Dh.Lh=mg.bind(null,e),e.bl.ah=ng.bind(null,e.gl),e.bl.Bl=rg.bind(null,e.gl),e}function Bg(t){var e=pl(t);return e.yl.Dh.Bh=bg.bind(null,e),e.yl.Dh.qh=wg.bind(null,e),e}var zg=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return ro(this,void 0,void 0,(function(){return io(this,(function(e){switch(e.label){case 0:return this.Qt=by(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Lv(this.persistence,new Dv,t.Jl,this.Qt)},t.prototype.jl=function(t){return new Zv(ey.ia,this.Qt)},t.prototype.Wl=function(t){return new fy},t.prototype.terminate=function(){return ro(this,void 0,void 0,(function(){return io(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.Mo()];case 1:return t.sent(),[4,this.persistence.Mo()];case 2:return t.sent(),[2]}}))}))},t}(),Gg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return eo(e,t),e.prototype.initialize=function(e){return ro(this,void 0,void 0,(function(){return io(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Hv(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Bg(this.Yl._a)];case 4:return n.sent(),[4,By(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return Lv(this.persistence,new Dv,t.Jl,this.Qt)},e.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new dv(e,t._s)},e.prototype.jl=function(t){var e=Ov(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Wd.Ys(this.cacheSizeBytes):Wd.ti;return new Nv(this.synchronizeTabs,e,t.clientId,n,t._s,gy(),my(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new fy},e}(zg),Hg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return eo(e,t),e.prototype.initialize=function(e){return ro(this,void 0,void 0,(function(){var n,r=this;return io(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof ly?(this.Vl._a={eu:Lg.bind(null,n),nu:Fg.bind(null,n),su:Ug.bind(null,n),Uo:jg.bind(null,n),tu:Pg.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return ro(r,void 0,void 0,(function(){return io(this,(function(e){switch(e.label){case 0:return[4,Rg(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=gy();if(!ly.Kn(e))throw new _l(wl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ov(t.yu.t,t.yu.persistenceKey);return new ly(e,t._s,n,t.clientId,t.Jl)},e}(Gg),Kg=function(){function t(){}return t.prototype.initialize=function(t,e){return ro(this,void 0,void 0,(function(){var n=this;return io(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return gg(n._a,t,1)},this.yl.Dh.n_=Cg.bind(null,this._a),[4,Xy(this.yl,this._a.Ll)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new Zy},t.prototype.Xl=function(t){var e,n,r=by(t.yu.t),i=(e=t.yu,new yy(e));return n=t.credentials,new Ty(n,i,r)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return gg(s._a,t,0)},o=py.Kn()?new py:new hy,new Ny(e,n,r,i,o)},t.prototype.e_=function(t,e){return n=this.bh,r=this.yl,i=this.gl,o=this.Vl,s=t.Jl,u=t.pl,a=e,c=new fg(n,r,i,o,s,u),a&&(c.Ml=!0),c;var n,r,i,o,s,u,a,c},t.prototype.terminate=function(){return function(t){return ro(this,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return e=pl(t),ul("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,xy(e)];case 1:return n.sent(),e.Oh.Mo(),e.kh.set("Unknown"),[2]}}))}))}(this.yl)},t}(),Yg=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Qg=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new _l(wl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Rl(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),Xg=function(t){this._methodName=t},Wg=function(t){this.d_=t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $g(t,e,n){if(!n)throw new _l(wl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Jg(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new _l(wl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zg(t,e,n,r){if(!0===e&&!0===r)throw new _l(wl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function tm(t){if(!Vl.wt(t))throw new _l(wl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function em(t){if(Vl.wt(t))throw new _l(wl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function nm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":fl()}function rm(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new _l(wl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=nm(t);throw new _l(wl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function im(t,e){if(e<=0)throw new _l(wl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var om=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new _l(wl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _l(wl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),sm=new Map,um=function(){function t(t,e){this.w_="(lite)",this.E_=new om({}),this.T_=!1,t instanceof il?(this.I_=t,this.m_=new Al):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new _l(wl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(t.options.projectId)}(t),this.m_=new Nl(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new _l(wl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new _l(wl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new om(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Al;switch(t.type){case"gapi":var e=t.client;return hl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xl(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new _l(wl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return this,(t=sm.get(this))&&(ul("ComponentProvider","Removing Datastore"),sm.delete(this),t.terminate()),Promise.resolve();var t},t}(),am=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new lm(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),cm=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),lm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Uf(r))||this).firestore=e,i.D_=r,i.type="collection",i}return eo(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new am(this.firestore,null,new Vl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(cm);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Wg&&(t=t.d_),$g("collection","path",e),t instanceof um)return em(n=Pl.ot.apply(Pl,ao([e],r))),new lm(t,null,n);if(!(t instanceof am||t instanceof lm))throw new _l(wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return em(n=Pl.ot.apply(Pl,ao([t.path],r)).child(Pl.ot(e))),new lm(t.firestore,null,n)}function hm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Wg&&(t=t.d_),1===arguments.length&&(e=vl.u()),$g("doc","path",e),t instanceof um)return tm(n=Pl.ot.apply(Pl,ao([e],r))),new am(t,null,new Vl(n));if(!(t instanceof am||t instanceof lm))throw new _l(wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tm(n=t.D_.child(Pl.ot.apply(Pl,ao([e],r)))),new am(t.firestore,t instanceof lm?t.v_:null,new Vl(n))}function pm(t,e){return t instanceof Wg&&(t=t.d_),e instanceof Wg&&(e=e.d_),(t instanceof am||t instanceof lm)&&(e instanceof am||e instanceof lm)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function dm(t,e){return t instanceof Wg&&(t=t.d_),e instanceof Wg&&(e=e.d_),t instanceof cm&&e instanceof cm&&t.firestore===e.firestore&&Xf(t.C_,e.C_)&&t.v_===e.v_}var vm=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new _l(wl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new _l(wl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return yl(this.x_,t.x_)||yl(this.N_,t.N_)},t}(),ym=/^__.*__$/,gm=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new xh(t,this.data,this.Gt,e,this.fieldTransforms):new Sh(t,this.data,e,this.fieldTransforms)},t}(),mm=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new xh(t,this.data,this.Gt,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fl()}}var wm=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Um(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(bm(this.k_)&&ym.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),_m=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||by(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new wm({k_:t,methodName:e,j_:n,path:Rl.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Em(t){var e=t.p_(),n=by(t.I_);return new _m(t.I_,!!e.ignoreUndefinedProperties,n)}function Im(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Vm("Data must be an object, but it was:",s,r);var u,a,c=Lm(r,s);if(o.merge)u=new Ul(s.Gt),a=s.fieldTransforms;else if(o.mergeFields){for(var l=[],f=0,h=o.mergeFields;f<h.length;f++){var p=Mm(e,h[f],n);if(!s.contains(p))throw new _l(wl.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");qm(l,p)||l.push(p)}u=new Ul(l),a=s.fieldTransforms.filter((function(t){return u.Tt(t.field)}))}else u=null,a=s.fieldTransforms;return new gm(new ff(c),u,a)}var Tm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Xg);function Am(t,e,n){return new wm({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Nm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.prototype.z_=function(t){return new gh(t.path,new ch)},e.prototype.isEqual=function(t){return t instanceof e},e}(Xg),Sm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return eo(e,t),e.prototype.z_=function(t){var e=Am(this,t,!0),n=this.H_.map((function(t){return Pm(t,e)})),r=new lh(n);return new gh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xg),xm=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return eo(e,t),e.prototype.z_=function(t){var e=Am(this,t,!0),n=this.H_.map((function(t){return Pm(t,e)})),r=new hh(n);return new gh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Xg),Om=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return eo(e,t),e.prototype.z_=function(t){var e=new dh(t.Qt,ih(t.Qt,this.J_));return new gh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Xg);function Cm(t,e,n,r){var i=t.G_(1,e,n);Vm("Data must be an object, but it was:",i,r);var o=[],s=new hf;jl(r,(function(t,r){var u=Fm(e,t,n);r instanceof Wg&&(r=r.d_);var a=i.U_(u);if(r instanceof Tm)o.push(u);else{var c=Pm(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new Ul(o);return new mm(s.Pt(),u,i.fieldTransforms)}function km(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[Mm(e,r,n)],a=[i];if(o.length%2!=0)throw new _l(wl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Mm(e,o[c])),a.push(o[c+1]);for(var l=[],f=new hf,h=u.length-1;h>=0;--h)if(!qm(l,u[h])){var p=u[h],d=a[h];d instanceof Wg&&(d=d.d_);var v=s.U_(p);if(d instanceof Tm)l.push(p);else{var y=Pm(d,v);null!=y&&(l.push(p),f.set(p,y))}}var g=new Ul(l);return new mm(f.Pt(),g,s.fieldTransforms)}function Dm(t,e,n,r){return void 0===r&&(r=!1),Pm(n,t.G_(r?4:3,e))}function Pm(t,e){if(t instanceof Wg&&(t=t.d_),Rm(t))return Vm("Unsupported field value:",e,t),Lm(t,e);if(t instanceof Xg)return function(t,e){if(!bm(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Pm(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Wg&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ih(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Cl.fromDate(t);return{timestampValue:yp(e.Qt,n)}}if(t instanceof Cl)return n=new Cl(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:yp(e.Qt,n)};if(t instanceof vm)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof El)return{bytesValue:gp(e.Qt,t.I)};if(t instanceof am){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:wp(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+nm(t))}(t,e)}function Lm(t,e){var n={};return Fl(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):jl(t,(function(t,r){var i=Pm(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Rm(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Cl||t instanceof vm||t instanceof El||t instanceof am||t instanceof Xg)}function Vm(t,e,n){if(!Rm(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=nm(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}var i}function Mm(t,e,n){if(e instanceof Wg&&(e=e.d_),e instanceof Qg)return e.f_;if("string"==typeof e)return Fm(t,e);throw Um("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var jm=new RegExp("[~\\*/\\[\\]]");function Fm(t,e,n){if(e.search(jm)>=0)throw Um("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Qg.bind.apply(Qg,ao([void 0],e.split("."))))).f_}catch(r){throw Um("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Um(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new _l(wl.INVALID_ARGUMENT,(u+=". ")+t+a)}function qm(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bm=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return ro(this,void 0,void 0,(function(){var e,n=this;return io(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new _l(wl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return ro(this,void 0,void 0,(function(){var n,r,i,o,s,u;return io(this,(function(a){switch(a.label){case 0:return n=pl(t),r=Np(n.Qt)+"/documents",i={documents:e.map((function(t){return Ep(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.Qt,"found"in(r=t)?function(t,e){hl(!!e.found),e.found.name,e.found.updateTime;var n=Ip(t,e.found.name),r=bp(e.found.updateTime),i=new ff({mapValue:{fields:e.found.fields}});return new vf(n,r,i,{})}(e,r):"missing"in r?function(t,e){hl(!!e.missing),hl(!!e.readTime);var n=Ip(t,e.missing),r=bp(e.readTime);return new yf(n,r)}(e,r):fl());s.set(i.key.toString(),i)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());hl(!!e),u.push(e)})),u)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof yf||t instanceof vf?n.sf(t):fl()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(n){this.Z_=n}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Rh(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return ro(this,void 0,void 0,(function(){var t,e=this;return io(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Vl._t(n);e.mutations.push(new Vh(r,e.jt(r)))})),[4,function(t,e){return ro(this,void 0,void 0,(function(){var n,r,i;return io(this,(function(o){switch(o.label){case 0:return n=pl(t),r=Np(n.Qt)+"/documents",i={writes:e.map((function(t){return Op(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof vf)e=t.version;else{if(!(t instanceof yf))throw fl();e=kl.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new _l(wl.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?bh.updateTime(e):bh.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(kl.min()))throw new _l(wl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bh.updateTime(e)}return bh.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),zm=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new wy(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.$u((function(){return ro(t,void 0,void 0,(function(){var t,e,n=this;return io(this,(function(r){return t=new Bm(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Ql(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.Es.reject(n),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!jh(e)}return!1},t}(),Gm=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Il.UNAUTHENTICATED,this.clientId=vl.u(),this._f=function(){},this.C=new Hp,this.credentials.v((function(t){ul("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return ro(this,void 0,void 0,(function(){return io(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new _l(wl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Hp;return this._s.Tf((function(){return ro(t,void 0,void 0,(function(){var t,n;return io(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=rd(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){return ro(this,void 0,void 0,(function(){var n,r,i=this;return io(this,(function(o){switch(o.label){case 0:return t._s.Af(),ul("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return ro(i,void 0,void 0,(function(){return io(this,(function(t){switch(t.label){case 0:return[4,Rv(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Km(t,e){return ro(this,void 0,void 0,(function(){var n,r;return io(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,Ym(t)];case 1:return n=i.sent(),ul("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return ro(this,void 0,void 0,(function(){var n,r;return io(this,(function(i){switch(i.label){case 0:return(n=pl(t))._s.Af(),ul("RemoteStore","RemoteStore received new credentials"),r=Ry(n),n.Nh.add(3),[4,xy(n)];case 1:return i.sent(),r&&n.kh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,Sy(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function Ym(t){return ro(this,void 0,void 0,(function(){return io(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(ul("FirestoreClient","Using default OfflineComponentProvider"),[4,Hm(t,new zg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Qm(t){return ro(this,void 0,void 0,(function(){return io(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(ul("FirestoreClient","Using default OnlineComponentProvider"),[4,Km(t,new Kg)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function Xm(t){return Ym(t).then((function(t){return t.persistence}))}function Wm(t){return Ym(t).then((function(t){return t.bh}))}function $m(t){return Qm(t).then((function(t){return t.yl}))}function Jm(t){return Qm(t).then((function(t){return t._a}))}function Zm(t){return ro(this,void 0,void 0,(function(){var e,n;return io(this,(function(r){switch(r.label){case 0:return[4,Qm(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=hg.bind(null,e._a),n.Hh=dg.bind(null,e._a),n)]}}))}))}function tb(t,e,n){var r=this;void 0===n&&(n={});var i=new Hp;return t._s.Ps((function(){return ro(r,void 0,void 0,(function(){var r;return io(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Yg({next:function(o){e.Ps((function(){return eg(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new _l(wl.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new _l(wl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new og(Uf(n.path),o,{includeMetadataChanges:!0,nl:!0});return tg(t,s)},[4,Zm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function eb(t,e,n){var r=this;void 0===n&&(n={});var i=new Hp;return t._s.Ps((function(){return ro(r,void 0,void 0,(function(){var r;return io(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Yg({next:function(n){e.Ps((function(){return eg(t,s)})),n.fromCache&&"server"===r.source?i.reject(new _l(wl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new og(n,o,{includeMetadataChanges:!0,nl:!0});return tg(t,s)},[4,Zm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var nb=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new wy(this,"async_queue_retry"),this.vf=function(){var e=my();e&&ul("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=my();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=my();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return ro(this,void 0,void 0,(function(){var t,e=this;return io(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!$p(t=n.sent()))throw t;return ul("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.$u((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,al("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=nd.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&fl()},t.prototype.Af=function(){},t.prototype.Nf=function(){return ro(this,void 0,void 0,(function(){var t;return io(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function rb(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var ib=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new nb,r.w_="name"in e?e.name:"[DEFAULT]",r}return eo(e,t),e.prototype.b_=function(){return this.qf||sb(this),this.qf.terminate()},e}(um);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){return t.qf||sb(t),t.qf.df(),t.qf}function sb(t){var e,n,r,i=t.p_(),o=(e=t.I_,n=t.w_,new rl(e,n,(r=i).host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.qf=new Gm(t.m_,t.Bf,o)}function ub(t,e,n){var r=this,i=new Hp;return t._s.enqueue((function(){return ro(r,void 0,void 0,(function(){var r;return io(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Hm(t,n)];case 1:return o.sent(),[4,Km(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===wl.FAILED_PRECONDITION||s.code===wl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function ab(t){if(t.R_||t.P_)throw new _l(wl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cb=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),$l(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zl(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Gl(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw fl()}},t.prototype.Hf=function(t,e){var n=this,r={};return jl(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new vm(zl(t.latitude),zl(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Kl(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Yl(t));default:return null}},t.prototype.Qf=function(t){var e=Bl(t);return new Cl(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Pl.ot(t);hl(Gp(n));var r=new il(n.get(1),n.get(3)),i=new Vl(n.Y(5));return r.isEqual(e)||al("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),lb=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new am(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new fb(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(hb("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),fb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(lb);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t,e){return"string"==typeof e?Fm(t,e):e instanceof Wg?e.d_.f_:e.f_}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t){if(Bf(t)&&0===t.xt.length)throw new _l(wl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var db=function(){};function vb(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var yb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return eo(e,t),e.prototype.td=function(t){var e,n,r,i=Em(t.firestore),o=function(t,e,n,r,i,o,s){var u;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new _l(wl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Ib(s,o);for(var a=[],c=0,l=s;c<l.length;c++){var f=l[c];a.push(Eb(r,t,f))}u={arrayValue:{values:a}}}else u=Eb(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ib(s,o),u=Dm(n,"where",s,"in"===o||"not-in"===o);var h=If.create(i,o,u);return function(t,e){if(e.Ct()){var n=Gf(t);if(null!==n&&!n.isEqual(e.field))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=zf(t);null!==r&&Tb(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new _l(wl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new _l(wl.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,i,t.firestore.I_,this.ed,this.nd,this.sd);return new cm(t.firestore,t.v_,(e=t.C_,n=o,r=e.filters.concat([n]),new jf(e.path,e.collectionGroup,e.xt.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(db),gb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return eo(e,t),e.prototype.td=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new _l(wl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new _l(wl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Lf(e,n);return function(t,e){if(null===zf(t)){var n=Gf(t);null!==n&&Tb(t,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new cm(t.firestore,t.v_,(e=t.C_,n=i,r=e.xt.concat([n]),new jf(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(db),mb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return eo(e,t),e.prototype.td=function(t){return new cm(t.firestore,t.v_,Qf(t.C_,this.od,this.ad))},e}(db),bb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return eo(e,t),e.prototype.td=function(t){var e,n,r=_b(t,this.type,this.ud,this.hd);return new cm(t.firestore,t.v_,(e=t.C_,n=r,new jf(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(db),wb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return eo(e,t),e.prototype.td=function(t){var e,n,r=_b(t,this.type,this.ud,this.hd);return new cm(t.firestore,t.v_,(e=t.C_,n=r,new jf(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(db);function _b(t,e,n,r){if(n[0]instanceof Wg&&(n[0]=n[0].d_),n[0]instanceof lb)return function(t,e,n,r,i){if(!r)throw new _l(wl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=Kf(t);s<u.length;s++){var a=u[s];if(a.field.ut())o.push(of(e,r.key));else{var c=r.field(a.field);if(Hl(c))throw new _l(wl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=a.field.rt();throw new _l(wl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Df(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Em(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new _l(wl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.ut()){if("string"!=typeof c)throw new _l(wl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Hf(t)&&-1!==c.indexOf("/"))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Pl.ot(c));if(!Vl.wt(l))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var f=new Vl(l);u.push(of(e,f))}else{var h=Dm(n,r,c);u.push(h)}}return new Df(u,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Eb(t,e,n){if(n instanceof Wg&&(n=n.d_),"string"==typeof n){if(""===n)throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hf(e)&&-1!==n.indexOf("/"))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Pl.ot(n));if(!Vl.wt(r))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return of(t,new Vl(r))}if(n instanceof am)return of(t,n.S_);throw new _l(wl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+nm(n)+".")}function Ib(t,e){if(!Array.isArray(t)||0===t.length)throw new _l(wl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new _l(wl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Tb(t,e,n){if(!n.isEqual(e))throw new _l(wl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Nb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return eo(e,t),e.prototype.Wf=function(t){return new El(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new am(this.firestore,null,e)},e}(cb),Sb=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),xb=function(t){function e(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).Yf=e,u.ld=e,u.metadata=o,u}return eo(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new Ob(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(hb("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(lb),Ob=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(xb),Cb=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new Sb(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new Ob(n.Yf,n.Xf,r.key,r,new Sb(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new _l(wl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){var r=new Ob(t.Yf,t.Xf,e.doc.key,e.doc,new Sb(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Ob(t.Yf,t.Xf,e.doc.key,e.doc,new Sb(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:kb(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fl()}}function Db(t,e){return t instanceof xb&&e instanceof xb?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Cb&&e instanceof Cb&&t.Yf===e.Yf&&dm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return eo(e,t),e.prototype.Wf=function(t){return new El(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new am(this.firestore,null,e)},e}(cb);function Lb(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=rm(t,am);var o=rm(t.firestore,ib),s=Em(o);return e instanceof Wg&&(e=e.d_),Vb(o,[("string"==typeof e||e instanceof Qg?km(s,"updateDoc",t.S_,e,n,r):Cm(s,"updateDoc",t.S_,e)).F_(t.S_,bh.exists(!0))])}function Rb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Wg&&(t=t.d_);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||rb(i[u])||(s=i[u],u++);var a,c,l,f={includeMetadataChanges:s.includeMetadataChanges};if(rb(i[u])){var h=i[u];i[u]=null===(e=h.next)||void 0===e?void 0:e.bind(h),i[u+1]=null===(n=h.error)||void 0===n?void 0:n.bind(h),i[u+2]=null===(r=h.complete)||void 0===r?void 0:r.bind(h)}if(t instanceof am)c=rm(t.firestore,ib),l=Uf(t.S_.path),a={next:function(e){i[u]&&i[u](Mb(c,t,e))},error:i[u+1],complete:i[u+2]};else{var p=rm(t,cm);c=rm(p.firestore,ib),l=p.C_;var d=new Pb(c);a={next:function(t){i[u]&&i[u](new Cb(c,d,p,t))},error:i[u+1],complete:i[u+2]},pb(t.C_)}return function(t,e,n,r){var i=this,o=new Yg(r),s=new og(e,o,n);return t._s.Ps((function(){return ro(i,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return e=tg,[4,Zm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return ro(i,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return e=eg,[4,Zm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(ob(c),l,f,a)}function Vb(t,e){return function(t,e){var n=this,r=new Hp;return t._s.Ps((function(){return ro(n,void 0,void 0,(function(){var n;return io(this,(function(i){switch(i.label){case 0:return n=vg,[4,Jm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(ob(t),e)}function Mb(t,e,n){var r=n.docs.get(e.S_),i=new Pb(t);return new xb(t,i,e.S_,r,new Sb(n.hasPendingWrites,n.fromCache),e.v_)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jb=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Em(t)}return t.prototype.set=function(t,e,n){this.md();var r=Fb(t,this.Yf),i=Ab(r.v_,e,n),o=Im(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,bh.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=Fb(t,this.Yf);return e instanceof Wg&&(e=e.d_),o="string"==typeof e||e instanceof Qg?km(this.Id,"WriteBatch.update",s.S_,e,n,r):Cm(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,bh.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=Fb(t,this.Yf);return this.Ed=this.Ed.concat(new Rh(e.S_,bh.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new _l(wl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Fb(t,e){if(t instanceof Wg&&(t=t.d_),t.firestore!==e)throw new _l(wl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ub=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return eo(e,t),e.prototype.get=function(e){var n=this,r=Fb(e,this.Yf),i=new Pb(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new xb(n.Yf,i,r.S_,t.Zf,new Sb(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Em(t)}return t.prototype.get=function(t){var e=this,n=Fb(t,this.Yf),r=new Nb(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return fl();var i=t[0];if(i instanceof yf)return new lb(e.Yf,r,n.S_,null,n.v_);if(i instanceof vf)return new lb(e.Yf,r,i.key,i,n.v_);throw fl()}))},t.prototype.set=function(t,e,n){var r=Fb(t,this.Yf),i=Ab(r.v_,e,n),o=Im(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Fb(t,this.Yf);return e instanceof Wg&&(e=e.d_),o="string"==typeof e||e instanceof Qg?km(this.Id,"Transaction.update",s.S_,e,n,r):Cm(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=Fb(t,this.Yf);return this.Ad.delete(e.S_),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(){if("undefined"==typeof Uint8Array)throw new _l(wl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Bb(){if("undefined"==typeof atob)throw new _l(wl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var zb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.fromBase64String=function(t){return Bb(),new e(El.fromBase64String(t))},e.fromUint8Array=function(t){return qb(),new e(El.fromUint8Array(t))},e.prototype.toBase64=function(){return Bb(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return qb(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Wg),Gb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ab(t=rm(t,ib));var n=ob(t),r=t.p_(),i=new Kg;return ub(n,i,new Gg(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ab(t=rm(t,ib));var e=ob(t),n=t.p_(),r=new Kg;return ub(e,r,new Hg(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new _l(wl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Hp;return t.Bf.Tf((function(){return ro(e,void 0,void 0,(function(){var e;return io(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return ro(this,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return Qp.Kn()?(e=t+"main",[4,Qp.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ov(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),Hb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof il||(i.Pd=e),i}return eo(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){var n,r,i,o;n=this.d_,r=t,i=e,"firestore.googleapis.com"!==(o=(n=rm(n,um)).V_()).host&&o.host!==r&&cl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n.g_(Object.assign(Object.assign({},o),{host:r+":"+i,ssl:!1}))},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return ro(e,void 0,void 0,(function(){var e,n;return io(this,(function(r){switch(r.label){case 0:return[4,Xm(t)];case 1:return e=r.sent(),[4,$m(t)];case 2:return n=r.sent(),[2,(e.yo(!0),i=n,o=pl(i),o.Nh.delete(0),Sy(o))]}var i,o}))}))}))}(ob(rm(this.d_,ib)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return ro(e,void 0,void 0,(function(){var e,n;return io(this,(function(r){switch(r.label){case 0:return[4,Xm(t)];case 1:return e=r.sent(),[4,$m(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return ro(this,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return(e=pl(t)).Nh.add(0),[4,xy(e)];case 1:return n.sent(),e.kh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(ob(rm(this.d_,ib)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Zg("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Hp;return t._s.Ps((function(){return ro(e,void 0,void 0,(function(){var e;return io(this,(function(r){switch(r.label){case 0:return e=_g,[4,Jm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(ob(rm(this.d_,ib)))},e.prototype.onSnapshotsInSync=function(t){return e=this.d_,n=t,function(t,e){var n=this,r=new Yg(e);return t._s.Ps((function(){return ro(n,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return e=function(t,e){pl(t).Wh.add(e),e.next()},[4,Zm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return ro(n,void 0,void 0,(function(){var e;return io(this,(function(n){switch(n.label){case 0:return e=function(t,e){pl(t).Wh.delete(e)},[4,Zm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(ob(e=rm(e,ib)),rb(n)?n:{next:n});var e,n},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new _l(wl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new ow(this,fm(this.d_,t))}catch(e){throw $b(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Wb(this,hm(this.d_,t))}catch(e){throw $b(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new nw(this,function(t,e){if(t=rm(t,um),$g("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _l(wl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new cm(t,null,(n=e,new jf(Pl.ct(),n)));var n}(this.d_,t))}catch(e){throw $b(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new Hp;return t._s.Ps((function(){return ro(n,void 0,void 0,(function(){var n;return io(this,(function(i){switch(i.label){case 0:return[4,(o=t,Qm(o).then((function(t){return t.Sh})))];case 1:return n=i.sent(),new zm(t._s,n,e,r).run(),[2]}var o}))}))})),r.promise}(ob(e=this.d_),(function(r){return function(e){return t(new Yb(n,e))}(new Ub(e,r))}))},e.prototype.batch=function(){var t=this;return ob(this.d_),new Qb(new jb(this.d_,(function(e){return Vb(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new _l(wl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new _l(wl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Wg),Kb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return eo(e,t),e.prototype.Wf=function(t){return new zb(new El(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return Wb.yd(e,this.firestore,null)},e}(cb);var Yb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new Kb(e),r}return eo(e,t),e.prototype.get=function(t){var e=this,n=sw(t);return this.d_.get(n).then((function(t){return new tw(e.Yf,new xb(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=sw(t);return n?(Jg("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=sw(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,ao([s,e,n],i)),this},e.prototype.delete=function(t){var e=sw(t);return this.d_.delete(e),this},e}(Wg),Qb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.prototype.set=function(t,e,n){var r=sw(t);return n?(Jg("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=sw(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,ao([s,e,n],i)),this},e.prototype.delete=function(t){var e=sw(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(Wg),Xb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return eo(e,t),e.prototype.fromFirestore=function(t,e){var n=new Ob(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new ew(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Kb(t),n),i.set(n,o)),o},e}(Wg);Xb.Vd=new WeakMap;var Wb=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Kb(e),r}return eo(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new _l(wl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new am(n.d_,r,new Vl(t)))},e.yd=function(t,n,r){return new e(n,new am(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ow(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new ow(this.firestore,fm(this.d_,t))}catch(e){throw $b(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Wg&&(t=t.d_),t instanceof am&&pm(this.d_,t)},e.prototype.set=function(t,e){e=Jg("DocumentReference.set",e);try{return function(t,e,n){t=rm(t,am);var r=rm(t.firestore,ib),i=Ab(t.v_,e,n);return Vb(r,[Im(Em(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,bh.Kt())])}(this.d_,t,e)}catch(n){throw $b(n,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Lb(this.d_,t):Lb.apply(void 0,ao([this.d_,t,e],n))}catch(i){throw $b(i,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Vb(rm((t=this.d_).firestore,ib),[new Rh(t.S_,bh.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Jb(e),i=Zb(e,(function(e){return new tw(t.firestore,new xb(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return Rb(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=rm(t,am);var e=rm(t.firestore,ib),n=ob(e),r=new Pb(e);return function(t,e){var n=this,r=new Hp;return t._s.Ps((function(){return ro(n,void 0,void 0,(function(){var n;return io(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ro(this,void 0,void 0,(function(){var r,i;return io(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,u=e,a=pl(s),a.persistence.runTransaction("read document","readonly",(function(t){return a.Tc.Ho(t,u)})))];case 1:return(i=o.sent())instanceof vf?n.resolve(i):i instanceof yf?n.resolve(null):n.reject(new _l(wl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=rd(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,u,a}))}))},[4,Wm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new xb(e,r,t.S_,n,new Sb(n instanceof vf&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=rm(t,am);var e=rm(t.firestore,ib);return tb(ob(e),t.S_,{source:"server"}).then((function(n){return Mb(e,t,n)}))}(this.d_):function(t){t=rm(t,am);var e=rm(t.firestore,ib);return tb(ob(e),t.S_).then((function(n){return Mb(e,t,n)}))}(this.d_)).then((function(t){return new tw(e.firestore,new xb(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Xb.gd(this.firestore,t)))},e}(Wg);function $b(t,e,n){return t.message=t.message.replace(e,n),t}function Jb(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!rb(r))return r}return{}}function Zb(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=rb(t[0])?t[0]:rb(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var tw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return eo(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Wb(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Db(this.d_,t.d_)},e}(Wg),ew=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(tw),nw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Kb(e),r}return eo(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,vb(this.d_,(o=r,s=n,u=hb("where",i=t),new yb(u,s,o))))}catch(i){throw $b(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,u},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,vb(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=hb("orderBy",t);return new gb(r,n)}(t,n)))}catch(r){throw $b(r,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,vb(this.d_,(im("limit",n=t),new mb("limit",n,"F"))))}catch(n){throw $b(n,"limit()","Query.limit()")}var n},e.prototype.limitToLast=function(t){try{return new e(this.firestore,vb(this.d_,(im("limitToLast",n=t),new mb("limitToLast",n,"L"))))}catch(n){throw $b(n,"limitToLast()","Query.limitToLast()")}var n},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vb(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bb("startAt",t,!0)}.apply(void 0,t)))}catch(r){throw $b(r,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vb(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bb("startAfter",t,!1)}.apply(void 0,t)))}catch(r){throw $b(r,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vb(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wb("endBefore",t,!0)}.apply(void 0,t)))}catch(r){throw $b(r,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,vb(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wb("endAt",t,!1)}.apply(void 0,t)))}catch(r){throw $b(r,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return dm(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=rm(t,cm);var e=rm(t.firestore,ib),n=ob(e),r=new Pb(e);return function(t,e){var n=this,r=new Hp;return t._s.Ps((function(){return ro(n,void 0,void 0,(function(){var n;return io(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return ro(this,void 0,void 0,(function(){var r,i,o,s,u;return io(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Bv(t,e,!0)];case 1:return u=a.sent(),r=new ag(e,u.Rc),i=r.fl(u.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=rd(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,Wm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Cb(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=rm(t,cm);var e=rm(t.firestore,ib),n=ob(e),r=new Pb(e);return eb(n,t.C_,{source:"server"}).then((function(n){return new Cb(e,r,t,n)}))}(this.d_):function(t){t=rm(t,cm);var e=rm(t.firestore,ib),n=ob(e),r=new Pb(e);return pb(t.C_),eb(n,t.C_).then((function(n){return new Cb(e,r,t,n)}))}(this.d_)).then((function(t){return new iw(e.firestore,new Cb(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Jb(e),i=Zb(e,(function(e){return new iw(t.firestore,new Cb(t.firestore.d_,t.Xf,t.d_,e._d))}));return Rb(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Xb.gd(this.firestore,t)))},e}(Wg),rw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return eo(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new ew(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(Wg),iw=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return eo(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new nw(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new ew(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new rw(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new ew(n.Yf,r))}))},e.prototype.isEqual=function(t){return Db(this.d_,t.d_)},e}(Wg),ow=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return eo(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new Wb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Wb(this.firestore,void 0===t?hm(this.d_):hm(this.d_,t))}catch(e){throw $b(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this.d_,n=t,r=rm(e.firestore,ib),i=hm(e),o=Ab(e.v_,n),Vb(r,[Im(Em(e.firestore),"addDoc",i.S_,o,null!==e.v_,{}).F_(i.S_,bh.exists(!1))]).then((function(){return i}))).then((function(t){return new Wb(s.firestore,t)}))},e.prototype.isEqual=function(t){return pm(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(Xb.gd(this.firestore,t)))},e}(nw);function sw(t){return t instanceof Wg&&(t=t.d_),rm(t,am)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var uw,aw=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Qg.bind.apply(Qg,ao([void 0],e))))||this}return eo(e,t),e.documentId=function(){return new e(Rl.ht().rt())},e.prototype.isEqual=function(t){return t instanceof Wg&&(t=t.d_),t instanceof Qg&&this.d_.f_.isEqual(t.f_)},e}(Wg),cw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return eo(e,t),e.serverTimestamp=function(){var t=new Nm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Tm("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sm("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xm("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new Om("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(Wg),lw={Firestore:Hb,GeoPoint:vm,Timestamp:Cl,Blob:zb,Transaction:Yb,WriteBatch:Qb,DocumentReference:Wb,DocumentSnapshot:tw,Query:nw,QueryDocumentSnapshot:ew,QuerySnapshot:iw,CollectionReference:ow,FieldPath:aw,FieldValue:cw,setLogLevel:function(t){var e;e=t,ol.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(uw=Wo).INTERNAL.registerComponent(new Eo("firestore",(function(t){return function(t,e){return new Hb(t,new ib(t,e),new Gb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},lw))),uw.registerVersion("@firebase/firestore","2.1.5");export{Hn as F,bi as T,or as a,ar as b,Zn as c,Xi as d,Ue as e,Mr as f,ur as g,ri as h,Wo as i,On as j,Oi as k,Ln as l,Wi as m,Ui as n,$n as o,Fe as p,Di as q,Bn as r,a as t,Ni as v,qe as w};
